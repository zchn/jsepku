00000000        ԭ  ɷ  ʱ ͷ      н  ʹ ƶ 绰  ѧ ҵ       10   һ     ʱ  11  3     ҵ Э  ս Ч   1903    ֵ            ʶ  1916  5  21   ҹ  ձ    ɽ    1940   ˹̹ Ϊ һ     1949  10  1     ϯ   л  ͹    1967   һ    ʱ    ͷ  Ұ   1977        1979   ÿ һ ѡ ֻ ׼ Ͷ һ ѡ  Ʊ  1979       һ   1991   Ⱦ      3026    440    1992     ƴ  һ   1997         һ   1  26    Ϊ Ĵ        ʻ      ս  ƽ            һ       ô   ǰ        ɢ ȥ    һ     Ⱥ                 һ  ʴ ڼ õ       Ӿ        ѧ         ³    Ϊ    ѧУ ȥ     ³   һ  ȥ         ѧ     ȥ     Ž  ʵ   ִ  ǰ     һ    û õ ʵ      Ȱ        ũ С Ѿ ס   ʮ        ¥ ȥ ס     ط    װ       ͬѧ   Լ           ķ     û   ķ               Ĵ ½     16        Ĵ                ˵ ʱ     緹                 ɾ   ֳ ŵ              ʼ  ѧ         ȥ      ǽ     һ  Ѿ ע  ƿ            һ     ת     ͷ   ߰    ɾ          ־             ·    ƿ              ȫ      ̽     Σ           ʧ    ͹ ԭ   ȷ      С     ˼  
00000001 л  ͹  ͨ          Ӳ  ϡ    ѡ   й   һ     ڶ      ʽ Ա  үү      ĸ            ÷    Ǹ  ɰ         ֱ                  һ        ʮ    ʮ    ʮ     ṹ Ϻ                             ʽ     ֮  ʽ Ա              ٳ  Ѿ  ʮ               ǰ 츳Ȩ  Ȼ ƽ  һ   Ϊ      һֱ    ƽ   Ž   Ƿ Ϊ                    һ      ë Ǯ һ                  һ  үү    û     û  ֤  ֲ  û  ݺ     ͷ  Ҳ    һ ʽ  Ȼ   Ů   ʮ     ÿ 糿  ʮ    ʮ      ׼      ͷ Ƭ   ϡ   ͷ  ߵ ʮ    ϰ ѧ  үү  Ժ        ʱ ȥ  ֵ ίԱ ִ   ʮʱ       ׼   ը    С һ   һʱ ʮ  ٴ   ϰ ѧ  үү   ˯  ʱ    ٴ ϴ       Ȳ       үү     о     о  ÿ  Ҫ о     үү         һ  ²   ó         ô   ׷      һ   һ                    һ    о          ž    ʮ  Ժ   Ҫ       үү      Ϳ         λ    Ǹ          Ƭ  ˿        ȷ  һ ش    үү      һ     ɫ  Ȼ ˵     Ƭ     ˵     ˿    Ȼ  ͼ õ  Բ  ᳹       үү   үү  ʱ ܹ ܶ     ˵   ٶ           һ  е      ž       ȥ   Ҳ            ̫       ֪   ɶ ζ   Ȼ ְ      ˵   û    ζ    ǻ ǻ һ  һ    Դ һ ׹ һ ׹   ȶ һ  һ       ˵         һ     Ż   ȫ   үү  Ϊ                         ֽ   ʵ ֧      ͻȻ   仯  · ³  ӿ   ̶     ͻȻ   ʵ    ϴ»    ˵    Ӣ ʶ  үү     ÿ   ˯   ֽ          㲥           ѯ                 ʲô Ҫ ĸ   û     ˵ û      ˵  Ը    һ һ  ȥ          Զ        һ    ǰ    ۾   ۾     ëë       ¼  үү   ׼          ¼    ʱ      һ      һ  Ϸ   ѧ  è     һ  ֽ  ¼  Ȼ ų    Լ   ͬ     Ϊ ¼          үү   汲 ֪ ¼ Ϊ   ʵ  ̾Ϣ    Ժ                      ӻ         ¼  һ        ʶ       Ͼ  Ϊ   ԶԶ  ͥ  г    Ҫ  Զ   ͳ      ϻ      һ   ȡ  ˯   ֻ Ϣ ʮ   һС ʱ   ʹ ȫ ɧ  һ   ˵  λ  Ӧ      ϲ    ϲ   ׳       ϰ  Ȼ       ׷ Ӧ ϻ     ʺ   û     Ӧ   ȡ    Ի    ô             Ҫ ͷ   ָ                һ    Ҳ  ʧ                 Զ   ʱ ӳ               ӳ ȴ Ҳ Զ ƺ   ϰ ʱ   û ƺ ° ʱ     ָ    ը       ۾        ϻ  ˯ ʱ ʼ     ÿ   ʮ   ʮ       ·    ³          ˼   ɣ     ˼        ӿ    ά ֮                                Ҳ   Ҫ 䶯 䶯                                үү     Ԫ   ڸ       ͥ ȫ       Ҳ   Ȩ  ϯ   ͨ   ʽ Ա   ִ       ޳    ί ְ          ʳ ά  ְ һ ڼ   ֳɷ   ֳ                  ҵ    ˼ Ҳ  Ϊ                      Ƭ  ˿     һ ȥ  үү    ˵ ʲô   ʲô    ϰ    үү     ү ˵    Ҫ         ү ˵            ү ˵   ϴ   Ҫ  ϴӼ    ѧ   ж   ˮ      ʡ   ɾ   һ    鷳       ְ  ְ     ȥ  үү           һ  һ ү ˵         ֱ ȥ  үү 㵱  ֱ ȥ  үү     ְ    үү    үү   Ҳ       ְ ˵   Щ      Ҫ         ְ      ү ˵       ү ˵              Щ ˽    Щ ʲô  ֪          ְ      ְ         ʥּ  Ҳ   үү     ͬ                                          ͨ  ְ   ڸ ѡ  үү     ú    һ  ְ  ˵ · Ȩ     ְ   Ӧ    үү     ְ Ҳ   һ · Ȩ                  Ƭ ˿ ֮  ѡȨ ȫ         Ӧ    ô            л  ̿     һ                ô    Ӧ  ְ  Ȩ         ֧      ʲô   ʲô     ʲô   ʲô    ʲô    ʲô          ΪЦ  л     ̧  һ վ    ʵ       ֪     һ ٰ   û з Ϊ  Ϊ              ʼ ݱ   ʶ                 Ȼ       ʼ ɢ һЩ          ʮ  һ        ѭؾ  īسɹ     ˼ȡ         ʱ         ̫    Ļ  ̫         ˮƽ ̫              ʮ      ˮƽ       Ȼ   ¶ Щ     ͷ    ʼ    ˼  ĳЩ                    ͷ  Ϊ һ     װ   ̲              ը   С     ը  Ϊ ˮ ը           һ    Ϊ    һ          Ϊ  л    ª      ʡ   ʳ Ǯ    Щ ˲    үү        үү Ч     ŭ      ɶ       ˵                 ʢ  һ  л              ǰ   Ϊ    һ    һ   һ         ˵   һ  ̰  ʳ   Ȩ  ʴ  һ Ȩ   һ  ʴ    ֮   Ȩ  ٷ֮  ʴ    д             δ ʾ ̬   ܵ   Ĭ                   ʱ      ͹          ˮƽ    Լ    л          Ҫ    ִ     Ȼ        ȴ û ˵ ʲô      ܹ Ҳ      徢   뷨   ӱ   ɲ   Ȼ       ෽  ο            ʮ   ɼ  Ҫ   ˭  Ĩɱ Ҳ Ĩɱ       ǳ     һ       Է   ʮ  һ        һ    ȱ  ̼ ˮ        ȱ     Ӱ      Ѫ                                          ҹ ƽ  ȡ            ʮ     ȥ   û ˼    û ˼    û ˼    û ˼   ˼ һ  ˯ һ       Сʱ     Сʱ     絽    ʮ       Ȼ  ޾     ˵    Ӧ     ô   Ҫ˵              ʳƷ ṹ  Ȳ   ֵ                 չ ˮ׼           ɹ  ά      Լ       Ҳ          ʳƷ ṹ         Ϊ   糿  ͷ Ƭ ϡ  ̲                                           ִ    ̫    ̫    ϡ  ̲              ֪   ׻       ˥  Դ   ƺ  ʽ΢                糿   ϡ  ̲      1840   ѻƬս  Ӣ ܹ ʤ   1900   ˹  ̫     е   1931  ձ ض     һ  ±   1937  С    « ±   ձ     һ   й  һ              ʦ  ݿ                      쵼  ¾  ϡ  ̲                                      ҹ   Ƽ      ס              ӵ    ﵽ  ǰ    ˵  ϡ  ̲      Դ               ȶ Ƿ չ    Դ    ϡ  ̲  ϡ  ̲    й  û ϣ    Ϊ ֮    Ϊ֮   һ    һ  ϲ  һ                                                        ƨ    ô  ѧ    ô      ô Ϭ    ץס  ô ؼ  Ҫ           ˼    ǿ     ϡ  ̲  ػ     ִ ֮       ֮  ά ռ  ʵ  η                           һ մ       仨ˮ    ̸      ͤ  Թʵ  ޵   ̸      ʵ        ֮                                                 ȡ   ׼                 ȥ Ժ   ֢   ֻ  һ    Ϊ ڽӴ   ʵ   Ҳ  Ȼ       һ       ˵     Ҫ  ô       ִ Ҳ            ʢ ֮ ʱ      üһ   ʮ    л    ³   ᳫ   ţ     ʮ   ù      ִ                                                                                                                                             Ӳ              Ϊ     ·      Ȼ                ը һ    Ͷ      ֪  ô       ޳ ʶ     Ҫ    Ŀ   ֮  Ŀ   ֮ ͷ  δ֪   Ҳ           һ    Ҫ     үү ˵         ͼ  ڶ   Ȼ    ӵ   ţ          ţ        л       Ƥ     Ƥ    ϲ      ð   㶫    Ϻ   Ȼ  Щ     ţ    ѹ ţ         һ   Ȼ        Ҳ         ɱ˷ Ƶ    Ϊ   ζ  Ӳ           һ  ۺ֢   й С ʵ ѽ     ҹ   ȥ    ֮  ȫ       ж  θ  סԺ     θ ֢          Ӳ  үү       ְ    λ Т  ̺      ͱ   Ч΢      ʹ           ʹ      ÿ   Ż            ͵͵  ϡ ̲      ֪  Ϊ           ȥ һ   ʳ           Ӧ ϡ  ̲           Ҫ       ְ    Ӧ     Ȩ  ָ ͥ     ְ   ֻ ȥ  үү  үү ֻ ȥ        סԺ     Ժ Ժ Ҳ       е  û      үү ֻ ǧ   ̬         Լ   ԭ     Ϊ     Ҽ   ȫ   үү   Ҫ    үү   Ҫ        һ        ͬʹ һ     ֻ ʣ  һ ͷ  һ     һ     ֻ ʣ  һ  ˮ  һ               ô                    ֮    үү ˵    ´         ϸ  ε  ů    ֯              Ա ϶   Ӵ       Ȱ˵ үү   ȥ  үү ؼ ټ  ȫ    Լ   ˥        ʲô ô    й   ɼ     Ȩ    һ Ҫ     ֻ ȥ           Թ               θ   Ҳ  ޷     ˭   ʲô  ʲô     Լ û      Ҳ   үү ˵     ׷ ̬   ˵  үү          ƽ         ʾ  ׼ ÿ  үү    ˵    ÷  үү       һ         ְ       һ         Ϊ     һ ³         һ   Ҳ  ֻ   һ   Ȼ   һ   Ȼ        ״  ƺ ൱     һ             ִ Щ  ͬ һ Է  ̫  ¥  ʱ      ˵  ̫   Χ һ        Ⱦ  Ӵ             ͥ       ô ü   ˷   һ Է    үү   ƺ Щ Ȼ  ֿ           ʮ һ     һ  ռ Ż    Ю үү ֮      ֻ   ̾  Ȼ ְ  Ȼ   Ȼ    ʱ    ʱ  ֻ    ȥ ϰ  Ȼ  ͬ    ̾  Ȼ   ֤   һ     ú    ϴ Ϊ  ȫ   һ ú    ʮ  ˴                   ƿ  ʱ ʮ    ʮ   þ   ʺ ֮      ¯      ֤    ú   ֤    ú Ҳ û ط     ִ ʶ       Ҫ     ʮ ƽ  Ȼ               ׷      Ҫ     Ұ    ̸      ̸                                                  ȫ   վ  ˵          ѧ û о  ӳî  һ  ú     Դ  Һ ʯ  Ӧ   һ  ֻ ʮ   Ʊ                 ʮ     ֤ ȫ  ʳ   ˮ      һ   Ʊ            ˭ ȥ   ƻ  Լ       ƻ         ̾  ɧ       е ˵ ú   Ժ           ˵   ÿ   ʱ ʮ                          ϵ Խ    չ ˮƽ        Խ  Խ    үү ƹ     е    ˵        Т     Ȼ û ͥ      ͥ  ͳ  Ϊʲô Ҫ ѧ     ˼ Ҳ   ȥ  үү   Լͬ  ȥ        ȫ Ψһ    ˮ ֮                      ι ʮ    ¹ ת       ʶ  Ӻ ж         лл     ԭ    Ҽ  ʵѧ ֮   ֻ     ֪ Լ    һ      ֪       ʶ           ȷʵ һ    Ȧ            ɫ   ˵     ֮               ͷ Ƭ  ʵ  С       ˭             ⽨ ҳ   ű         ˭   ʲô   ʲô      ʳ    Ȼ      Ҫ     ȱ       Ҳ                              ͦ     ĸ   û   ֻ ϡͿ       ֪    Կ   ֪          Լ  ѡ     û     ľ  ɥʧ Է   ʶ  ʹ Է  컯 Ϊ      һ           Ϊ  Ϊ  ʹ Է   Ϊ  θ ͷ  ħ  û   û ѡ  û ѡ  ʧ  Լ          ඥ  ͷ   ֹ    ܵ     ˵    ű   һ ͣ  ũҵ    ʧΪ һ      ر ʺ ä  ׳  ʹ    Ҳ       һ    ƽ    Ҫ˵      Ȼ   ɱ    ɱ           û    û   û           ű ѹ    һ    ʢ  ˼  Ծ  ׷    ʱ      ʮ  ǰ  Ȼ   ʱ  ֻ  ѹ   ²       ̾    ̫                     ʽ    ʧ ֮  ڼ        е ðռ   ̸           췴  ɫ           Ҳ     ˳      ֻ    ﵹæ       ˵       ô      ˵      ѡ   ѡ    ؼ    Ѩλ    ǣţ      һ     ѡ   ÿ   ̸̸  ñ   Ͷ     Ǯ  Ҫ      ׼   ṩ ʲô  ʳƷ    Ҫ ʲô     һ   ͸  淶     ɻ    ѧ  ƶȻ    һ  ѡƱ   ѡ                         Ҳ        ְ  ˼  һ       ˼          ̬ ˵      ޳       ؿ  һ  ү    ޳  һ        ˵   үү Ƕ û  үү ˼     ʳ   Ҳ      鷳                     һ              Ա   û ѡȨ  ѡȨ       ˵      ѽ    廰 ò                       ˵ ʲô   ˵  û ѡȨ  ѡȨ              ô     ˵ ͨ       ȥ      һ    ֪     ֪  ɶ     ÷ Ҳ ֻ       ÷ Ϊ       λ                   λ    һ   ԭ   û    ý Ϊ   վ  ˵       ʵ  ջ ߵ  ʲô         ͳ    ͳ Ҳ  վ ס             б        ƶ     ƶ  ĸ Ҳ    ĸ    Լ  ɷ ˵     ɴ ָ                    ˵       ʲô ˲  ʵ       û   Ҫ       ɫ  Ц һ     ȥ    Щ      ˵  ָ   ؿ ʵ  һ ؿ    Ȼ        үү   үү ͨ   Ҳ  ͨ                           ֮       Ҫ   Ϊ       һ   ֮  Ȼ     ԭ  ӹ  ì    ˵        ˵  С   С  ˵      ˵      Ѱ  ͬ   ϵ  γ  Ǣ  ޼     湦   һʱ           Ҳ  ֵ ϲ£   ְ    ȥ ̸  Ȼ һ ̸  ͨ     ѡ ʮ   ˵    Щ ʽ        ʾ   ˴  סԺ    һ              Ӭ  Ҳ   Ӭ   Ը         ʲô         Լ   ѡȨ Ҳ          ȷ ʾ   μ   κ       Ѿ Զ ˳  ʷ ̨        ѡ       ٽ  ȫ       ɨ    Ĩ     ֻ    ƿ    Ʒ          Ȼ      һ             ŷ ʱ   ɫ          ֶ  ָ    һ ʢ    Ҫ μ ѡ          Ϊ   һ ˵   Ӧ  һ         Ӭ         ô  û Ը  ѡ                ˵   ÷    ˵ ò            û  ϰ   ˼        Ļ      ˵            ̬ ƽ   ʿ ͷ   ˵     μ ѡ             ˼ ɲ  Ϊ  Ȩ    ѡ     ֻ  Ϊ  Ĩ   ˵      Է ѧ           ѧ ϵ    ֻ        Ԫ     λ    λ   Ը     һЩ Ǯ    ʮ ӭ     ʱ     ֤          ȫ й     Լͬ     ѡ             Լ  һ ͨ   Ƥҩ  Ŀ    ˺     Ȧ                     ֳɷ   ȥ ѡ       ҩ  ʲô       ɶ  ѡ Ӵ       û  ѡ  Ҳ վ  ϡ  ̲  ը      ʮ  û  ѡ  Ҳ û    û    û  שͷ     Ҳ û       ƨ          үү        ϡ  ϡ         й         ̤ʵ   Ȼ ˵     Ҫ  һ  Ȼ ˵  ѡ    Ҫ ѡ һ                үү Ҳ     Ҫ       ˭   ˵  ѡ һ    һ ѡ    Ӵ     Ӫ   ζ      ׳     Ѫ      ǿ          ɫ     ζ   ʡ  Ǯ  Լ Դ   Ϻ  ׼                 Ȩ     Խ    ר     ר     ʣ    ˷ ʳ            Ϻ       ȵ   ѡ          ĸ  ɱ   ޳  ѡ   ʼ ѡ  д ѡƱ  ͶƱ  Ʊ Ʊ   Ʊ ʮ һ   ջ Ʊ ʮ һ    ͶƱ Ч   Ʊ     δ д κ ѡ  һ  Ʊ д   ˭   ൱   Ʊ    Ʊ    ѡ      Ʊ  үү  Ʊ     һ Ʊ  ô  үү  Ʊ         Ҳ    ֮ һ     ѡ   û ˵         ˵       һ   ķ һ   ķ    ͳ     ܷ   涨  ʵ    Ϊ               ν           ֮һ         ֮      Ҫ  ͳ  Ҳ Ҫ        ѡ             ֵ Լ     ô ˵ ô         Ȼ үү  Ʊ   Ȼ  үү ѡ                         ⽨ ҳ ʶ  ִ  ʶ   һ  ˵      ⽨ ҳ ʶ   ʵ       Ҫ Σ  Ҫì                 ⽨             Ψ  ǰ          й Բ          ͻȻ             һ Ʊ   Լ Ͷ  Լ    ˵     ֻ    Ŀ     ƺ   ѡ       ѡ Ψ   ֮     ˢ       ˭      Ϊʲô                                ʹ ѡ   Ҳ   ʲô ֮                      ѡ  ѡ  ѡ ĸ ѡ  ѡ     ʱ      ѧ˵                            Ȣ ĸ     ˹    ֪   Ϊʲô  һ ˵   ĥ                 һ Ʊ ˵  δ   δ   һ    ȼ    ˵  ֮ Ҫ  Ҽ  ʳ ĸ  ȫ  һ  ˽                         ÿ һ           ۽    ƶ      ˵   Ȼ    ȱ              ʵ                      Ҽ ʳ ϵͳ                                                                                 ƻ  Ƥ                     ù      ù  ۵      ù  ۵       ˳  ʱ  廰 ˵  ע   廰         ò   廰 ȴ  һ    ǻ    ɴ ˵ һ  ̧                      Ҫì  Ҫ Σ  ᷨ    ʽ  ᷨ                ǿ ĳ һ    Ҫ Σ  Ϊ    ҽ   Ѿ ֤    ָ   Ҫ Σ     ձ ϡ       кҩ     ҽ  淴  ֮                  Ҫ Σ    ձ  ֱ             շ  Ϊ ϻ               ˮ    Э          Ҫ   Ҳ Ҫ  ϡ    ϡ Ҳ          ϡ    ϡ       Ҳ  ϡ                    û                            ³´л   ƺ ܵ  ٽ        ˵ Ȼ ְ  Ʊ   ְ    ְ ȴ  ޳                ʵ        ˼            ְ   Ȩ   λ          Ӧ ѡ ʲô 쵼   ѡ   Ա  һ   ջ       ʾ    Ҳ о ȷʵ     ˼·    ͻƿ    ʾ  Ѿ û ʱ   Ѿ         ˭   Է       ֤       ӵ   ȴ Ȼ           Ҫ Է    û  Ҳ  Ҫ Է  ӵ    Ҫ Է      Ҳ  Ҫ Է   Է  Ҫ Է    Է  Ҳ  Ҫ Է     ׷  Է ȥ   Ϊ            ÿ Ҫ  ͷ һ    ׷ һ         ̲ ˿ һ    ϡ һ      һ  ȵ  Ϊ   һ                ʮ    ʮ  ҹ       嶯     Ҳ  ͺ      Ҳ      Ҳ     · Ҳ             Ž   ˼              Ȥ  ˵  Ҫ      ʱ   Ц  ǰ     ܵ  ĳ   ʾ     ˵   ̲  ʱ          һ  ˥                 ʮ ˳ ͨ  ˭ Ҳ û ˵        һ һ  үү    һ     ĸ       һ            һ              ܵ    һ ͬ      ȴ Ҫ     ϣ ֮  ر    Ȼ    ر      ϣ ֮      Ȼ    ֮                ʱ ȥ    ģģ  ʶ   Ȼ            ʵ   Ȼ                                                                                    ȥ  Ҳ û      Ҳ          Щ    Ҳ   Է    ƽ  ȥ         ˯  һ   һֱ ˯   ĵ     ȥ     ֹͣ    ȫ      ׷      ҵ  ȥ                               һ       ڼ ؼ       ѯ    ʲô    ʱ   ˵             ֻ ϡ   ͷ     ը    ˵     ⳰ ˵       θ   ѽ             Ԫ¥             ܵ ú         ȫ           Ҳ        ˵    Ȼ   ϡ   ͷ Ƭ   ͷ    ը            һ ѧ һ ҵ            ˵            ϡ ̲     ϡ ̲      ֮                                ͬ ص          ʲô 취                   Ѿ   ϡ ̲  Ŵ        ְ  үү Ҹ    һ        Ѽ                             ḻ  ߵ      Ƭ Ҳ         ը  Ҳ    ը                    з ɳ      һ          ȥ          ɳ        ֻ ϡ ̲    ʹ  һ  ʢ    ɽ亣ζ   Ժ Ҫ   ϡ ̲              θ  Ƣ   ȶ   ת      ϡ ̲        ʹ  Ҳ  ᳤     δ  θ      ϡ ̲           ̲    ʳƷ   ı     ֻ        Ŀ     ȥ Ժ        ͷ   ÿ   ǰ    Ҫ ȥ  үү                       Ƭ  ˿       ҳ  ˸   һ     һ                       ն  ʴ           е        緶    үү Ŵ ʾ ֻҪ  ϡ  ̲   ͷ Ƭ  ը                          Լ  ʲô ߼ ɽ亣ζ     ׼                       İ   ȥ     ΨΨ        ̤ʵ             ȴ Ҫ  ձ  Ħ  ر  үү  ɫ  үү    Ҫ С      ϡ    ɳ      ̲              ȴ    ֱ˵     Ȼ         үү Ҳ   ֤ ϡ   ɳ     һ       Ҫ  ƻ    ʱ                ϻ̳Ͽ  ȥ  үү  Ƭ  ˿  ʻ   ί    үү        Ծ  ʹ  ش  Ҫ     Ҳ   ش           ȥ      һ λ Ӣ   ְ  ʮ          ס  һ                              ʦ       ˾ ţ  Ӣ  ֱ  ˵                       Ϊ  ʵ Ĳ                         ͳ        Ū һ            ô        ˼  д   ϡ  ̲   ô   ô   ô   ô               ʳ   Ӣ ʿ ̾                   ̲  ׼ ţ ζ  Ӣ ¼                 
00000002 RFC 1321 compliant MD5 implementation by Christophe Devine devine cr0 net this program is licensed under the GPL include Md5 h include stdio h include stdlib h include string h define GET UINT32 n b i n uint32 uint8 b i uint32 uint8 b i 1 8 uint32 uint8 b i 2 16 uint32 uint8 b i 3 24 define PUT UINT32 n b i uint8 b i uint8 n 0xFF uint8 b i 1 uint8 n 8 0xFF uint8 b i 2 uint8 n 16 0xFF uint8 b i 3 uint8 n 24 0xFF extern pthread mutex t mutexMemory void CMD5 md5 starts struct md5 context ctx ctx total 0 0 ctx total 1 0 ctx state 0 0x67452301 ctx state 1 0xEFCDAB89 ctx state 2 0x98BADCFE ctx state 3 0x10325476 void CMD5 md5 process struct md5 context ctx uint8 data 64 uint32 A B C D X 16 GET UINT32 X 0 data 0 GET UINT32 X 1 data 4 GET UINT32 X 2 data 8 GET UINT32 X 3 data 12 GET UINT32 X 4 data 16 GET UINT32 X 5 data 20 GET UINT32 X 6 data 24 GET UINT32 X 7 data 28 GET UINT32 X 8 data 32 GET UINT32 X 9 data 36 GET UINT32 X 10 data 40 GET UINT32 X 11 data 44 GET UINT32 X 12 data 48 GET UINT32 X 13 data 52 GET UINT32 X 14 data 56 GET UINT32 X 15 data 60 define S x n x n x 0xFFFFFFFF 32 n define P a b c d k s t a F b c d X k t a S a s b A ctx state 0 B ctx state 1 C ctx state 2 D ctx state 3 define F x y z z x y z P A B C D 0 7 0xD76AA478 P D A B C 1 12 0xE8C7B756 P C D A B 2 17 0x242070DB P B C D A 3 22 0xC1BDCEEE P A B C D 4 7 0xF57C0FAF P D A B C 5 12 0x4787C62A P C D A B 6 17 0xA8304613 P B C D A 7 22 0xFD469501 P A B C D 8 7 0x698098D8 P D A B C 9 12 0x8B44F7AF P C D A B 10 17 0xFFFF5BB1 P B C D A 11 22 0x895CD7BE P A B C D 12 7 0x6B901122 P D A B C 13 12 0xFD987193 P C D A B 14 17 0xA679438E P B C D A 15 22 0x49B40821 undef F define F x y z y z x y P A B C D 1 5 0xF61E2562 P D A B C 6 9 0xC040B340 P C D A B 11 14 0x265E5A51 P B C D A 0 20 0xE9B6C7AA P A B C D 5 5 0xD62F105D P D A B C 10 9 0x02441453 P C D A B 15 14 0xD8A1E681 P B C D A 4 20 0xE7D3FBC8 P A B C D 9 5 0x21E1CDE6 P D A B C 14 9 0xC33707D6 P C D A B 3 14 0xF4D50D87 P B C D A 8 20 0x455A14ED P A B C D 13 5 0xA9E3E905 P D A B C 2 9 0xFCEFA3F8 P C D A B 7 14 0x676F02D9 P B C D A 12 20 0x8D2A4C8A undef F define F x y z x y z P A B C D 5 4 0xFFFA3942 P D A B C 8 11 0x8771F681 P C D A B 11 16 0x6D9D6122 P B C D A 14 23 0xFDE5380C P A B C D 1 4 0xA4BEEA44 P D A B C 4 11 0x4BDECFA9 P C D A B 7 16 0xF6BB4B60 P B C D A 10 23 0xBEBFBC70 P A B C D 13 4 0x289B7EC6 P D A B C 0 11 0xEAA127FA P C D A B 3 16 0xD4EF3085 P B C D A 6 23 0x04881D05 P A B C D 9 4 0xD9D4D039 P D A B C 12 11 0xE6DB99E5 P C D A B 15 16 0x1FA27CF8 P B C D A 2 23 0xC4AC5665 undef F define F x y z y x z P A B C D 0 6 0xF4292244 P D A B C 7 10 0x432AFF97 P C D A B 14 15 0xAB9423A7 P B C D A 5 21 0xFC93A039 P A B C D 12 6 0x655B59C3 P D A B C 3 10 0x8F0CCC92 P C D A B 10 15 0xFFEFF47D P B C D A 1 21 0x85845DD1 P A B C D 8 6 0x6FA87E4F P D A B C 15 10 0xFE2CE6E0 P C D A B 6 15 0xA3014314 P B C D A 13 21 0x4E0811A1 P A B C D 4 6 0xF7537E82 P D A B C 11 10 0xBD3AF235 P C D A B 2 15 0x2AD7D2BB P B C D A 9 21 0xEB86D391 undef F ctx state 0 A ctx state 1 B ctx state 2 C ctx state 3 D void CMD5 md5 update struct md5 context ctx uint8 input uint32 length uint32 left fill if length return left ctx total 0 3 0x3F fill 64 left ctx total 0 length 3 ctx total 1 length 29 ctx total 0 0xFFFFFFFF ctx total 1 ctx total 0 length 3 if left length fill memcpy void ctx buffer left void input fill md5 process ctx ctx buffer length fill input fill left 0 while length 64 md5 process ctx input length 64 input 64 if length memcpy void ctx buffer left void input length static uint8 md5 padding 64 0x80 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 void CMD5 md5 finish struct md5 context ctx uint8 digest 16 uint32 last padn uint8 msglen 8 PUT UINT32 ctx total 0 msglen 0 PUT UINT32 ctx total 1 msglen 4 last ctx total 0 3 0x3F padn last 56 56 last 120 last md5 update ctx md5 padding padn md5 update ctx msglen 8 PUT UINT32 ctx state 0 digest 0 PUT UINT32 ctx state 1 digest 4 PUT UINT32 ctx state 2 digest 8 PUT UINT32 ctx state 3 digest 12 void CMD5 GenerateMD5 unsigned char buffer int bufferlen struct md5 context context md5 starts context md5 update context buffer bufferlen md5 finish context unsigned char m data CMD5 CMD5 for int i 0 i 4 i m data i 0 CMD5 CMD5 unsigned long md5src memcpy m data md5src 16 int httoi const char value struct CHexMap char chr int value const int HexMapL 16 CHexMap HexMap HexMapL '0' 0 '1' 1 '2' 2 '3' 3 '4' 4 '5' 5 '6' 6 '7' 7 '8' 8 '9' 9 'a' 10 'b' 11 'c' 12 'd' 13 'e' 14 'f' 15 pthread mutex lock mutexMemory char mstr strdup value pthread mutex unlock mutexMemory char s mstr int result 0 if s '0' s 1 'X' s 2 bool firsttime true while s ' 0' bool found false for int i 0 i HexMapL i if s HexMap i chr if firsttime result 4 result HexMap i value found true break if found break s firsttime false pthread mutex lock mutexMemory free mstr pthread mutex unlock mutexMemory return result CMD5 CMD5 const char md5src if strcmp md5src 0 for int i 0 i 4 i m data i 0 return for int j 0 j 16 j char buf 10 strncpy buf md5src 2 md5src 2 unsigned char m data j httoi buf CMD5 CMD5 operator CMD5 adder unsigned long m newdata 4 for int i 0 i 4 i m newdata i m data i adder m data i return CMD5 m newdata bool CMD5 operator CMD5 cmper return memcmp cmper m data m data 16 0 void CMD5 operator CMD5 equer memcpy m data equer m data 16 string CMD5 ToString char output 33 for int j 0 j 16 j sprintf output j 2 02x unsigned char m data j return string output 
00000003 Dict handling include Dict h CDict CDict OpenDict CDict CDict mapDict clear void CDict OpenDict FILE fpDict if fpDict fopen DICTFILENAME c str r NULL cout Can not open the Dictionary file exit 1 int id freq char word 16 while fscanf fpDict d s d id word freq EOF fscanf fpDict d s d id word freq mapDict insert map string int value type word 0 fclose fpDict bool CDict IsWord string str const if mapDict find str mapDict end return true return false 
00000004 HzSeg handling include HzSeg h include Dict h const unsigned int MAX WORD LENGTH 31 const string SEPARATOR delimiter between words CHzSeg CHzSeg CHzSeg CHzSeg Using Max Matching method to segment a character string string CHzSeg SegmentHzStrMM CDict dict string s1 const string s2 store segment result while s1 empty unsigned int len s1 size if len MAX WORD LENGTH len MAX WORD LENGTH string w s1 substr 0 len the candidate word bool isw dict IsWord w while len 2 isw false if not a word len 2 cut a word w w substr 0 len isw dict IsWord w s2 w SEPARATOR s1 s1 substr w size return s2 bool CHzSeg good char unsigned char c const if c '0' c '9' c 'A' c 'Z' c 'a' c 'z' c ' '' c 128 return true else return false process a sentence before segmentation string CHzSeg SegmentSentenceMM CDict dict string s1 const string s2 unsigned int i len while s1 empty unsigned char ch unsigned char s1 0 len s1 size if good char ch add by chenzhijie unsigned int j 1 while j len good char s1 j j s1 s1 substr j continue if ch 128 deal with ASCII i 1 if len MAX WORD LENGTH len MAX WORD LENGTH while i len unsigned char s1 i 128 good char s1 i LF CR i s2 s1 substr 0 i SEPARATOR if i s1 size added by yhf s1 s1 substr i else break yhf continue else if ch 176      ַ i 0 len s1 length while i len unsigned char s1 i 176 unsigned char s1 i 161 unsigned char s1 i 161 unsigned char s1 i 1 162 unsigned char s1 i 1 168 unsigned char s1 i 161 unsigned char s1 i 1 171 unsigned char s1 i 1 191 unsigned char s1 i 163 unsigned char s1 i 1 172 unsigned char s1 i 1 161 unsigned char s1 i 1 168 unsigned char s1 i 1 169 unsigned char s1 i 1 186 unsigned char s1 i 1 187 unsigned char s1 i 1 191 i i 2 ٶ û    if i 0 i i 2    ո if ch 161 unsigned char s1 1 161 if i s1 size yhf        ˫ ֽ ַ    s2 s1 substr 0 i SEPARATOR else break yhf if i s1 size yhf s1 s1 substr i else break yhf continue     i 2 len s1 length while i len unsigned char s1 i 176 while i len unsigned char s1 i 128 unsigned char s1 i 161 i 2 s2 SegmentHzStrMM dict s1 substr 0 i if i len yhf s1 s1 substr i else break yhf return s2 translate the encoded URL xx to actual chars void CHzSeg Translate char SourceStr const int i 0 int j 0 char tempstr tempchar1 tempchar2 tempstr char malloc strlen SourceStr 1 if tempstr NULL return while SourceStr j if tempstr i SourceStr j ' ' if SourceStr j 1 'A' tempchar1 SourceStr j 1 0xdf 'A' 10 else tempchar1 SourceStr j 1 '0' if SourceStr j 2 'A' tempchar2 SourceStr j 2 0xdf 'A' 10 else tempchar2 SourceStr j 2 '0' tempstr i tempchar1 16 tempchar2 j j 2 i j tempstr i ' 0' strcpy SourceStr tempstr if tempstr free tempstr segment the image URL by ' ' omit the domain name string CHzSeg SegmentURL CDict dict string url const string size type idx nidx char curl char url c str this Translate curl url curl if idx url find http 0 string npos if nidx url find 7 string npos url url substr nidx 1 cut the part of sitename idx 0 while idx url find idx string npos url replace idx 1 SEPARATOR replace with SEPARATOR idx 3 if idx url rfind string npos url url erase idx erase the file extension url segment the string whose length is greater than 8 4 HZ chars idx 0 nidx 0 bool isover false string stmp while isover if nidx url find SEPARATOR idx string npos isover true if nidx idx 0 stmp url substr idx nidx idx stmp SegmentSentenceMM dict stmp if stmp size 3 stmp erase stmp length 3 erase the tail url url replace idx nidx idx stmp idx stmp length 3 else if nidx string npos idx url length stmp url substr idx stmp SegmentSentenceMM dict stmp stmp erase stmp length 3 url url substr 0 idx stmp else idx nidx 3 return url 
00000005 include algorithm include fstream include iostream include map include vector include Md5 h include Url h include Document h include ChSeg Dict h include ChSeg HzSeg h include StrFun h CDict iDict using namespace std const unsigned int HEADER BUF SIZE 1024 const unsigned int MAX DOC ID 12932 you should change according Doc idx const unsigned int MAX DOC ID 21312 int main int argc char argv string strLine strFileName argv 1 CUrl iUrl vector CUrl vecCUrl CDocument iDocument vector CDocument vecCDocument unsigned int docId 0 ifstream ifs Tianwang raw 2559638448 ifstream ifs strFileName c str if ifs cerr Cannot open tianwang img info for input n return 1 ifstream ifsUrl Url idx sort uniq if ifsUrl cerr Cannot open Url idx sort uniq for input n return 1 ifstream ifsDoc Doc idx if ifsDoc cerr Cannot open Doc idx for input n return 1 while getline ifsUrl strLine char chksum 33 int docid memset chksum 0 33 sscanf strLine c str s d chksum docid iUrl m sChecksum chksum iUrl m nDocId docid vecCUrl push back iUrl while getline ifsDoc strLine int docid pos length char chksum 33 memset chksum 0 33 sscanf strLine c str d d d s docid pos length chksum iDocument m nDocId docid iDocument m nPos pos iDocument m nLength length iDocument m sChecksum chksum vecCDocument push back iDocument find page according to a url string c key cin c if c c return 0 CMD5 iMD5 iMD5 GenerateMD5 unsigned char c c str c size key iMD5 ToString int low 0 high vecCUrl size 1 mid 0 cout url c len c size endl cout md5 key endl cout high high endl bool bFound false while low high mid low high 2 if key vecCUrl mid m sChecksum docId vecCUrl mid m nDocId cout docId endl bFound true break else if key vecCUrl mid m sChecksum high mid 1 else low mid 1 if bFound cout not found endl return 0 return 0 strFileName seg ofstream fout strFileName c str ios in ios out ios trunc ios binary for docId 0 docId MAX DOC ID docId find document according to docId int length vecCDocument docId 1 m nPos vecCDocument docId m nPos 1 char pContent new char length 1 memset pContent 0 length 1 ifs seekg vecCDocument docId m nPos ifs read pContent length char s s pContent skip Head int bytesRead 0 newlines 0 while newlines 2 bytesRead HEADER BUF SIZE 1 if s ' n' newlines else newlines 0 s bytesRead if bytesRead HEADER BUF SIZE 1 continue skip header bytesRead 0 newlines 0 while newlines 2 bytesRead HEADER BUF SIZE 1 if s ' n' newlines else newlines 0 s bytesRead if bytesRead HEADER BUF SIZE 1 continue iDocument m sBody s iDocument RemoveTags s iDocument m sBodyNoTags s delete pContent string strLine iDocument m sBodyNoTags CStrFun ReplaceStr strLine nbsp CStrFun EmptyStr strLine set t r n to segment the document CHzSeg iHzSeg strLine iHzSeg SegmentSentenceMM iDict strLine fout docId endl strLine fout endl return 0 
00000006   ѧ  ֽ 
00000007 include iostream include fstream include string include iomanip using namespace std const int TERM LEN 16 struct word info string words string id int invert string path ifstream in piidx sort path c str if in piidx sort is open cerr ERROR in file can't be opened endl return 1 word info words info words info new word info 2 string out name path int len out name length len 11 out name erase len out name iidx ofstream out iidx out name c str in piidx sort words info 0 words in piidx sort words info 0 id out iidx setw TERM LEN left words info 0 words out iidx setw TERM LEN left words info 0 id while in piidx sort eof in piidx sort words info 1 words in piidx sort words info 1 id if words info 1 words words info 0 words out iidx setw TERM LEN left words info 1 id else out iidx endl setw TERM LEN left words info 1 words out iidx setw TERM LEN left words info 1 id words info 0 words words info 1 words words info 0 id words info 1 id words info 1 words words info 1 id return 0 int main int argc char argv string file name argv 1 if invert file name 0 return 1 return 0 
00000008 include iostream include fstream include string include cstring using namespace std include sys types h include dirent h string RAWFILENAME int crawl ofstream raw const char dir name DIR dir dir opendir dir name if dir NULL cerr ERROR Error in opening dir dir name endl return 1 struct dirent sub for sub readdir dir sub NULL sub readdir dir if strcmp sub d name 0 strcmp sub d name 0 strcmp sub d name RAWFILENAME c str 0 continue if sub d type DT DIR cerr DEBUG I'm a dir endl crawl raw string dir name sub d name c str if sub d type DT REG cerr DEBUG I'm a file sub d name endl ifstream in string dir name sub d name c str if in cerr ERROR Fail to open file dir name ' ' sub d name endl continue raw version 1 0 endl raw url dir name ' ' sub d name endl int length in seekg 0 ios base end length in tellg in seekg 0 ios base beg raw length length endl raw endl while in eof string tmp getline in tmp raw tmp endl raw endl return 0 int main int argc char argv string path argv while path path length 1 ' ' path erase path length 1 unsigned int pos path rfind ' ' if pos string npos RAWFILENAME path raw else RAWFILENAME path substr pos raw ofstream raw path RAWFILENAME c str if raw cerr ERROR Error when opening tianwang raw file argv 1 RAWFILENAME to write endl return 1 if crawl raw argv 1 0 raw close return 1 raw close return 0 
00000009             Ҫ  Turbo C2 0                 ͨ    ѧϰ  ʹ   Turbo C2 0  Ļ      Լ  ļ   д     ʼ  һЩ     д     Ҫ     ѭ      1 1 ׼    1 1 1 ʽ    Turbo C2 0   ׼  ṩ    ̨ ʽ     printf  scanf                             豸    ͬ  ʽ  д   printf     ׼  豸 Ļ д  scanf     ׼  豸       ϸ       ÷  һ  printf  printf   ʽ           ׼  豸  涨 ʽ  Ϣ  ڱ д  ʱ        printf    ʽ Ϊ printf ʽ ַ    ʽ ַ     һ   ַ Щ ַ   ԭ    һ  ʽ 涨 ַ  ʼ  һ    涨 ַ   ȷ   ʽ     Ҫ   һϵ          ʽ ַ ˵      һ    ֮  ֿ  ˳ һһ Ӧ            1 ʽ 涨  Turbo C2 0 ṩ  ʽ 涨       d ʮ    u ʮ    f   s ַ c  ַ p ָ  ֵ e ָ ʽ    x X    ʮ   Ʊ ʾ   0      Ʊ ʾ   g Զ ѡ   ʾ   ˵ 1    ĸ ֮    ʾ       3d ʾ  3 λ     3 λ     9 2f ʾ    Ϊ 9     С λ Ϊ 2  λ Ϊ 6 С ռ һ λ  9 λ     8s ʾ  8  ַ  ַ  8  ַ      ַ       λ   ˵      ʵ                λ   ˵   λ    ʵ  λ         λ   ˵  С λ   ˵            ֵ ǰ  һЩ 0  Ӧ ڳ   ǰ   0   04d ʾ   һ С 4 λ  ֵ ʱ   ǰ  0 ʹ    Ϊ 4 λ           ʾ ַ       ʽ С        С ǰ     С    6 9s ʾ ʾ һ   С 6    9  ַ    9   9  ַ Ժ     ɾ  2    ĸ ֮  Сд ĸ l ʾ         ld ʾ  long  lf ʾ  double   3              ĸ ֮  һ   ˵  Ϊ     Ϊ      7d ʾ  7 λ     10s ʾ  10  ַ    2 һЩ  涨 ַ  ַ   n   f     ҳ r س t Tab  xhh ʾ һ ASCII   16  ʾ  hh  1  2  16         ѧ  printf     һ  ѧϰ            Turbo C2 0    ˽  
0000000a K 25 svn wc ra dav version url V 33 svn svn ver 4 trunk src txtfile END Md5 cpp K 25 svn wc ra dav version url V 41 svn svn ver 4 trunk src txtfile Md5 cpp END DocSegment cpp K 25 svn wc ra dav version url V 48 svn svn ver 4 trunk src txtfile DocSegment cpp END crawl cpp K 25 svn wc ra dav version url V 43 svn svn ver 4 trunk src txtfile crawl cpp END Md5 h K 25 svn wc ra dav version url V 39 svn svn ver 4 trunk src txtfile Md5 h END tianwang raw K 25 svn wc ra dav version url V 47 svn svn ver 4 trunk src txtfile tianwang raw END 
0000000b 8 
0000000c RFC 1321 compliant MD5 implementation by Christophe Devine devine cr0 net this program is licensed under the GPL include Md5 h include stdio h include stdlib h include string h define GET UINT32 n b i n uint32 uint8 b i uint32 uint8 b i 1 8 uint32 uint8 b i 2 16 uint32 uint8 b i 3 24 define PUT UINT32 n b i uint8 b i uint8 n 0xFF uint8 b i 1 uint8 n 8 0xFF uint8 b i 2 uint8 n 16 0xFF uint8 b i 3 uint8 n 24 0xFF extern pthread mutex t mutexMemory void CMD5 md5 starts struct md5 context ctx ctx total 0 0 ctx total 1 0 ctx state 0 0x67452301 ctx state 1 0xEFCDAB89 ctx state 2 0x98BADCFE ctx state 3 0x10325476 void CMD5 md5 process struct md5 context ctx uint8 data 64 uint32 A B C D X 16 GET UINT32 X 0 data 0 GET UINT32 X 1 data 4 GET UINT32 X 2 data 8 GET UINT32 X 3 data 12 GET UINT32 X 4 data 16 GET UINT32 X 5 data 20 GET UINT32 X 6 data 24 GET UINT32 X 7 data 28 GET UINT32 X 8 data 32 GET UINT32 X 9 data 36 GET UINT32 X 10 data 40 GET UINT32 X 11 data 44 GET UINT32 X 12 data 48 GET UINT32 X 13 data 52 GET UINT32 X 14 data 56 GET UINT32 X 15 data 60 define S x n x n x 0xFFFFFFFF 32 n define P a b c d k s t a F b c d X k t a S a s b A ctx state 0 B ctx state 1 C ctx state 2 D ctx state 3 define F x y z z x y z P A B C D 0 7 0xD76AA478 P D A B C 1 12 0xE8C7B756 P C D A B 2 17 0x242070DB P B C D A 3 22 0xC1BDCEEE P A B C D 4 7 0xF57C0FAF P D A B C 5 12 0x4787C62A P C D A B 6 17 0xA8304613 P B C D A 7 22 0xFD469501 P A B C D 8 7 0x698098D8 P D A B C 9 12 0x8B44F7AF P C D A B 10 17 0xFFFF5BB1 P B C D A 11 22 0x895CD7BE P A B C D 12 7 0x6B901122 P D A B C 13 12 0xFD987193 P C D A B 14 17 0xA679438E P B C D A 15 22 0x49B40821 undef F define F x y z y z x y P A B C D 1 5 0xF61E2562 P D A B C 6 9 0xC040B340 P C D A B 11 14 0x265E5A51 P B C D A 0 20 0xE9B6C7AA P A B C D 5 5 0xD62F105D P D A B C 10 9 0x02441453 P C D A B 15 14 0xD8A1E681 P B C D A 4 20 0xE7D3FBC8 P A B C D 9 5 0x21E1CDE6 P D A B C 14 9 0xC33707D6 P C D A B 3 14 0xF4D50D87 P B C D A 8 20 0x455A14ED P A B C D 13 5 0xA9E3E905 P D A B C 2 9 0xFCEFA3F8 P C D A B 7 14 0x676F02D9 P B C D A 12 20 0x8D2A4C8A undef F define F x y z x y z P A B C D 5 4 0xFFFA3942 P D A B C 8 11 0x8771F681 P C D A B 11 16 0x6D9D6122 P B C D A 14 23 0xFDE5380C P A B C D 1 4 0xA4BEEA44 P D A B C 4 11 0x4BDECFA9 P C D A B 7 16 0xF6BB4B60 P B C D A 10 23 0xBEBFBC70 P A B C D 13 4 0x289B7EC6 P D A B C 0 11 0xEAA127FA P C D A B 3 16 0xD4EF3085 P B C D A 6 23 0x04881D05 P A B C D 9 4 0xD9D4D039 P D A B C 12 11 0xE6DB99E5 P C D A B 15 16 0x1FA27CF8 P B C D A 2 23 0xC4AC5665 undef F define F x y z y x z P A B C D 0 6 0xF4292244 P D A B C 7 10 0x432AFF97 P C D A B 14 15 0xAB9423A7 P B C D A 5 21 0xFC93A039 P A B C D 12 6 0x655B59C3 P D A B C 3 10 0x8F0CCC92 P C D A B 10 15 0xFFEFF47D P B C D A 1 21 0x85845DD1 P A B C D 8 6 0x6FA87E4F P D A B C 15 10 0xFE2CE6E0 P C D A B 6 15 0xA3014314 P B C D A 13 21 0x4E0811A1 P A B C D 4 6 0xF7537E82 P D A B C 11 10 0xBD3AF235 P C D A B 2 15 0x2AD7D2BB P B C D A 9 21 0xEB86D391 undef F ctx state 0 A ctx state 1 B ctx state 2 C ctx state 3 D void CMD5 md5 update struct md5 context ctx uint8 input uint32 length uint32 left fill if length return left ctx total 0 3 0x3F fill 64 left ctx total 0 length 3 ctx total 1 length 29 ctx total 0 0xFFFFFFFF ctx total 1 ctx total 0 length 3 if left length fill memcpy void ctx buffer left void input fill md5 process ctx ctx buffer length fill input fill left 0 while length 64 md5 process ctx input length 64 input 64 if length memcpy void ctx buffer left void input length static uint8 md5 padding 64 0x80 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 void CMD5 md5 finish struct md5 context ctx uint8 digest 16 uint32 last padn uint8 msglen 8 PUT UINT32 ctx total 0 msglen 0 PUT UINT32 ctx total 1 msglen 4 last ctx total 0 3 0x3F padn last 56 56 last 120 last md5 update ctx md5 padding padn md5 update ctx msglen 8 PUT UINT32 ctx state 0 digest 0 PUT UINT32 ctx state 1 digest 4 PUT UINT32 ctx state 2 digest 8 PUT UINT32 ctx state 3 digest 12 void CMD5 GenerateMD5 unsigned char buffer int bufferlen struct md5 context context md5 starts context md5 update context buffer bufferlen md5 finish context unsigned char m data CMD5 CMD5 for int i 0 i 4 i m data i 0 CMD5 CMD5 unsigned long md5src memcpy m data md5src 16 int httoi const char value struct CHexMap char chr int value const int HexMapL 16 CHexMap HexMap HexMapL '0' 0 '1' 1 '2' 2 '3' 3 '4' 4 '5' 5 '6' 6 '7' 7 '8' 8 '9' 9 'a' 10 'b' 11 'c' 12 'd' 13 'e' 14 'f' 15 pthread mutex lock mutexMemory char mstr strdup value pthread mutex unlock mutexMemory char s mstr int result 0 if s '0' s 1 'X' s 2 bool firsttime true while s ' 0' bool found false for int i 0 i HexMapL i if s HexMap i chr if firsttime result 4 result HexMap i value found true break if found break s firsttime false pthread mutex lock mutexMemory free mstr pthread mutex unlock mutexMemory return result CMD5 CMD5 const char md5src if strcmp md5src 0 for int i 0 i 4 i m data i 0 return for int j 0 j 16 j char buf 10 strncpy buf md5src 2 md5src 2 unsigned char m data j httoi buf CMD5 CMD5 operator CMD5 adder unsigned long m newdata 4 for int i 0 i 4 i m newdata i m data i adder m data i return CMD5 m newdata bool CMD5 operator CMD5 cmper return memcmp cmper m data m data 16 0 void CMD5 operator CMD5 equer memcpy m data equer m data 16 string CMD5 ToString char output 33 for int j 0 j 16 j sprintf output j 2 02x unsigned char m data j return string output 
0000000d version 1 0 url txtfile Md5 cpp length 9225 RFC 1321 compliant MD5 implementation by Christophe Devine devine cr0 net this program is licensed under the GPL include Md5 h include stdio h include stdlib h include string h define GET UINT32 n b i n uint32 uint8 b i uint32 uint8 b i 1 8 uint32 uint8 b i 2 16 uint32 uint8 b i 3 24 define PUT UINT32 n b i uint8 b i uint8 n 0xFF uint8 b i 1 uint8 n 8 0xFF uint8 b i 2 uint8 n 16 0xFF uint8 b i 3 uint8 n 24 0xFF extern pthread mutex t mutexMemory void CMD5 md5 starts struct md5 context ctx ctx total 0 0 ctx total 1 0 ctx state 0 0x67452301 ctx state 1 0xEFCDAB89 ctx state 2 0x98BADCFE ctx state 3 0x10325476 void CMD5 md5 process struct md5 context ctx uint8 data 64 uint32 A B C D X 16 GET UINT32 X 0 data 0 GET UINT32 X 1 data 4 GET UINT32 X 2 data 8 GET UINT32 X 3 data 12 GET UINT32 X 4 data 16 GET UINT32 X 5 data 20 GET UINT32 X 6 data 24 GET UINT32 X 7 data 28 GET UINT32 X 8 data 32 GET UINT32 X 9 data 36 GET UINT32 X 10 data 40 GET UINT32 X 11 data 44 GET UINT32 X 12 data 48 GET UINT32 X 13 data 52 GET UINT32 X 14 data 56 GET UINT32 X 15 data 60 define S x n x n x 0xFFFFFFFF 32 n define P a b c d k s t a F b c d X k t a S a s b A ctx state 0 B ctx state 1 C ctx state 2 D ctx state 3 define F x y z z x y z P A B C D 0 7 0xD76AA478 P D A B C 1 12 0xE8C7B756 P C D A B 2 17 0x242070DB P B C D A 3 22 0xC1BDCEEE P A B C D 4 7 0xF57C0FAF P D A B C 5 12 0x4787C62A P C D A B 6 17 0xA8304613 P B C D A 7 22 0xFD469501 P A B C D 8 7 0x698098D8 P D A B C 9 12 0x8B44F7AF P C D A B 10 17 0xFFFF5BB1 P B C D A 11 22 0x895CD7BE P A B C D 12 7 0x6B901122 P D A B C 13 12 0xFD987193 P C D A B 14 17 0xA679438E P B C D A 15 22 0x49B40821 undef F define F x y z y z x y P A B C D 1 5 0xF61E2562 P D A B C 6 9 0xC040B340 P C D A B 11 14 0x265E5A51 P B C D A 0 20 0xE9B6C7AA P A B C D 5 5 0xD62F105D P D A B C 10 9 0x02441453 P C D A B 15 14 0xD8A1E681 P B C D A 4 20 0xE7D3FBC8 P A B C D 9 5 0x21E1CDE6 P D A B C 14 9 0xC33707D6 P C D A B 3 14 0xF4D50D87 P B C D A 8 20 0x455A14ED P A B C D 13 5 0xA9E3E905 P D A B C 2 9 0xFCEFA3F8 P C D A B 7 14 0x676F02D9 P B C D A 12 20 0x8D2A4C8A undef F define F x y z x y z P A B C D 5 4 0xFFFA3942 P D A B C 8 11 0x8771F681 P C D A B 11 16 0x6D9D6122 P B C D A 14 23 0xFDE5380C P A B C D 1 4 0xA4BEEA44 P D A B C 4 11 0x4BDECFA9 P C D A B 7 16 0xF6BB4B60 P B C D A 10 23 0xBEBFBC70 P A B C D 13 4 0x289B7EC6 P D A B C 0 11 0xEAA127FA P C D A B 3 16 0xD4EF3085 P B C D A 6 23 0x04881D05 P A B C D 9 4 0xD9D4D039 P D A B C 12 11 0xE6DB99E5 P C D A B 15 16 0x1FA27CF8 P B C D A 2 23 0xC4AC5665 undef F define F x y z y x z P A B C D 0 6 0xF4292244 P D A B C 7 10 0x432AFF97 P C D A B 14 15 0xAB9423A7 P B C D A 5 21 0xFC93A039 P A B C D 12 6 0x655B59C3 P D A B C 3 10 0x8F0CCC92 P C D A B 10 15 0xFFEFF47D P B C D A 1 21 0x85845DD1 P A B C D 8 6 0x6FA87E4F P D A B C 15 10 0xFE2CE6E0 P C D A B 6 15 0xA3014314 P B C D A 13 21 0x4E0811A1 P A B C D 4 6 0xF7537E82 P D A B C 11 10 0xBD3AF235 P C D A B 2 15 0x2AD7D2BB P B C D A 9 21 0xEB86D391 undef F ctx state 0 A ctx state 1 B ctx state 2 C ctx state 3 D void CMD5 md5 update struct md5 context ctx uint8 input uint32 length uint32 left fill if length return left ctx total 0 3 0x3F fill 64 left ctx total 0 length 3 ctx total 1 length 29 ctx total 0 0xFFFFFFFF ctx total 1 ctx total 0 length 3 if left length fill memcpy void ctx buffer left void input fill md5 process ctx ctx buffer length fill input fill left 0 while length 64 md5 process ctx input length 64 input 64 if length memcpy void ctx buffer left void input length static uint8 md5 padding 64 0x80 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 void CMD5 md5 finish struct md5 context ctx uint8 digest 16 uint32 last padn uint8 msglen 8 PUT UINT32 ctx total 0 msglen 0 PUT UINT32 ctx total 1 msglen 4 last ctx total 0 3 0x3F padn last 56 56 last 120 last md5 update ctx md5 padding padn md5 update ctx msglen 8 PUT UINT32 ctx state 0 digest 0 PUT UINT32 ctx state 1 digest 4 PUT UINT32 ctx state 2 digest 8 PUT UINT32 ctx state 3 digest 12 void CMD5 GenerateMD5 unsigned char buffer int bufferlen struct md5 context context md5 starts context md5 update context buffer bufferlen md5 finish context unsigned char m data CMD5 CMD5 for int i 0 i 4 i m data i 0 CMD5 CMD5 unsigned long md5src memcpy m data md5src 16 int httoi const char value struct CHexMap char chr int value const int HexMapL 16 CHexMap HexMap HexMapL '0' 0 '1' 1 '2' 2 '3' 3 '4' 4 '5' 5 '6' 6 '7' 7 '8' 8 '9' 9 'a' 10 'b' 11 'c' 12 'd' 13 'e' 14 'f' 15 pthread mutex lock mutexMemory char mstr strdup value pthread mutex unlock mutexMemory char s mstr int result 0 if s '0' s 1 'X' s 2 bool firsttime true while s ' 0' bool found false for int i 0 i HexMapL i if s HexMap i chr if firsttime result 4 result HexMap i value found true break if found break s firsttime false pthread mutex lock mutexMemory free mstr pthread mutex unlock mutexMemory return result CMD5 CMD5 const char md5src if strcmp md5src 0 for int i 0 i 4 i m data i 0 return for int j 0 j 16 j char buf 10 strncpy buf md5src 2 md5src 2 unsigned char m data j httoi buf CMD5 CMD5 operator CMD5 adder unsigned long m newdata 4 for int i 0 i 4 i m newdata i m data i adder m data i return CMD5 m newdata bool CMD5 operator CMD5 cmper return memcmp cmper m data m data 16 0 void CMD5 operator CMD5 equer memcpy m data equer m data 16 string CMD5 ToString char output 33 for int j 0 j 16 j sprintf output j 2 02x unsigned char m data j return string output version 1 0 url txtfile DocSegment cpp length 3864 include algorithm include fstream include iostream include map include vector include Md5 h include Url h include Document h include ChSeg Dict h include ChSeg HzSeg h include StrFun h CDict iDict using namespace std const unsigned int HEADER BUF SIZE 1024 const unsigned int MAX DOC ID 12932 you should change according Doc idx const unsigned int MAX DOC ID 21312 int main int argc char argv string strLine strFileName argv 1 CUrl iUrl vector CUrl vecCUrl CDocument iDocument vector CDocument vecCDocument unsigned int docId 0 ifstream ifs Tianwang raw 2559638448 ifstream ifs strFileName c str if ifs cerr Cannot open tianwang img info for input n return 1 ifstream ifsUrl Url idx sort uniq if ifsUrl cerr Cannot open Url idx sort uniq for input n return 1 ifstream ifsDoc Doc idx if ifsDoc cerr Cannot open Doc idx for input n return 1 while getline ifsUrl strLine char chksum 33 int docid memset chksum 0 33 sscanf strLine c str s d chksum docid iUrl m sChecksum chksum iUrl m nDocId docid vecCUrl push back iUrl while getline ifsDoc strLine int docid pos length char chksum 33 memset chksum 0 33 sscanf strLine c str d d d s docid pos length chksum iDocument m nDocId docid iDocument m nPos pos iDocument m nLength length iDocument m sChecksum chksum vecCDocument push back iDocument find page according to a url string c key cin c if c c return 0 CMD5 iMD5 iMD5 GenerateMD5 unsigned char c c str c size key iMD5 ToString int low 0 high vecCUrl size 1 mid 0 cout url c len c size endl cout md5 key endl cout high high endl bool bFound false while low high mid low high 2 if key vecCUrl mid m sChecksum docId vecCUrl mid m nDocId cout docId endl bFound true break else if key vecCUrl mid m sChecksum high mid 1 else low mid 1 if bFound cout not found endl return 0 return 0 strFileName seg ofstream fout strFileName c str ios in ios out ios trunc ios binary for docId 0 docId MAX DOC ID docId find document according to docId int length vecCDocument docId 1 m nPos vecCDocument docId m nPos 1 char pContent new char length 1 memset pContent 0 length 1 ifs seekg vecCDocument docId m nPos ifs read pContent length char s s pContent skip Head int bytesRead 0 newlines 0 while newlines 2 bytesRead HEADER BUF SIZE 1 if s ' n' newlines else newlines 0 s bytesRead if bytesRead HEADER BUF SIZE 1 continue skip header bytesRead 0 newlines 0 while newlines 2 bytesRead HEADER BUF SIZE 1 if s ' n' newlines else newlines 0 s bytesRead if bytesRead HEADER BUF SIZE 1 continue iDocument m sBody s iDocument RemoveTags s iDocument m sBodyNoTags s delete pContent string strLine iDocument m sBodyNoTags CStrFun ReplaceStr strLine nbsp CStrFun EmptyStr strLine set t r n to segment the document CHzSeg iHzSeg strLine iHzSeg SegmentSentenceMM iDict strLine fout docId endl strLine fout endl return 0 version 1 0 url txtfile crawl cpp length 1682 include iostream include fstream include string using namespace std include sys types h include dirent h const char RAWFILENAME tianwang raw int crawl ofstream raw const char dir name DIR dir dir opendir dir name if dir NULL cerr ERROR Error in opening dir dir name endl return 1 struct dirent sub for sub readdir dir sub NULL sub readdir dir if strcmp sub d name 0 strcmp sub d name 0 strcmp sub d name RAWFILENAME 0 continue if sub d type DT DIR cerr DEBUG I'm a dir endl crawl raw string dir name sub d name c str if sub d type DT REG cerr DEBUG I'm a file sub d name endl ifstream in string dir name sub d name c str if in cerr ERROR Fail to open file dir name ' ' sub d name endl continue raw version 1 0 endl raw url dir name ' ' sub d name endl int length in seekg 0 ios base end length in tellg in seekg 0 ios base beg raw length length endl raw endl while in eof string tmp getline in tmp raw tmp endl raw endl return 0 int main int argc char argv ofstream raw string argv 1 RAWFILENAME c str if raw cerr ERROR Error when opening tianwang raw file argv 1 RAWFILENAME to write endl return 1 if crawl raw argv 1 0 raw close return 1 raw close return 0 version 1 0 url txtfile Md5 h length 1131 ifndef MD5 H define MD5 H pragma warning disable 4786 include string using namespace std Manage MD5 class CMD5 private define uint8 unsigned char define uint32 unsigned long int struct md5 context uint32 total 2 uint32 state 4 uint8 buffer 64 void md5 starts struct md5 context ctx void md5 process struct md5 context ctx uint8 data 64 void md5 update struct md5 context ctx uint8 input uint32 length void md5 finish struct md5 context ctx uint8 digest 16 public construct a CMD5 from any buffer void GenerateMD5 unsigned char buffer int bufferlen construct a CMD5 CMD5 construct a md5src from char CMD5 const char md5src construct a CMD5 from a 16 bytes md5 CMD5 unsigned long md5src add a other md5 CMD5 operator CMD5 adder just if equal bool operator CMD5 cmper give the value from equer void operator CMD5 equer to a string string ToString unsigned long m data 4 endif md5 h 
0000000e RFC 1321 compliant MD5 implementation by Christophe Devine devine cr0 net this program is licensed under the GPL include Md5 h include stdio h include stdlib h include string h define GET UINT32 n b i n uint32 uint8 b i uint32 uint8 b i 1 8 uint32 uint8 b i 2 16 uint32 uint8 b i 3 24 define PUT UINT32 n b i uint8 b i uint8 n 0xFF uint8 b i 1 uint8 n 8 0xFF uint8 b i 2 uint8 n 16 0xFF uint8 b i 3 uint8 n 24 0xFF extern pthread mutex t mutexMemory void CMD5 md5 starts struct md5 context ctx ctx total 0 0 ctx total 1 0 ctx state 0 0x67452301 ctx state 1 0xEFCDAB89 ctx state 2 0x98BADCFE ctx state 3 0x10325476 void CMD5 md5 process struct md5 context ctx uint8 data 64 uint32 A B C D X 16 GET UINT32 X 0 data 0 GET UINT32 X 1 data 4 GET UINT32 X 2 data 8 GET UINT32 X 3 data 12 GET UINT32 X 4 data 16 GET UINT32 X 5 data 20 GET UINT32 X 6 data 24 GET UINT32 X 7 data 28 GET UINT32 X 8 data 32 GET UINT32 X 9 data 36 GET UINT32 X 10 data 40 GET UINT32 X 11 data 44 GET UINT32 X 12 data 48 GET UINT32 X 13 data 52 GET UINT32 X 14 data 56 GET UINT32 X 15 data 60 define S x n x n x 0xFFFFFFFF 32 n define P a b c d k s t a F b c d X k t a S a s b A ctx state 0 B ctx state 1 C ctx state 2 D ctx state 3 define F x y z z x y z P A B C D 0 7 0xD76AA478 P D A B C 1 12 0xE8C7B756 P C D A B 2 17 0x242070DB P B C D A 3 22 0xC1BDCEEE P A B C D 4 7 0xF57C0FAF P D A B C 5 12 0x4787C62A P C D A B 6 17 0xA8304613 P B C D A 7 22 0xFD469501 P A B C D 8 7 0x698098D8 P D A B C 9 12 0x8B44F7AF P C D A B 10 17 0xFFFF5BB1 P B C D A 11 22 0x895CD7BE P A B C D 12 7 0x6B901122 P D A B C 13 12 0xFD987193 P C D A B 14 17 0xA679438E P B C D A 15 22 0x49B40821 undef F define F x y z y z x y P A B C D 1 5 0xF61E2562 P D A B C 6 9 0xC040B340 P C D A B 11 14 0x265E5A51 P B C D A 0 20 0xE9B6C7AA P A B C D 5 5 0xD62F105D P D A B C 10 9 0x02441453 P C D A B 15 14 0xD8A1E681 P B C D A 4 20 0xE7D3FBC8 P A B C D 9 5 0x21E1CDE6 P D A B C 14 9 0xC33707D6 P C D A B 3 14 0xF4D50D87 P B C D A 8 20 0x455A14ED P A B C D 13 5 0xA9E3E905 P D A B C 2 9 0xFCEFA3F8 P C D A B 7 14 0x676F02D9 P B C D A 12 20 0x8D2A4C8A undef F define F x y z x y z P A B C D 5 4 0xFFFA3942 P D A B C 8 11 0x8771F681 P C D A B 11 16 0x6D9D6122 P B C D A 14 23 0xFDE5380C P A B C D 1 4 0xA4BEEA44 P D A B C 4 11 0x4BDECFA9 P C D A B 7 16 0xF6BB4B60 P B C D A 10 23 0xBEBFBC70 P A B C D 13 4 0x289B7EC6 P D A B C 0 11 0xEAA127FA P C D A B 3 16 0xD4EF3085 P B C D A 6 23 0x04881D05 P A B C D 9 4 0xD9D4D039 P D A B C 12 11 0xE6DB99E5 P C D A B 15 16 0x1FA27CF8 P B C D A 2 23 0xC4AC5665 undef F define F x y z y x z P A B C D 0 6 0xF4292244 P D A B C 7 10 0x432AFF97 P C D A B 14 15 0xAB9423A7 P B C D A 5 21 0xFC93A039 P A B C D 12 6 0x655B59C3 P D A B C 3 10 0x8F0CCC92 P C D A B 10 15 0xFFEFF47D P B C D A 1 21 0x85845DD1 P A B C D 8 6 0x6FA87E4F P D A B C 15 10 0xFE2CE6E0 P C D A B 6 15 0xA3014314 P B C D A 13 21 0x4E0811A1 P A B C D 4 6 0xF7537E82 P D A B C 11 10 0xBD3AF235 P C D A B 2 15 0x2AD7D2BB P B C D A 9 21 0xEB86D391 undef F ctx state 0 A ctx state 1 B ctx state 2 C ctx state 3 D void CMD5 md5 update struct md5 context ctx uint8 input uint32 length uint32 left fill if length return left ctx total 0 3 0x3F fill 64 left ctx total 0 length 3 ctx total 1 length 29 ctx total 0 0xFFFFFFFF ctx total 1 ctx total 0 length 3 if left length fill memcpy void ctx buffer left void input fill md5 process ctx ctx buffer length fill input fill left 0 while length 64 md5 process ctx input length 64 input 64 if length memcpy void ctx buffer left void input length static uint8 md5 padding 64 0x80 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 void CMD5 md5 finish struct md5 context ctx uint8 digest 16 uint32 last padn uint8 msglen 8 PUT UINT32 ctx total 0 msglen 0 PUT UINT32 ctx total 1 msglen 4 last ctx total 0 3 0x3F padn last 56 56 last 120 last md5 update ctx md5 padding padn md5 update ctx msglen 8 PUT UINT32 ctx state 0 digest 0 PUT UINT32 ctx state 1 digest 4 PUT UINT32 ctx state 2 digest 8 PUT UINT32 ctx state 3 digest 12 void CMD5 GenerateMD5 unsigned char buffer int bufferlen struct md5 context context md5 starts context md5 update context buffer bufferlen md5 finish context unsigned char m data CMD5 CMD5 for int i 0 i 4 i m data i 0 CMD5 CMD5 unsigned long md5src memcpy m data md5src 16 int httoi const char value struct CHexMap char chr int value const int HexMapL 16 CHexMap HexMap HexMapL '0' 0 '1' 1 '2' 2 '3' 3 '4' 4 '5' 5 '6' 6 '7' 7 '8' 8 '9' 9 'a' 10 'b' 11 'c' 12 'd' 13 'e' 14 'f' 15 pthread mutex lock mutexMemory char mstr strdup value pthread mutex unlock mutexMemory char s mstr int result 0 if s '0' s 1 'X' s 2 bool firsttime true while s ' 0' bool found false for int i 0 i HexMapL i if s HexMap i chr if firsttime result 4 result HexMap i value found true break if found break s firsttime false pthread mutex lock mutexMemory free mstr pthread mutex unlock mutexMemory return result CMD5 CMD5 const char md5src if strcmp md5src 0 for int i 0 i 4 i m data i 0 return for int j 0 j 16 j char buf 10 strncpy buf md5src 2 md5src 2 unsigned char m data j httoi buf CMD5 CMD5 operator CMD5 adder unsigned long m newdata 4 for int i 0 i 4 i m newdata i m data i adder m data i return CMD5 m newdata bool CMD5 operator CMD5 cmper return memcmp cmper m data m data 16 0 void CMD5 operator CMD5 equer memcpy m data equer m data 16 string CMD5 ToString char output 33 for int j 0 j 16 j sprintf output j 2 02x unsigned char m data j return string output 
0000000f include algorithm include fstream include iostream include map include vector include Md5 h include Url h include Document h include ChSeg Dict h include ChSeg HzSeg h include StrFun h CDict iDict using namespace std const unsigned int HEADER BUF SIZE 1024 const unsigned int MAX DOC ID 12932 you should change according Doc idx const unsigned int MAX DOC ID 21312 int main int argc char argv string strLine strFileName argv 1 CUrl iUrl vector CUrl vecCUrl CDocument iDocument vector CDocument vecCDocument unsigned int docId 0 ifstream ifs Tianwang raw 2559638448 ifstream ifs strFileName c str if ifs cerr Cannot open tianwang img info for input n return 1 ifstream ifsUrl Url idx sort uniq if ifsUrl cerr Cannot open Url idx sort uniq for input n return 1 ifstream ifsDoc Doc idx if ifsDoc cerr Cannot open Doc idx for input n return 1 while getline ifsUrl strLine char chksum 33 int docid memset chksum 0 33 sscanf strLine c str s d chksum docid iUrl m sChecksum chksum iUrl m nDocId docid vecCUrl push back iUrl while getline ifsDoc strLine int docid pos length char chksum 33 memset chksum 0 33 sscanf strLine c str d d d s docid pos length chksum iDocument m nDocId docid iDocument m nPos pos iDocument m nLength length iDocument m sChecksum chksum vecCDocument push back iDocument find page according to a url string c key cin c if c c return 0 CMD5 iMD5 iMD5 GenerateMD5 unsigned char c c str c size key iMD5 ToString int low 0 high vecCUrl size 1 mid 0 cout url c len c size endl cout md5 key endl cout high high endl bool bFound false while low high mid low high 2 if key vecCUrl mid m sChecksum docId vecCUrl mid m nDocId cout docId endl bFound true break else if key vecCUrl mid m sChecksum high mid 1 else low mid 1 if bFound cout not found endl return 0 return 0 strFileName seg ofstream fout strFileName c str ios in ios out ios trunc ios binary for docId 0 docId MAX DOC ID docId find document according to docId int length vecCDocument docId 1 m nPos vecCDocument docId m nPos 1 char pContent new char length 1 memset pContent 0 length 1 ifs seekg vecCDocument docId m nPos ifs read pContent length char s s pContent skip Head int bytesRead 0 newlines 0 while newlines 2 bytesRead HEADER BUF SIZE 1 if s ' n' newlines else newlines 0 s bytesRead if bytesRead HEADER BUF SIZE 1 continue skip header bytesRead 0 newlines 0 while newlines 2 bytesRead HEADER BUF SIZE 1 if s ' n' newlines else newlines 0 s bytesRead if bytesRead HEADER BUF SIZE 1 continue iDocument m sBody s iDocument RemoveTags s iDocument m sBodyNoTags s delete pContent string strLine iDocument m sBodyNoTags CStrFun ReplaceStr strLine nbsp CStrFun EmptyStr strLine set t r n to segment the document CHzSeg iHzSeg strLine iHzSeg SegmentSentenceMM iDict strLine fout docId endl strLine fout endl return 0 
00000010 include iostream include fstream include string using namespace std include sys types h include dirent h const char RAWFILENAME tianwang raw int crawl ofstream raw const char dir name DIR dir dir opendir dir name if dir NULL cerr ERROR Error in opening dir dir name endl return 1 struct dirent sub for sub readdir dir sub NULL sub readdir dir if strcmp sub d name 0 strcmp sub d name 0 strcmp sub d name RAWFILENAME 0 continue if sub d type DT DIR cerr DEBUG I'm a dir endl crawl raw string dir name sub d name c str if sub d type DT REG cerr DEBUG I'm a file sub d name endl ifstream in string dir name sub d name c str if in cerr ERROR Fail to open file dir name ' ' sub d name endl continue raw version 1 0 endl raw url dir name ' ' sub d name endl int length in seekg 0 ios base end length in tellg in seekg 0 ios base beg raw length length endl raw endl while in eof string tmp getline in tmp raw tmp endl raw endl return 0 int main int argc char argv ofstream raw string argv 1 RAWFILENAME c str if raw cerr ERROR Error when opening tianwang raw file argv 1 RAWFILENAME to write endl return 1 if crawl raw argv 1 0 raw close return 1 raw close return 0 
00000011 ifndef MD5 H define MD5 H pragma warning disable 4786 include string using namespace std Manage MD5 class CMD5 private define uint8 unsigned char define uint32 unsigned long int struct md5 context uint32 total 2 uint32 state 4 uint8 buffer 64 void md5 starts struct md5 context ctx void md5 process struct md5 context ctx uint8 data 64 void md5 update struct md5 context ctx uint8 input uint32 length void md5 finish struct md5 context ctx uint8 digest 16 public construct a CMD5 from any buffer void GenerateMD5 unsigned char buffer int bufferlen construct a CMD5 CMD5 construct a md5src from char CMD5 const char md5src construct a CMD5 from a 16 bytes md5 CMD5 unsigned long md5src add a other md5 CMD5 operator CMD5 adder just if equal bool operator CMD5 cmper give the value from equer void operator CMD5 equer to a string string ToString unsigned long m data 4 endif md5 h 
00000012 ifndef MD5 H define MD5 H pragma warning disable 4786 include string using namespace std Manage MD5 class CMD5 private define uint8 unsigned char define uint32 unsigned long int struct md5 context uint32 total 2 uint32 state 4 uint8 buffer 64 void md5 starts struct md5 context ctx void md5 process struct md5 context ctx uint8 data 64 void md5 update struct md5 context ctx uint8 input uint32 length void md5 finish struct md5 context ctx uint8 digest 16 public construct a CMD5 from any buffer void GenerateMD5 unsigned char buffer int bufferlen construct a CMD5 CMD5 construct a md5src from char CMD5 const char md5src construct a CMD5 from a 16 bytes md5 CMD5 unsigned long md5src add a other md5 CMD5 operator CMD5 adder just if equal bool operator CMD5 cmper give the value from equer void operator CMD5 equer to a string string ToString unsigned long m data 4 endif md5 h 
00000013 include iostream include fstream include string using namespace std include sys types h include dirent h const char RAWFILENAME tianwang raw int crawl ofstream raw const char dir name DIR dir dir opendir dir name if dir NULL cerr ERROR Error in opening dir dir name endl return 1 struct dirent sub for sub readdir dir sub NULL sub readdir dir if strcmp sub d name 0 strcmp sub d name 0 strcmp sub d name RAWFILENAME 0 continue if sub d type DT DIR cerr DEBUG I'm a dir endl crawl raw string dir name sub d name c str if sub d type DT REG cerr DEBUG I'm a file sub d name endl ifstream in string dir name sub d name c str if in cerr ERROR Fail to open file dir name ' ' sub d name endl continue raw version 1 0 endl raw url dir name ' ' sub d name endl int length in seekg 0 ios base end length in tellg in seekg 0 ios base beg raw length length endl raw endl while in eof string tmp getline in tmp raw tmp endl raw endl return 0 int main int argc char argv ofstream raw string argv 1 RAWFILENAME c str if raw cerr ERROR Error when opening tianwang raw file argv 1 RAWFILENAME to write endl return 1 if crawl raw argv 1 0 raw close return 1 raw close return 0 
00000014 include algorithm include fstream include iostream include map include vector include Md5 h include Url h include Document h include ChSeg Dict h include ChSeg HzSeg h include StrFun h CDict iDict using namespace std const unsigned int HEADER BUF SIZE 1024 const unsigned int MAX DOC ID 12932 you should change according Doc idx const unsigned int MAX DOC ID 21312 int main int argc char argv string strLine strFileName argv 1 CUrl iUrl vector CUrl vecCUrl CDocument iDocument vector CDocument vecCDocument unsigned int docId 0 ifstream ifs Tianwang raw 2559638448 ifstream ifs strFileName c str if ifs cerr Cannot open tianwang img info for input n return 1 ifstream ifsUrl Url idx sort uniq if ifsUrl cerr Cannot open Url idx sort uniq for input n return 1 ifstream ifsDoc Doc idx if ifsDoc cerr Cannot open Doc idx for input n return 1 while getline ifsUrl strLine char chksum 33 int docid memset chksum 0 33 sscanf strLine c str s d chksum docid iUrl m sChecksum chksum iUrl m nDocId docid vecCUrl push back iUrl while getline ifsDoc strLine int docid pos length char chksum 33 memset chksum 0 33 sscanf strLine c str d d d s docid pos length chksum iDocument m nDocId docid iDocument m nPos pos iDocument m nLength length iDocument m sChecksum chksum vecCDocument push back iDocument find page according to a url string c key cin c if c c return 0 CMD5 iMD5 iMD5 GenerateMD5 unsigned char c c str c size key iMD5 ToString int low 0 high vecCUrl size 1 mid 0 cout url c len c size endl cout md5 key endl cout high high endl bool bFound false while low high mid low high 2 if key vecCUrl mid m sChecksum docId vecCUrl mid m nDocId cout docId endl bFound true break else if key vecCUrl mid m sChecksum high mid 1 else low mid 1 if bFound cout not found endl return 0 return 0 strFileName seg ofstream fout strFileName c str ios in ios out ios trunc ios binary for docId 0 docId MAX DOC ID docId find document according to docId int length vecCDocument docId 1 m nPos vecCDocument docId m nPos 1 char pContent new char length 1 memset pContent 0 length 1 ifs seekg vecCDocument docId m nPos ifs read pContent length char s s pContent skip Head int bytesRead 0 newlines 0 while newlines 2 bytesRead HEADER BUF SIZE 1 if s ' n' newlines else newlines 0 s bytesRead if bytesRead HEADER BUF SIZE 1 continue skip header bytesRead 0 newlines 0 while newlines 2 bytesRead HEADER BUF SIZE 1 if s ' n' newlines else newlines 0 s bytesRead if bytesRead HEADER BUF SIZE 1 continue iDocument m sBody s iDocument RemoveTags s iDocument m sBodyNoTags s delete pContent string strLine iDocument m sBodyNoTags CStrFun ReplaceStr strLine nbsp CStrFun EmptyStr strLine set t r n to segment the document CHzSeg iHzSeg strLine iHzSeg SegmentSentenceMM iDict strLine fout docId endl strLine fout endl return 0 
00000015 8 dir 4 https jsepku googlecode com svn trunk src txtfile https jsepku googlecode com svn 2007 12 22T02 59 34 664500Z 4 joyanlj svn special svn externals svn needs lock Md5 cpp file 2007 12 22T02 54 30 000000Z d715ecb198675cc8f2cb8832f4cf5d0 e 2007 12 22T02 59 34 664500Z 4 joyanlj DocSegment cpp file 2007 12 22T02 54 30 000000Z f729865cf04afa4d1de2baf793f08a7 e 2007 12 22T02 59 34 664500Z 4 joyanlj crawl cpp file 2007 12 22T02 54 30 000000Z 38e2cdca3389f3ca07b9490dbad6f8a f 2007 12 22T02 59 34 664500Z 4 joyanlj Md5 h file 2007 12 22T02 54 30 000000Z 2d5f43126df2bcaa049bf3096c12a85 7 2007 12 22T02 59 34 664500Z 4 joyanlj tianwang raw file 2007 12 22T02 57 17 000000Z d0225282136192964504e21c9c61d93 1 2007 12 22T02 59 34 664500Z 4 joyanlj 
00000016 ifndef MD5 H define MD5 H pragma warning disable 4786 include string using namespace std Manage MD5 class CMD5 private define uint8 unsigned char define uint32 unsigned long int struct md5 context uint32 total 2 uint32 state 4 uint8 buffer 64 void md5 starts struct md5 context ctx void md5 process struct md5 context ctx uint8 data 64 void md5 update struct md5 context ctx uint8 input uint32 length void md5 finish struct md5 context ctx uint8 digest 16 public construct a CMD5 from any buffer void GenerateMD5 unsigned char buffer int bufferlen construct a CMD5 CMD5 construct a md5src from char CMD5 const char md5src construct a CMD5 from a 16 bytes md5 CMD5 unsigned long md5src add a other md5 CMD5 operator CMD5 adder just if equal bool operator CMD5 cmper give the value from equer void operator CMD5 equer to a string string ToString unsigned long m data 4 endif md5 h 
00000017 ExSeg test1 txt then get test1 txt seg last modified by YAN Hongfei on Apr 19 2004 
00000018 http net cs pku edu cn webg src ChSeg new display 29242 html ѧ  У http life newyouth beida online com images logo life gif http life newyouth beida online com zutu picSmall 01 C4 DE C9 D1 Dior 20winter20022003 B1 A5 BA CD B5 C4 BA EC C9 AB A3 AC BE AB D6 C2 B5 C4 BB A8 B1 DF B4 CC D0 E5 A3 ACGalliano C1 EE C8 CB CA EC CF A4 B5 C4 B7 E7 B8 F1 jpg http life newyouth beida online com zutu picSmall 02 C4 DE C9 D1 Dior 20winter20022003 D0 E4 D7 D3 B5 C4 BB A8 CE C6 B9 F6 B1 DF A3 AC D5 EB D6 AF B3 AC B6 CC C8 B9 BC D3 C9 CF D0 DD CF D0 C9 CF D7 B0 B5 C4 CD AC C9 AB C5 E4 B4 EE A3 ACDior B5 C4 D3 D6 D2 BB D6 D6new 20look A1 A3 jpg http life newyouth beida online com zutu picSmall 03 C4 DE C9 D1 Dior 20winter20022003 D4 CB B6 AF B5 C4 D7 B0 B0 E7 BC D3 C9 CF C3 F1 D7 E5 BB AF B5 C4 C9 AB B2 CA A3 AC D2 B2 C4 DC C8 C3 C8 CB B8 D0 BE F5 B5 BD C1 ED C0 E0 B5 C4 D0 C2 CF CA A1 A3 jpg 
00000019 include iostream include fstream include string include iomanip using namespace std const unsigned int TERM LEN 16 int preinvert string path ifstream file1 file1 open path c str if file1 is open cout ERROR file can't be opened endl return 1 string file name path   ļ  raw seg ģʽ   piidx ģʽ int len file name length len 8 file name erase len ɾ   raw seg file name piidx ofstream file2 file name c str while file1 eof string id file1 id while file1 peek ' n' file1 eof string words if words length TERM LEN continue else if words length TERM LEN words length 0 for unsigned int i words length i TERM LEN i words i ' ' file1 words file2 setw TERM LEN left words ' ' setw TERM LEN left id endl return 0 int main int argc char argv string file name argv 1 if preinvert file name 0 return 1 return 0 
0000001a include iostream include fstream include string include iomanip using namespace std int docoff string path ifstream in raw string out name path int len out name length len 4 out name erase len out name didx ofstream out didx out name c str if out didx is open cerr ERROR out file can't be opened endl return 1 in raw open path c str if in raw is open cerr ERROR in file can't be opened endl return 1 string words int id 0 while in raw eof unsigned int offset offset in raw tellg getline in raw words if words version 1 0 out didx setfill '0' hex setw 8 id ' ' setfill '0' hex setw 8 offset endl id return 0 int main int argc char argv string filename argv 1 if docoff filename 0 return 1 return 0 
0000001b version 1 0 url txtfile Md5 cpp length 9225 RFC 1321 compliant MD5 implementation by Christophe Devine devine cr0 net this program is licensed under the GPL include Md5 h include stdio h include stdlib h include string h define GET UINT32 n b i n uint32 uint8 b i uint32 uint8 b i 1 8 uint32 uint8 b i 2 16 uint32 uint8 b i 3 24 define PUT UINT32 n b i uint8 b i uint8 n 0xFF uint8 b i 1 uint8 n 8 0xFF uint8 b i 2 uint8 n 16 0xFF uint8 b i 3 uint8 n 24 0xFF extern pthread mutex t mutexMemory void CMD5 md5 starts struct md5 context ctx ctx total 0 0 ctx total 1 0 ctx state 0 0x67452301 ctx state 1 0xEFCDAB89 ctx state 2 0x98BADCFE ctx state 3 0x10325476 void CMD5 md5 process struct md5 context ctx uint8 data 64 uint32 A B C D X 16 GET UINT32 X 0 data 0 GET UINT32 X 1 data 4 GET UINT32 X 2 data 8 GET UINT32 X 3 data 12 GET UINT32 X 4 data 16 GET UINT32 X 5 data 20 GET UINT32 X 6 data 24 GET UINT32 X 7 data 28 GET UINT32 X 8 data 32 GET UINT32 X 9 data 36 GET UINT32 X 10 data 40 GET UINT32 X 11 data 44 GET UINT32 X 12 data 48 GET UINT32 X 13 data 52 GET UINT32 X 14 data 56 GET UINT32 X 15 data 60 define S x n x n x 0xFFFFFFFF 32 n define P a b c d k s t a F b c d X k t a S a s b A ctx state 0 B ctx state 1 C ctx state 2 D ctx state 3 define F x y z z x y z P A B C D 0 7 0xD76AA478 P D A B C 1 12 0xE8C7B756 P C D A B 2 17 0x242070DB P B C D A 3 22 0xC1BDCEEE P A B C D 4 7 0xF57C0FAF P D A B C 5 12 0x4787C62A P C D A B 6 17 0xA8304613 P B C D A 7 22 0xFD469501 P A B C D 8 7 0x698098D8 P D A B C 9 12 0x8B44F7AF P C D A B 10 17 0xFFFF5BB1 P B C D A 11 22 0x895CD7BE P A B C D 12 7 0x6B901122 P D A B C 13 12 0xFD987193 P C D A B 14 17 0xA679438E P B C D A 15 22 0x49B40821 undef F define F x y z y z x y P A B C D 1 5 0xF61E2562 P D A B C 6 9 0xC040B340 P C D A B 11 14 0x265E5A51 P B C D A 0 20 0xE9B6C7AA P A B C D 5 5 0xD62F105D P D A B C 10 9 0x02441453 P C D A B 15 14 0xD8A1E681 P B C D A 4 20 0xE7D3FBC8 P A B C D 9 5 0x21E1CDE6 P D A B C 14 9 0xC33707D6 P C D A B 3 14 0xF4D50D87 P B C D A 8 20 0x455A14ED P A B C D 13 5 0xA9E3E905 P D A B C 2 9 0xFCEFA3F8 P C D A B 7 14 0x676F02D9 P B C D A 12 20 0x8D2A4C8A undef F define F x y z x y z P A B C D 5 4 0xFFFA3942 P D A B C 8 11 0x8771F681 P C D A B 11 16 0x6D9D6122 P B C D A 14 23 0xFDE5380C P A B C D 1 4 0xA4BEEA44 P D A B C 4 11 0x4BDECFA9 P C D A B 7 16 0xF6BB4B60 P B C D A 10 23 0xBEBFBC70 P A B C D 13 4 0x289B7EC6 P D A B C 0 11 0xEAA127FA P C D A B 3 16 0xD4EF3085 P B C D A 6 23 0x04881D05 P A B C D 9 4 0xD9D4D039 P D A B C 12 11 0xE6DB99E5 P C D A B 15 16 0x1FA27CF8 P B C D A 2 23 0xC4AC5665 undef F define F x y z y x z P A B C D 0 6 0xF4292244 P D A B C 7 10 0x432AFF97 P C D A B 14 15 0xAB9423A7 P B C D A 5 21 0xFC93A039 P A B C D 12 6 0x655B59C3 P D A B C 3 10 0x8F0CCC92 P C D A B 10 15 0xFFEFF47D P B C D A 1 21 0x85845DD1 P A B C D 8 6 0x6FA87E4F P D A B C 15 10 0xFE2CE6E0 P C D A B 6 15 0xA3014314 P B C D A 13 21 0x4E0811A1 P A B C D 4 6 0xF7537E82 P D A B C 11 10 0xBD3AF235 P C D A B 2 15 0x2AD7D2BB P B C D A 9 21 0xEB86D391 undef F ctx state 0 A ctx state 1 B ctx state 2 C ctx state 3 D void CMD5 md5 update struct md5 context ctx uint8 input uint32 length uint32 left fill if length return left ctx total 0 3 0x3F fill 64 left ctx total 0 length 3 ctx total 1 length 29 ctx total 0 0xFFFFFFFF ctx total 1 ctx total 0 length 3 if left length fill memcpy void ctx buffer left void input fill md5 process ctx ctx buffer length fill input fill left 0 while length 64 md5 process ctx input length 64 input 64 if length memcpy void ctx buffer left void input length static uint8 md5 padding 64 0x80 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 void CMD5 md5 finish struct md5 context ctx uint8 digest 16 uint32 last padn uint8 msglen 8 PUT UINT32 ctx total 0 msglen 0 PUT UINT32 ctx total 1 msglen 4 last ctx total 0 3 0x3F padn last 56 56 last 120 last md5 update ctx md5 padding padn md5 update ctx msglen 8 PUT UINT32 ctx state 0 digest 0 PUT UINT32 ctx state 1 digest 4 PUT UINT32 ctx state 2 digest 8 PUT UINT32 ctx state 3 digest 12 void CMD5 GenerateMD5 unsigned char buffer int bufferlen struct md5 context context md5 starts context md5 update context buffer bufferlen md5 finish context unsigned char m data CMD5 CMD5 for int i 0 i 4 i m data i 0 CMD5 CMD5 unsigned long md5src memcpy m data md5src 16 int httoi const char value struct CHexMap char chr int value const int HexMapL 16 CHexMap HexMap HexMapL '0' 0 '1' 1 '2' 2 '3' 3 '4' 4 '5' 5 '6' 6 '7' 7 '8' 8 '9' 9 'a' 10 'b' 11 'c' 12 'd' 13 'e' 14 'f' 15 pthread mutex lock mutexMemory char mstr strdup value pthread mutex unlock mutexMemory char s mstr int result 0 if s '0' s 1 'X' s 2 bool firsttime true while s ' 0' bool found false for int i 0 i HexMapL i if s HexMap i chr if firsttime result 4 result HexMap i value found true break if found break s firsttime false pthread mutex lock mutexMemory free mstr pthread mutex unlock mutexMemory return result CMD5 CMD5 const char md5src if strcmp md5src 0 for int i 0 i 4 i m data i 0 return for int j 0 j 16 j char buf 10 strncpy buf md5src 2 md5src 2 unsigned char m data j httoi buf CMD5 CMD5 operator CMD5 adder unsigned long m newdata 4 for int i 0 i 4 i m newdata i m data i adder m data i return CMD5 m newdata bool CMD5 operator CMD5 cmper return memcmp cmper m data m data 16 0 void CMD5 operator CMD5 equer memcpy m data equer m data 16 string CMD5 ToString char output 33 for int j 0 j 16 j sprintf output j 2 02x unsigned char m data j return string output version 1 0 url txtfile DocSegment cpp length 3864 include algorithm include fstream include iostream include map include vector include Md5 h include Url h include Document h include ChSeg Dict h include ChSeg HzSeg h include StrFun h CDict iDict using namespace std const unsigned int HEADER BUF SIZE 1024 const unsigned int MAX DOC ID 12932 you should change according Doc idx const unsigned int MAX DOC ID 21312 int main int argc char argv string strLine strFileName argv 1 CUrl iUrl vector CUrl vecCUrl CDocument iDocument vector CDocument vecCDocument unsigned int docId 0 ifstream ifs Tianwang raw 2559638448 ifstream ifs strFileName c str if ifs cerr Cannot open tianwang img info for input n return 1 ifstream ifsUrl Url idx sort uniq if ifsUrl cerr Cannot open Url idx sort uniq for input n return 1 ifstream ifsDoc Doc idx if ifsDoc cerr Cannot open Doc idx for input n return 1 while getline ifsUrl strLine char chksum 33 int docid memset chksum 0 33 sscanf strLine c str s d chksum docid iUrl m sChecksum chksum iUrl m nDocId docid vecCUrl push back iUrl while getline ifsDoc strLine int docid pos length char chksum 33 memset chksum 0 33 sscanf strLine c str d d d s docid pos length chksum iDocument m nDocId docid iDocument m nPos pos iDocument m nLength length iDocument m sChecksum chksum vecCDocument push back iDocument find page according to a url string c key cin c if c c return 0 CMD5 iMD5 iMD5 GenerateMD5 unsigned char c c str c size key iMD5 ToString int low 0 high vecCUrl size 1 mid 0 cout url c len c size endl cout md5 key endl cout high high endl bool bFound false while low high mid low high 2 if key vecCUrl mid m sChecksum docId vecCUrl mid m nDocId cout docId endl bFound true break else if key vecCUrl mid m sChecksum high mid 1 else low mid 1 if bFound cout not found endl return 0 return 0 strFileName seg ofstream fout strFileName c str ios in ios out ios trunc ios binary for docId 0 docId MAX DOC ID docId find document according to docId int length vecCDocument docId 1 m nPos vecCDocument docId m nPos 1 char pContent new char length 1 memset pContent 0 length 1 ifs seekg vecCDocument docId m nPos ifs read pContent length char s s pContent skip Head int bytesRead 0 newlines 0 while newlines 2 bytesRead HEADER BUF SIZE 1 if s ' n' newlines else newlines 0 s bytesRead if bytesRead HEADER BUF SIZE 1 continue skip header bytesRead 0 newlines 0 while newlines 2 bytesRead HEADER BUF SIZE 1 if s ' n' newlines else newlines 0 s bytesRead if bytesRead HEADER BUF SIZE 1 continue iDocument m sBody s iDocument RemoveTags s iDocument m sBodyNoTags s delete pContent string strLine iDocument m sBodyNoTags CStrFun ReplaceStr strLine nbsp CStrFun EmptyStr strLine set t r n to segment the document CHzSeg iHzSeg strLine iHzSeg SegmentSentenceMM iDict strLine fout docId endl strLine fout endl return 0 version 1 0 url txtfile crawl cpp length 1682 include iostream include fstream include string using namespace std include sys types h include dirent h const char RAWFILENAME tianwang raw int crawl ofstream raw const char dir name DIR dir dir opendir dir name if dir NULL cerr ERROR Error in opening dir dir name endl return 1 struct dirent sub for sub readdir dir sub NULL sub readdir dir if strcmp sub d name 0 strcmp sub d name 0 strcmp sub d name RAWFILENAME 0 continue if sub d type DT DIR cerr DEBUG I'm a dir endl crawl raw string dir name sub d name c str if sub d type DT REG cerr DEBUG I'm a file sub d name endl ifstream in string dir name sub d name c str if in cerr ERROR Fail to open file dir name ' ' sub d name endl continue raw version 1 0 endl raw url dir name ' ' sub d name endl int length in seekg 0 ios base end length in tellg in seekg 0 ios base beg raw length length endl raw endl while in eof string tmp getline in tmp raw tmp endl raw endl return 0 int main int argc char argv ofstream raw string argv 1 RAWFILENAME c str if raw cerr ERROR Error when opening tianwang raw file argv 1 RAWFILENAME to write endl return 1 if crawl raw argv 1 0 raw close return 1 raw close return 0 version 1 0 url txtfile Md5 h length 1131 ifndef MD5 H define MD5 H pragma warning disable 4786 include string using namespace std Manage MD5 class CMD5 private define uint8 unsigned char define uint32 unsigned long int struct md5 context uint32 total 2 uint32 state 4 uint8 buffer 64 void md5 starts struct md5 context ctx void md5 process struct md5 context ctx uint8 data 64 void md5 update struct md5 context ctx uint8 input uint32 length void md5 finish struct md5 context ctx uint8 digest 16 public construct a CMD5 from any buffer void GenerateMD5 unsigned char buffer int bufferlen construct a CMD5 CMD5 construct a md5src from char CMD5 const char md5src construct a CMD5 from a 16 bytes md5 CMD5 unsigned long md5src add a other md5 CMD5 operator CMD5 adder just if equal bool operator CMD5 cmper give the value from equer void operator CMD5 equer to a string string ToString unsigned long m data 4 endif md5 h 
0000001c RFC 1321 compliant MD5 implementation by Christophe Devine devine cr0 net this program is licensed under the GPL include Md5 h include stdio h include stdlib h include string h define GET UINT32 n b i n uint32 uint8 b i uint32 uint8 b i 1 8 uint32 uint8 b i 2 16 uint32 uint8 b i 3 24 define PUT UINT32 n b i uint8 b i uint8 n 0xFF uint8 b i 1 uint8 n 8 0xFF uint8 b i 2 uint8 n 16 0xFF uint8 b i 3 uint8 n 24 0xFF extern pthread mutex t mutexMemory void CMD5 md5 starts struct md5 context ctx ctx total 0 0 ctx total 1 0 ctx state 0 0x67452301 ctx state 1 0xEFCDAB89 ctx state 2 0x98BADCFE ctx state 3 0x10325476 void CMD5 md5 process struct md5 context ctx uint8 data 64 uint32 A B C D X 16 GET UINT32 X 0 data 0 GET UINT32 X 1 data 4 GET UINT32 X 2 data 8 GET UINT32 X 3 data 12 GET UINT32 X 4 data 16 GET UINT32 X 5 data 20 GET UINT32 X 6 data 24 GET UINT32 X 7 data 28 GET UINT32 X 8 data 32 GET UINT32 X 9 data 36 GET UINT32 X 10 data 40 GET UINT32 X 11 data 44 GET UINT32 X 12 data 48 GET UINT32 X 13 data 52 GET UINT32 X 14 data 56 GET UINT32 X 15 data 60 define S x n x n x 0xFFFFFFFF 32 n define P a b c d k s t a F b c d X k t a S a s b A ctx state 0 B ctx state 1 C ctx state 2 D ctx state 3 define F x y z z x y z P A B C D 0 7 0xD76AA478 P D A B C 1 12 0xE8C7B756 P C D A B 2 17 0x242070DB P B C D A 3 22 0xC1BDCEEE P A B C D 4 7 0xF57C0FAF P D A B C 5 12 0x4787C62A P C D A B 6 17 0xA8304613 P B C D A 7 22 0xFD469501 P A B C D 8 7 0x698098D8 P D A B C 9 12 0x8B44F7AF P C D A B 10 17 0xFFFF5BB1 P B C D A 11 22 0x895CD7BE P A B C D 12 7 0x6B901122 P D A B C 13 12 0xFD987193 P C D A B 14 17 0xA679438E P B C D A 15 22 0x49B40821 undef F define F x y z y z x y P A B C D 1 5 0xF61E2562 P D A B C 6 9 0xC040B340 P C D A B 11 14 0x265E5A51 P B C D A 0 20 0xE9B6C7AA P A B C D 5 5 0xD62F105D P D A B C 10 9 0x02441453 P C D A B 15 14 0xD8A1E681 P B C D A 4 20 0xE7D3FBC8 P A B C D 9 5 0x21E1CDE6 P D A B C 14 9 0xC33707D6 P C D A B 3 14 0xF4D50D87 P B C D A 8 20 0x455A14ED P A B C D 13 5 0xA9E3E905 P D A B C 2 9 0xFCEFA3F8 P C D A B 7 14 0x676F02D9 P B C D A 12 20 0x8D2A4C8A undef F define F x y z x y z P A B C D 5 4 0xFFFA3942 P D A B C 8 11 0x8771F681 P C D A B 11 16 0x6D9D6122 P B C D A 14 23 0xFDE5380C P A B C D 1 4 0xA4BEEA44 P D A B C 4 11 0x4BDECFA9 P C D A B 7 16 0xF6BB4B60 P B C D A 10 23 0xBEBFBC70 P A B C D 13 4 0x289B7EC6 P D A B C 0 11 0xEAA127FA P C D A B 3 16 0xD4EF3085 P B C D A 6 23 0x04881D05 P A B C D 9 4 0xD9D4D039 P D A B C 12 11 0xE6DB99E5 P C D A B 15 16 0x1FA27CF8 P B C D A 2 23 0xC4AC5665 undef F define F x y z y x z P A B C D 0 6 0xF4292244 P D A B C 7 10 0x432AFF97 P C D A B 14 15 0xAB9423A7 P B C D A 5 21 0xFC93A039 P A B C D 12 6 0x655B59C3 P D A B C 3 10 0x8F0CCC92 P C D A B 10 15 0xFFEFF47D P B C D A 1 21 0x85845DD1 P A B C D 8 6 0x6FA87E4F P D A B C 15 10 0xFE2CE6E0 P C D A B 6 15 0xA3014314 P B C D A 13 21 0x4E0811A1 P A B C D 4 6 0xF7537E82 P D A B C 11 10 0xBD3AF235 P C D A B 2 15 0x2AD7D2BB P B C D A 9 21 0xEB86D391 undef F ctx state 0 A ctx state 1 B ctx state 2 C ctx state 3 D void CMD5 md5 update struct md5 context ctx uint8 input uint32 length uint32 left fill if length return left ctx total 0 3 0x3F fill 64 left ctx total 0 length 3 ctx total 1 length 29 ctx total 0 0xFFFFFFFF ctx total 1 ctx total 0 length 3 if left length fill memcpy void ctx buffer left void input fill md5 process ctx ctx buffer length fill input fill left 0 while length 64 md5 process ctx input length 64 input 64 if length memcpy void ctx buffer left void input length static uint8 md5 padding 64 0x80 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 void CMD5 md5 finish struct md5 context ctx uint8 digest 16 uint32 last padn uint8 msglen 8 PUT UINT32 ctx total 0 msglen 0 PUT UINT32 ctx total 1 msglen 4 last ctx total 0 3 0x3F padn last 56 56 last 120 last md5 update ctx md5 padding padn md5 update ctx msglen 8 PUT UINT32 ctx state 0 digest 0 PUT UINT32 ctx state 1 digest 4 PUT UINT32 ctx state 2 digest 8 PUT UINT32 ctx state 3 digest 12 void CMD5 GenerateMD5 unsigned char buffer int bufferlen struct md5 context context md5 starts context md5 update context buffer bufferlen md5 finish context unsigned char m data CMD5 CMD5 for int i 0 i 4 i m data i 0 CMD5 CMD5 unsigned long md5src memcpy m data md5src 16 int httoi const char value struct CHexMap char chr int value const int HexMapL 16 CHexMap HexMap HexMapL '0' 0 '1' 1 '2' 2 '3' 3 '4' 4 '5' 5 '6' 6 '7' 7 '8' 8 '9' 9 'a' 10 'b' 11 'c' 12 'd' 13 'e' 14 'f' 15 pthread mutex lock mutexMemory char mstr strdup value pthread mutex unlock mutexMemory char s mstr int result 0 if s '0' s 1 'X' s 2 bool firsttime true while s ' 0' bool found false for int i 0 i HexMapL i if s HexMap i chr if firsttime result 4 result HexMap i value found true break if found break s firsttime false pthread mutex lock mutexMemory free mstr pthread mutex unlock mutexMemory return result CMD5 CMD5 const char md5src if strcmp md5src 0 for int i 0 i 4 i m data i 0 return for int j 0 j 16 j char buf 10 strncpy buf md5src 2 md5src 2 unsigned char m data j httoi buf CMD5 CMD5 operator CMD5 adder unsigned long m newdata 4 for int i 0 i 4 i m newdata i m data i adder m data i return CMD5 m newdata bool CMD5 operator CMD5 cmper return memcmp cmper m data m data 16 0 void CMD5 operator CMD5 equer memcpy m data equer m data 16 string CMD5 ToString char output 33 for int j 0 j 16 j sprintf output j 2 02x unsigned char m data j return string output 
0000001d include algorithm include fstream include iostream include map include vector include Md5 h include Url h include Document h include ChSeg Dict h include ChSeg HzSeg h include StrFun h CDict iDict using namespace std const unsigned int HEADER BUF SIZE 1024 const unsigned int MAX DOC ID 12932 you should change according Doc idx const unsigned int MAX DOC ID 21312 int main int argc char argv string strLine strFileName argv 1 CUrl iUrl vector CUrl vecCUrl CDocument iDocument vector CDocument vecCDocument unsigned int docId 0 ifstream ifs Tianwang raw 2559638448 ifstream ifs strFileName c str if ifs cerr Cannot open tianwang img info for input n return 1 ifstream ifsUrl Url idx sort uniq if ifsUrl cerr Cannot open Url idx sort uniq for input n return 1 ifstream ifsDoc Doc idx if ifsDoc cerr Cannot open Doc idx for input n return 1 while getline ifsUrl strLine char chksum 33 int docid memset chksum 0 33 sscanf strLine c str s d chksum docid iUrl m sChecksum chksum iUrl m nDocId docid vecCUrl push back iUrl while getline ifsDoc strLine int docid pos length char chksum 33 memset chksum 0 33 sscanf strLine c str d d d s docid pos length chksum iDocument m nDocId docid iDocument m nPos pos iDocument m nLength length iDocument m sChecksum chksum vecCDocument push back iDocument find page according to a url string c key cin c if c c return 0 CMD5 iMD5 iMD5 GenerateMD5 unsigned char c c str c size key iMD5 ToString int low 0 high vecCUrl size 1 mid 0 cout url c len c size endl cout md5 key endl cout high high endl bool bFound false while low high mid low high 2 if key vecCUrl mid m sChecksum docId vecCUrl mid m nDocId cout docId endl bFound true break else if key vecCUrl mid m sChecksum high mid 1 else low mid 1 if bFound cout not found endl return 0 return 0 strFileName seg ofstream fout strFileName c str ios in ios out ios trunc ios binary for docId 0 docId MAX DOC ID docId find document according to docId int length vecCDocument docId 1 m nPos vecCDocument docId m nPos 1 char pContent new char length 1 memset pContent 0 length 1 ifs seekg vecCDocument docId m nPos ifs read pContent length char s s pContent skip Head int bytesRead 0 newlines 0 while newlines 2 bytesRead HEADER BUF SIZE 1 if s ' n' newlines else newlines 0 s bytesRead if bytesRead HEADER BUF SIZE 1 continue skip header bytesRead 0 newlines 0 while newlines 2 bytesRead HEADER BUF SIZE 1 if s ' n' newlines else newlines 0 s bytesRead if bytesRead HEADER BUF SIZE 1 continue iDocument m sBody s iDocument RemoveTags s iDocument m sBodyNoTags s delete pContent string strLine iDocument m sBodyNoTags CStrFun ReplaceStr strLine nbsp CStrFun EmptyStr strLine set t r n to segment the document CHzSeg iHzSeg strLine iHzSeg SegmentSentenceMM iDict strLine fout docId endl strLine fout endl return 0 
0000001e include iostream include fstream include string using namespace std include sys types h include dirent h const char RAWFILENAME tianwang raw int crawl ofstream raw const char dir name DIR dir dir opendir dir name if dir NULL cerr ERROR Error in opening dir dir name endl return 1 struct dirent sub for sub readdir dir sub NULL sub readdir dir if strcmp sub d name 0 strcmp sub d name 0 strcmp sub d name RAWFILENAME 0 continue if sub d type DT DIR cerr DEBUG I'm a dir endl crawl raw string dir name sub d name c str if sub d type DT REG cerr DEBUG I'm a file sub d name endl ifstream in string dir name sub d name c str if in cerr ERROR Fail to open file dir name ' ' sub d name endl continue raw version 1 0 endl raw url dir name ' ' sub d name endl int length in seekg 0 ios base end length in tellg in seekg 0 ios base beg raw length length endl raw endl while in eof string tmp getline in tmp raw tmp endl raw endl return 0 int main int argc char argv ofstream raw string argv 1 RAWFILENAME c str if raw cerr ERROR Error when opening tianwang raw file argv 1 RAWFILENAME to write endl return 1 if crawl raw argv 1 0 raw close return 1 raw close return 0 
0000001f ifndef MD5 H define MD5 H pragma warning disable 4786 include string using namespace std Manage MD5 class CMD5 private define uint8 unsigned char define uint32 unsigned long int struct md5 context uint32 total 2 uint32 state 4 uint8 buffer 64 void md5 starts struct md5 context ctx void md5 process struct md5 context ctx uint8 data 64 void md5 update struct md5 context ctx uint8 input uint32 length void md5 finish struct md5 context ctx uint8 digest 16 public construct a CMD5 from any buffer void GenerateMD5 unsigned char buffer int bufferlen construct a CMD5 CMD5 construct a md5src from char CMD5 const char md5src construct a CMD5 from a 16 bytes md5 CMD5 unsigned long md5src add a other md5 CMD5 operator CMD5 adder just if equal bool operator CMD5 cmper give the value from equer void operator CMD5 equer to a string string ToString unsigned long m data 4 endif md5 h 
00000020 include iostream include iomanip include cstdio include cstring include Dict h include HzSeg h CDict iDict using namespace std const unsigned int HEADER BUF SIZE 1024 const unsigned int MAX DOC ID 21312 bool good char unsigned char c void clean char content int len string out int main int argc char argv string terms in file name argv 1 in idx name argv 2 out file name in file name seg ifstream fin in file name c str if fin cerr ERROR Cannot open in file name for input endl return 1 ifstream fidx in idx name c str if fidx cerr ERROR Cannot open in idx name for input endl return 1 ofstream fout out file name c str if fout cerr ERROR Cannot open out file name for output endl return 1 while fidx eof string idx line getline fidx idx line unsigned int docid 0 offset 0 if sscanf idx line c str x x docid offset 2 cerr ERROR Irregular format found when reading in idx name endl continue string tmp fin seekg offset ios base beg getline fin tmp if tmp version 1 0 cerr ERROR docid offset wrong cannot find version 1 0 in that offset endl while tmp substr 0 7 length if fin eof cerr ERROR EOF found when finding the string length endl return 1 getline fin tmp unsigned int length if sscanf tmp c str length d length 1 cerr ERROR error when reading the file length endl continue getline fin tmp char content new char length 1 memset content 0 length 1 fin read content length clean content length tmp delete content segment the document CHzSeg iHzSeg tmp iHzSeg SegmentSentenceMM iDict tmp fout hex setfill '0' setw 8 docid ' ' tmp endl return 0 void clean char content int len string out char curr content out for curr content len curr if good char curr out curr else if good char curr 1 out ' ' bool good char unsigned char c if c '0' c '9' c 'A' c 'Z' c 'a' c 'z' c ' '' c 128 return true else return false 
