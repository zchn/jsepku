00000000 RFC 1321 compliant MD5 implementation by Christophe Devine devine cr0 net this program is licensed under the GPL include Md5 h include stdio h include stdlib h include string h define GET UINT32 n b i n uint32 uint8 b i uint32 uint8 b i 1 8 uint32 uint8 b i 2 16 uint32 uint8 b i 3 24 define PUT UINT32 n b i uint8 b i uint8 n 0xFF uint8 b i 1 uint8 n 8 0xFF uint8 b i 2 uint8 n 16 0xFF uint8 b i 3 uint8 n 24 0xFF extern pthread mutex t mutexMemory void CMD5 md5 starts struct md5 context ctx ctx total 0 0 ctx total 1 0 ctx state 0 0x67452301 ctx state 1 0xEFCDAB89 ctx state 2 0x98BADCFE ctx state 3 0x10325476 void CMD5 md5 process struct md5 context ctx uint8 data 64 uint32 A B C D X 16 GET UINT32 X 0 data 0 GET UINT32 X 1 data 4 GET UINT32 X 2 data 8 GET UINT32 X 3 data 12 GET UINT32 X 4 data 16 GET UINT32 X 5 data 20 GET UINT32 X 6 data 24 GET UINT32 X 7 data 28 GET UINT32 X 8 data 32 GET UINT32 X 9 data 36 GET UINT32 X 10 data 40 GET UINT32 X 11 data 44 GET UINT32 X 12 data 48 GET UINT32 X 13 data 52 GET UINT32 X 14 data 56 GET UINT32 X 15 data 60 define S x n x n x 0xFFFFFFFF 32 n define P a b c d k s t a F b c d X k t a S a s b A ctx state 0 B ctx state 1 C ctx state 2 D ctx state 3 define F x y z z x y z P A B C D 0 7 0xD76AA478 P D A B C 1 12 0xE8C7B756 P C D A B 2 17 0x242070DB P B C D A 3 22 0xC1BDCEEE P A B C D 4 7 0xF57C0FAF P D A B C 5 12 0x4787C62A P C D A B 6 17 0xA8304613 P B C D A 7 22 0xFD469501 P A B C D 8 7 0x698098D8 P D A B C 9 12 0x8B44F7AF P C D A B 10 17 0xFFFF5BB1 P B C D A 11 22 0x895CD7BE P A B C D 12 7 0x6B901122 P D A B C 13 12 0xFD987193 P C D A B 14 17 0xA679438E P B C D A 15 22 0x49B40821 undef F define F x y z y z x y P A B C D 1 5 0xF61E2562 P D A B C 6 9 0xC040B340 P C D A B 11 14 0x265E5A51 P B C D A 0 20 0xE9B6C7AA P A B C D 5 5 0xD62F105D P D A B C 10 9 0x02441453 P C D A B 15 14 0xD8A1E681 P B C D A 4 20 0xE7D3FBC8 P A B C D 9 5 0x21E1CDE6 P D A B C 14 9 0xC33707D6 P C D A B 3 14 0xF4D50D87 P B C D A 8 20 0x455A14ED P A B C D 13 5 0xA9E3E905 P D A B C 2 9 0xFCEFA3F8 P C D A B 7 14 0x676F02D9 P B C D A 12 20 0x8D2A4C8A undef F define F x y z x y z P A B C D 5 4 0xFFFA3942 P D A B C 8 11 0x8771F681 P C D A B 11 16 0x6D9D6122 P B C D A 14 23 0xFDE5380C P A B C D 1 4 0xA4BEEA44 P D A B C 4 11 0x4BDECFA9 P C D A B 7 16 0xF6BB4B60 P B C D A 10 23 0xBEBFBC70 P A B C D 13 4 0x289B7EC6 P D A B C 0 11 0xEAA127FA P C D A B 3 16 0xD4EF3085 P B C D A 6 23 0x04881D05 P A B C D 9 4 0xD9D4D039 P D A B C 12 11 0xE6DB99E5 P C D A B 15 16 0x1FA27CF8 P B C D A 2 23 0xC4AC5665 undef F define F x y z y x z P A B C D 0 6 0xF4292244 P D A B C 7 10 0x432AFF97 P C D A B 14 15 0xAB9423A7 P B C D A 5 21 0xFC93A039 P A B C D 12 6 0x655B59C3 P D A B C 3 10 0x8F0CCC92 P C D A B 10 15 0xFFEFF47D P B C D A 1 21 0x85845DD1 P A B C D 8 6 0x6FA87E4F P D A B C 15 10 0xFE2CE6E0 P C D A B 6 15 0xA3014314 P B C D A 13 21 0x4E0811A1 P A B C D 4 6 0xF7537E82 P D A B C 11 10 0xBD3AF235 P C D A B 2 15 0x2AD7D2BB P B C D A 9 21 0xEB86D391 undef F ctx state 0 A ctx state 1 B ctx state 2 C ctx state 3 D void CMD5 md5 update struct md5 context ctx uint8 input uint32 length uint32 left fill if length return left ctx total 0 3 0x3F fill 64 left ctx total 0 length 3 ctx total 1 length 29 ctx total 0 0xFFFFFFFF ctx total 1 ctx total 0 length 3 if left length fill memcpy void ctx buffer left void input fill md5 process ctx ctx buffer length fill input fill left 0 while length 64 md5 process ctx input length 64 input 64 if length memcpy void ctx buffer left void input length static uint8 md5 padding 64 0x80 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 void CMD5 md5 finish struct md5 context ctx uint8 digest 16 uint32 last padn uint8 msglen 8 PUT UINT32 ctx total 0 msglen 0 PUT UINT32 ctx total 1 msglen 4 last ctx total 0 3 0x3F padn last 56 56 last 120 last md5 update ctx md5 padding padn md5 update ctx msglen 8 PUT UINT32 ctx state 0 digest 0 PUT UINT32 ctx state 1 digest 4 PUT UINT32 ctx state 2 digest 8 PUT UINT32 ctx state 3 digest 12 void CMD5 GenerateMD5 unsigned char buffer int bufferlen struct md5 context context md5 starts context md5 update context buffer bufferlen md5 finish context unsigned char m data CMD5 CMD5 for int i 0 i 4 i m data i 0 CMD5 CMD5 unsigned long md5src memcpy m data md5src 16 int httoi const char value struct CHexMap char chr int value const int HexMapL 16 CHexMap HexMap HexMapL '0' 0 '1' 1 '2' 2 '3' 3 '4' 4 '5' 5 '6' 6 '7' 7 '8' 8 '9' 9 'a' 10 'b' 11 'c' 12 'd' 13 'e' 14 'f' 15 pthread mutex lock mutexMemory char mstr strdup value pthread mutex unlock mutexMemory char s mstr int result 0 if s '0' s 1 'X' s 2 bool firsttime true while s ' 0' bool found false for int i 0 i HexMapL i if s HexMap i chr if firsttime result 4 result HexMap i value found true break if found break s firsttime false pthread mutex lock mutexMemory free mstr pthread mutex unlock mutexMemory return result CMD5 CMD5 const char md5src if strcmp md5src 0 for int i 0 i 4 i m data i 0 return for int j 0 j 16 j char buf 10 strncpy buf md5src 2 md5src 2 unsigned char m data j httoi buf CMD5 CMD5 operator CMD5 adder unsigned long m newdata 4 for int i 0 i 4 i m newdata i m data i adder m data i return CMD5 m newdata bool CMD5 operator CMD5 cmper return memcmp cmper m data m data 16 0 void CMD5 operator CMD5 equer memcpy m data equer m data 16 string CMD5 ToString char output 33 for int j 0 j 16 j sprintf output j 2 02x unsigned char m data j return string output 
00000001 include algorithm include fstream include iostream include map include vector include Md5 h include Url h include Document h include ChSeg Dict h include ChSeg HzSeg h include StrFun h CDict iDict using namespace std const unsigned int HEADER BUF SIZE 1024 const unsigned int MAX DOC ID 12932 you should change according Doc idx const unsigned int MAX DOC ID 21312 int main int argc char argv string strLine strFileName argv 1 CUrl iUrl vector CUrl vecCUrl CDocument iDocument vector CDocument vecCDocument unsigned int docId 0 ifstream ifs Tianwang raw 2559638448 ifstream ifs strFileName c str if ifs cerr Cannot open tianwang img info for input n return 1 ifstream ifsUrl Url idx sort uniq if ifsUrl cerr Cannot open Url idx sort uniq for input n return 1 ifstream ifsDoc Doc idx if ifsDoc cerr Cannot open Doc idx for input n return 1 while getline ifsUrl strLine char chksum 33 int docid memset chksum 0 33 sscanf strLine c str s d chksum docid iUrl m sChecksum chksum iUrl m nDocId docid vecCUrl push back iUrl while getline ifsDoc strLine int docid pos length char chksum 33 memset chksum 0 33 sscanf strLine c str d d d s docid pos length chksum iDocument m nDocId docid iDocument m nPos pos iDocument m nLength length iDocument m sChecksum chksum vecCDocument push back iDocument find page according to a url string c key cin c if c c return 0 CMD5 iMD5 iMD5 GenerateMD5 unsigned char c c str c size key iMD5 ToString int low 0 high vecCUrl size 1 mid 0 cout url c len c size endl cout md5 key endl cout high high endl bool bFound false while low high mid low high 2 if key vecCUrl mid m sChecksum docId vecCUrl mid m nDocId cout docId endl bFound true break else if key vecCUrl mid m sChecksum high mid 1 else low mid 1 if bFound cout not found endl return 0 return 0 strFileName seg ofstream fout strFileName c str ios in ios out ios trunc ios binary for docId 0 docId MAX DOC ID docId find document according to docId int length vecCDocument docId 1 m nPos vecCDocument docId m nPos 1 char pContent new char length 1 memset pContent 0 length 1 ifs seekg vecCDocument docId m nPos ifs read pContent length char s s pContent skip Head int bytesRead 0 newlines 0 while newlines 2 bytesRead HEADER BUF SIZE 1 if s ' n' newlines else newlines 0 s bytesRead if bytesRead HEADER BUF SIZE 1 continue skip header bytesRead 0 newlines 0 while newlines 2 bytesRead HEADER BUF SIZE 1 if s ' n' newlines else newlines 0 s bytesRead if bytesRead HEADER BUF SIZE 1 continue iDocument m sBody s iDocument RemoveTags s iDocument m sBodyNoTags s delete pContent string strLine iDocument m sBodyNoTags CStrFun ReplaceStr strLine nbsp CStrFun EmptyStr strLine set t r n to segment the document CHzSeg iHzSeg strLine iHzSeg SegmentSentenceMM iDict strLine fout docId endl strLine fout endl return 0 
00000002 RFC 1321 compliant MD5 implementation by Christophe Devine devine cr0 net this program is licensed under the GPL include Md5 h include stdio h include stdlib h include string h define GET UINT32 n b i n uint32 uint8 b i uint32 uint8 b i 1 8 uint32 uint8 b i 2 16 uint32 uint8 b i 3 24 define PUT UINT32 n b i uint8 b i uint8 n 0xFF uint8 b i 1 uint8 n 8 0xFF uint8 b i 2 uint8 n 16 0xFF uint8 b i 3 uint8 n 24 0xFF extern pthread mutex t mutexMemory void CMD5 md5 starts struct md5 context ctx ctx total 0 0 ctx total 1 0 ctx state 0 0x67452301 ctx state 1 0xEFCDAB89 ctx state 2 0x98BADCFE ctx state 3 0x10325476 void CMD5 md5 process struct md5 context ctx uint8 data 64 uint32 A B C D X 16 GET UINT32 X 0 data 0 GET UINT32 X 1 data 4 GET UINT32 X 2 data 8 GET UINT32 X 3 data 12 GET UINT32 X 4 data 16 GET UINT32 X 5 data 20 GET UINT32 X 6 data 24 GET UINT32 X 7 data 28 GET UINT32 X 8 data 32 GET UINT32 X 9 data 36 GET UINT32 X 10 data 40 GET UINT32 X 11 data 44 GET UINT32 X 12 data 48 GET UINT32 X 13 data 52 GET UINT32 X 14 data 56 GET UINT32 X 15 data 60 define S x n x n x 0xFFFFFFFF 32 n define P a b c d k s t a F b c d X k t a S a s b A ctx state 0 B ctx state 1 C ctx state 2 D ctx state 3 define F x y z z x y z P A B C D 0 7 0xD76AA478 P D A B C 1 12 0xE8C7B756 P C D A B 2 17 0x242070DB P B C D A 3 22 0xC1BDCEEE P A B C D 4 7 0xF57C0FAF P D A B C 5 12 0x4787C62A P C D A B 6 17 0xA8304613 P B C D A 7 22 0xFD469501 P A B C D 8 7 0x698098D8 P D A B C 9 12 0x8B44F7AF P C D A B 10 17 0xFFFF5BB1 P B C D A 11 22 0x895CD7BE P A B C D 12 7 0x6B901122 P D A B C 13 12 0xFD987193 P C D A B 14 17 0xA679438E P B C D A 15 22 0x49B40821 undef F define F x y z y z x y P A B C D 1 5 0xF61E2562 P D A B C 6 9 0xC040B340 P C D A B 11 14 0x265E5A51 P B C D A 0 20 0xE9B6C7AA P A B C D 5 5 0xD62F105D P D A B C 10 9 0x02441453 P C D A B 15 14 0xD8A1E681 P B C D A 4 20 0xE7D3FBC8 P A B C D 9 5 0x21E1CDE6 P D A B C 14 9 0xC33707D6 P C D A B 3 14 0xF4D50D87 P B C D A 8 20 0x455A14ED P A B C D 13 5 0xA9E3E905 P D A B C 2 9 0xFCEFA3F8 P C D A B 7 14 0x676F02D9 P B C D A 12 20 0x8D2A4C8A undef F define F x y z x y z P A B C D 5 4 0xFFFA3942 P D A B C 8 11 0x8771F681 P C D A B 11 16 0x6D9D6122 P B C D A 14 23 0xFDE5380C P A B C D 1 4 0xA4BEEA44 P D A B C 4 11 0x4BDECFA9 P C D A B 7 16 0xF6BB4B60 P B C D A 10 23 0xBEBFBC70 P A B C D 13 4 0x289B7EC6 P D A B C 0 11 0xEAA127FA P C D A B 3 16 0xD4EF3085 P B C D A 6 23 0x04881D05 P A B C D 9 4 0xD9D4D039 P D A B C 12 11 0xE6DB99E5 P C D A B 15 16 0x1FA27CF8 P B C D A 2 23 0xC4AC5665 undef F define F x y z y x z P A B C D 0 6 0xF4292244 P D A B C 7 10 0x432AFF97 P C D A B 14 15 0xAB9423A7 P B C D A 5 21 0xFC93A039 P A B C D 12 6 0x655B59C3 P D A B C 3 10 0x8F0CCC92 P C D A B 10 15 0xFFEFF47D P B C D A 1 21 0x85845DD1 P A B C D 8 6 0x6FA87E4F P D A B C 15 10 0xFE2CE6E0 P C D A B 6 15 0xA3014314 P B C D A 13 21 0x4E0811A1 P A B C D 4 6 0xF7537E82 P D A B C 11 10 0xBD3AF235 P C D A B 2 15 0x2AD7D2BB P B C D A 9 21 0xEB86D391 undef F ctx state 0 A ctx state 1 B ctx state 2 C ctx state 3 D void CMD5 md5 update struct md5 context ctx uint8 input uint32 length uint32 left fill if length return left ctx total 0 3 0x3F fill 64 left ctx total 0 length 3 ctx total 1 length 29 ctx total 0 0xFFFFFFFF ctx total 1 ctx total 0 length 3 if left length fill memcpy void ctx buffer left void input fill md5 process ctx ctx buffer length fill input fill left 0 while length 64 md5 process ctx input length 64 input 64 if length memcpy void ctx buffer left void input length static uint8 md5 padding 64 0x80 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 void CMD5 md5 finish struct md5 context ctx uint8 digest 16 uint32 last padn uint8 msglen 8 PUT UINT32 ctx total 0 msglen 0 PUT UINT32 ctx total 1 msglen 4 last ctx total 0 3 0x3F padn last 56 56 last 120 last md5 update ctx md5 padding padn md5 update ctx msglen 8 PUT UINT32 ctx state 0 digest 0 PUT UINT32 ctx state 1 digest 4 PUT UINT32 ctx state 2 digest 8 PUT UINT32 ctx state 3 digest 12 void CMD5 GenerateMD5 unsigned char buffer int bufferlen struct md5 context context md5 starts context md5 update context buffer bufferlen md5 finish context unsigned char m data CMD5 CMD5 for int i 0 i 4 i m data i 0 CMD5 CMD5 unsigned long md5src memcpy m data md5src 16 int httoi const char value struct CHexMap char chr int value const int HexMapL 16 CHexMap HexMap HexMapL '0' 0 '1' 1 '2' 2 '3' 3 '4' 4 '5' 5 '6' 6 '7' 7 '8' 8 '9' 9 'a' 10 'b' 11 'c' 12 'd' 13 'e' 14 'f' 15 pthread mutex lock mutexMemory char mstr strdup value pthread mutex unlock mutexMemory char s mstr int result 0 if s '0' s 1 'X' s 2 bool firsttime true while s ' 0' bool found false for int i 0 i HexMapL i if s HexMap i chr if firsttime result 4 result HexMap i value found true break if found break s firsttime false pthread mutex lock mutexMemory free mstr pthread mutex unlock mutexMemory return result CMD5 CMD5 const char md5src if strcmp md5src 0 for int i 0 i 4 i m data i 0 return for int j 0 j 16 j char buf 10 strncpy buf md5src 2 md5src 2 unsigned char m data j httoi buf CMD5 CMD5 operator CMD5 adder unsigned long m newdata 4 for int i 0 i 4 i m newdata i m data i adder m data i return CMD5 m newdata bool CMD5 operator CMD5 cmper return memcmp cmper m data m data 16 0 void CMD5 operator CMD5 equer memcpy m data equer m data 16 string CMD5 ToString char output 33 for int j 0 j 16 j sprintf output j 2 02x unsigned char m data j return string output 
00000003 include algorithm include fstream include iostream include map include vector include Md5 h include Url h include Document h include ChSeg Dict h include ChSeg HzSeg h include StrFun h CDict iDict using namespace std const unsigned int HEADER BUF SIZE 1024 const unsigned int MAX DOC ID 12932 you should change according Doc idx const unsigned int MAX DOC ID 21312 int main int argc char argv string strLine strFileName argv 1 CUrl iUrl vector CUrl vecCUrl CDocument iDocument vector CDocument vecCDocument unsigned int docId 0 ifstream ifs Tianwang raw 2559638448 ifstream ifs strFileName c str if ifs cerr Cannot open tianwang img info for input n return 1 ifstream ifsUrl Url idx sort uniq if ifsUrl cerr Cannot open Url idx sort uniq for input n return 1 ifstream ifsDoc Doc idx if ifsDoc cerr Cannot open Doc idx for input n return 1 while getline ifsUrl strLine char chksum 33 int docid memset chksum 0 33 sscanf strLine c str s d chksum docid iUrl m sChecksum chksum iUrl m nDocId docid vecCUrl push back iUrl while getline ifsDoc strLine int docid pos length char chksum 33 memset chksum 0 33 sscanf strLine c str d d d s docid pos length chksum iDocument m nDocId docid iDocument m nPos pos iDocument m nLength length iDocument m sChecksum chksum vecCDocument push back iDocument find page according to a url string c key cin c if c c return 0 CMD5 iMD5 iMD5 GenerateMD5 unsigned char c c str c size key iMD5 ToString int low 0 high vecCUrl size 1 mid 0 cout url c len c size endl cout md5 key endl cout high high endl bool bFound false while low high mid low high 2 if key vecCUrl mid m sChecksum docId vecCUrl mid m nDocId cout docId endl bFound true break else if key vecCUrl mid m sChecksum high mid 1 else low mid 1 if bFound cout not found endl return 0 return 0 strFileName seg ofstream fout strFileName c str ios in ios out ios trunc ios binary for docId 0 docId MAX DOC ID docId find document according to docId int length vecCDocument docId 1 m nPos vecCDocument docId m nPos 1 char pContent new char length 1 memset pContent 0 length 1 ifs seekg vecCDocument docId m nPos ifs read pContent length char s s pContent skip Head int bytesRead 0 newlines 0 while newlines 2 bytesRead HEADER BUF SIZE 1 if s ' n' newlines else newlines 0 s bytesRead if bytesRead HEADER BUF SIZE 1 continue skip header bytesRead 0 newlines 0 while newlines 2 bytesRead HEADER BUF SIZE 1 if s ' n' newlines else newlines 0 s bytesRead if bytesRead HEADER BUF SIZE 1 continue iDocument m sBody s iDocument RemoveTags s iDocument m sBodyNoTags s delete pContent string strLine iDocument m sBodyNoTags CStrFun ReplaceStr strLine nbsp CStrFun EmptyStr strLine set t r n to segment the document CHzSeg iHzSeg strLine iHzSeg SegmentSentenceMM iDict strLine fout docId endl strLine fout endl return 0 
00000004 include iostream include fstream include string using namespace std include sys types h include dirent h const char RAWFILENAME tianwang raw int crawl ofstream raw const char dir name DIR dir dir opendir dir name if dir NULL cerr ERROR Error in opening dir dir name endl return 1 struct dirent sub for sub readdir dir sub NULL sub readdir dir if strcmp sub d name 0 strcmp sub d name 0 strcmp sub d name RAWFILENAME 0 continue if sub d type DT DIR cerr DEBUG I'm a dir endl crawl raw string dir name sub d name c str if sub d type DT REG cerr DEBUG I'm a file sub d name endl ifstream in string dir name sub d name c str if in cerr ERROR Fail to open file dir name ' ' sub d name endl continue raw version 1 0 endl raw url dir name ' ' sub d name endl int length in seekg 0 ios base end length in tellg in seekg 0 ios base beg raw length length endl raw endl while in eof string tmp getline in tmp raw tmp endl raw endl return 0 int main int argc char argv ofstream raw string argv 1 RAWFILENAME c str if raw cerr ERROR Error when opening tianwang raw file argv 1 RAWFILENAME to write endl return 1 if crawl raw argv 1 0 raw close return 1 raw close return 0 
00000005 ifndef MD5 H define MD5 H pragma warning disable 4786 include string using namespace std Manage MD5 class CMD5 private define uint8 unsigned char define uint32 unsigned long int struct md5 context uint32 total 2 uint32 state 4 uint8 buffer 64 void md5 starts struct md5 context ctx void md5 process struct md5 context ctx uint8 data 64 void md5 update struct md5 context ctx uint8 input uint32 length void md5 finish struct md5 context ctx uint8 digest 16 public construct a CMD5 from any buffer void GenerateMD5 unsigned char buffer int bufferlen construct a CMD5 CMD5 construct a md5src from char CMD5 const char md5src construct a CMD5 from a 16 bytes md5 CMD5 unsigned long md5src add a other md5 CMD5 operator CMD5 adder just if equal bool operator CMD5 cmper give the value from equer void operator CMD5 equer to a string string ToString unsigned long m data 4 endif md5 h 
00000006 version 1 0 url txtfile Md5 cpp length 9225 RFC 1321 compliant MD5 implementation by Christophe Devine devine cr0 net this program is licensed under the GPL include Md5 h include stdio h include stdlib h include string h define GET UINT32 n b i n uint32 uint8 b i uint32 uint8 b i 1 8 uint32 uint8 b i 2 16 uint32 uint8 b i 3 24 define PUT UINT32 n b i uint8 b i uint8 n 0xFF uint8 b i 1 uint8 n 8 0xFF uint8 b i 2 uint8 n 16 0xFF uint8 b i 3 uint8 n 24 0xFF extern pthread mutex t mutexMemory void CMD5 md5 starts struct md5 context ctx ctx total 0 0 ctx total 1 0 ctx state 0 0x67452301 ctx state 1 0xEFCDAB89 ctx state 2 0x98BADCFE ctx state 3 0x10325476 void CMD5 md5 process struct md5 context ctx uint8 data 64 uint32 A B C D X 16 GET UINT32 X 0 data 0 GET UINT32 X 1 data 4 GET UINT32 X 2 data 8 GET UINT32 X 3 data 12 GET UINT32 X 4 data 16 GET UINT32 X 5 data 20 GET UINT32 X 6 data 24 GET UINT32 X 7 data 28 GET UINT32 X 8 data 32 GET UINT32 X 9 data 36 GET UINT32 X 10 data 40 GET UINT32 X 11 data 44 GET UINT32 X 12 data 48 GET UINT32 X 13 data 52 GET UINT32 X 14 data 56 GET UINT32 X 15 data 60 define S x n x n x 0xFFFFFFFF 32 n define P a b c d k s t a F b c d X k t a S a s b A ctx state 0 B ctx state 1 C ctx state 2 D ctx state 3 define F x y z z x y z P A B C D 0 7 0xD76AA478 P D A B C 1 12 0xE8C7B756 P C D A B 2 17 0x242070DB P B C D A 3 22 0xC1BDCEEE P A B C D 4 7 0xF57C0FAF P D A B C 5 12 0x4787C62A P C D A B 6 17 0xA8304613 P B C D A 7 22 0xFD469501 P A B C D 8 7 0x698098D8 P D A B C 9 12 0x8B44F7AF P C D A B 10 17 0xFFFF5BB1 P B C D A 11 22 0x895CD7BE P A B C D 12 7 0x6B901122 P D A B C 13 12 0xFD987193 P C D A B 14 17 0xA679438E P B C D A 15 22 0x49B40821 undef F define F x y z y z x y P A B C D 1 5 0xF61E2562 P D A B C 6 9 0xC040B340 P C D A B 11 14 0x265E5A51 P B C D A 0 20 0xE9B6C7AA P A B C D 5 5 0xD62F105D P D A B C 10 9 0x02441453 P C D A B 15 14 0xD8A1E681 P B C D A 4 20 0xE7D3FBC8 P A B C D 9 5 0x21E1CDE6 P D A B C 14 9 0xC33707D6 P C D A B 3 14 0xF4D50D87 P B C D A 8 20 0x455A14ED P A B C D 13 5 0xA9E3E905 P D A B C 2 9 0xFCEFA3F8 P C D A B 7 14 0x676F02D9 P B C D A 12 20 0x8D2A4C8A undef F define F x y z x y z P A B C D 5 4 0xFFFA3942 P D A B C 8 11 0x8771F681 P C D A B 11 16 0x6D9D6122 P B C D A 14 23 0xFDE5380C P A B C D 1 4 0xA4BEEA44 P D A B C 4 11 0x4BDECFA9 P C D A B 7 16 0xF6BB4B60 P B C D A 10 23 0xBEBFBC70 P A B C D 13 4 0x289B7EC6 P D A B C 0 11 0xEAA127FA P C D A B 3 16 0xD4EF3085 P B C D A 6 23 0x04881D05 P A B C D 9 4 0xD9D4D039 P D A B C 12 11 0xE6DB99E5 P C D A B 15 16 0x1FA27CF8 P B C D A 2 23 0xC4AC5665 undef F define F x y z y x z P A B C D 0 6 0xF4292244 P D A B C 7 10 0x432AFF97 P C D A B 14 15 0xAB9423A7 P B C D A 5 21 0xFC93A039 P A B C D 12 6 0x655B59C3 P D A B C 3 10 0x8F0CCC92 P C D A B 10 15 0xFFEFF47D P B C D A 1 21 0x85845DD1 P A B C D 8 6 0x6FA87E4F P D A B C 15 10 0xFE2CE6E0 P C D A B 6 15 0xA3014314 P B C D A 13 21 0x4E0811A1 P A B C D 4 6 0xF7537E82 P D A B C 11 10 0xBD3AF235 P C D A B 2 15 0x2AD7D2BB P B C D A 9 21 0xEB86D391 undef F ctx state 0 A ctx state 1 B ctx state 2 C ctx state 3 D void CMD5 md5 update struct md5 context ctx uint8 input uint32 length uint32 left fill if length return left ctx total 0 3 0x3F fill 64 left ctx total 0 length 3 ctx total 1 length 29 ctx total 0 0xFFFFFFFF ctx total 1 ctx total 0 length 3 if left length fill memcpy void ctx buffer left void input fill md5 process ctx ctx buffer length fill input fill left 0 while length 64 md5 process ctx input length 64 input 64 if length memcpy void ctx buffer left void input length static uint8 md5 padding 64 0x80 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 void CMD5 md5 finish struct md5 context ctx uint8 digest 16 uint32 last padn uint8 msglen 8 PUT UINT32 ctx total 0 msglen 0 PUT UINT32 ctx total 1 msglen 4 last ctx total 0 3 0x3F padn last 56 56 last 120 last md5 update ctx md5 padding padn md5 update ctx msglen 8 PUT UINT32 ctx state 0 digest 0 PUT UINT32 ctx state 1 digest 4 PUT UINT32 ctx state 2 digest 8 PUT UINT32 ctx state 3 digest 12 void CMD5 GenerateMD5 unsigned char buffer int bufferlen struct md5 context context md5 starts context md5 update context buffer bufferlen md5 finish context unsigned char m data CMD5 CMD5 for int i 0 i 4 i m data i 0 CMD5 CMD5 unsigned long md5src memcpy m data md5src 16 int httoi const char value struct CHexMap char chr int value const int HexMapL 16 CHexMap HexMap HexMapL '0' 0 '1' 1 '2' 2 '3' 3 '4' 4 '5' 5 '6' 6 '7' 7 '8' 8 '9' 9 'a' 10 'b' 11 'c' 12 'd' 13 'e' 14 'f' 15 pthread mutex lock mutexMemory char mstr strdup value pthread mutex unlock mutexMemory char s mstr int result 0 if s '0' s 1 'X' s 2 bool firsttime true while s ' 0' bool found false for int i 0 i HexMapL i if s HexMap i chr if firsttime result 4 result HexMap i value found true break if found break s firsttime false pthread mutex lock mutexMemory free mstr pthread mutex unlock mutexMemory return result CMD5 CMD5 const char md5src if strcmp md5src 0 for int i 0 i 4 i m data i 0 return for int j 0 j 16 j char buf 10 strncpy buf md5src 2 md5src 2 unsigned char m data j httoi buf CMD5 CMD5 operator CMD5 adder unsigned long m newdata 4 for int i 0 i 4 i m newdata i m data i adder m data i return CMD5 m newdata bool CMD5 operator CMD5 cmper return memcmp cmper m data m data 16 0 void CMD5 operator CMD5 equer memcpy m data equer m data 16 string CMD5 ToString char output 33 for int j 0 j 16 j sprintf output j 2 02x unsigned char m data j return string output version 1 0 url txtfile DocSegment cpp length 3864 include algorithm include fstream include iostream include map include vector include Md5 h include Url h include Document h include ChSeg Dict h include ChSeg HzSeg h include StrFun h CDict iDict using namespace std const unsigned int HEADER BUF SIZE 1024 const unsigned int MAX DOC ID 12932 you should change according Doc idx const unsigned int MAX DOC ID 21312 int main int argc char argv string strLine strFileName argv 1 CUrl iUrl vector CUrl vecCUrl CDocument iDocument vector CDocument vecCDocument unsigned int docId 0 ifstream ifs Tianwang raw 2559638448 ifstream ifs strFileName c str if ifs cerr Cannot open tianwang img info for input n return 1 ifstream ifsUrl Url idx sort uniq if ifsUrl cerr Cannot open Url idx sort uniq for input n return 1 ifstream ifsDoc Doc idx if ifsDoc cerr Cannot open Doc idx for input n return 1 while getline ifsUrl strLine char chksum 33 int docid memset chksum 0 33 sscanf strLine c str s d chksum docid iUrl m sChecksum chksum iUrl m nDocId docid vecCUrl push back iUrl while getline ifsDoc strLine int docid pos length char chksum 33 memset chksum 0 33 sscanf strLine c str d d d s docid pos length chksum iDocument m nDocId docid iDocument m nPos pos iDocument m nLength length iDocument m sChecksum chksum vecCDocument push back iDocument find page according to a url string c key cin c if c c return 0 CMD5 iMD5 iMD5 GenerateMD5 unsigned char c c str c size key iMD5 ToString int low 0 high vecCUrl size 1 mid 0 cout url c len c size endl cout md5 key endl cout high high endl bool bFound false while low high mid low high 2 if key vecCUrl mid m sChecksum docId vecCUrl mid m nDocId cout docId endl bFound true break else if key vecCUrl mid m sChecksum high mid 1 else low mid 1 if bFound cout not found endl return 0 return 0 strFileName seg ofstream fout strFileName c str ios in ios out ios trunc ios binary for docId 0 docId MAX DOC ID docId find document according to docId int length vecCDocument docId 1 m nPos vecCDocument docId m nPos 1 char pContent new char length 1 memset pContent 0 length 1 ifs seekg vecCDocument docId m nPos ifs read pContent length char s s pContent skip Head int bytesRead 0 newlines 0 while newlines 2 bytesRead HEADER BUF SIZE 1 if s ' n' newlines else newlines 0 s bytesRead if bytesRead HEADER BUF SIZE 1 continue skip header bytesRead 0 newlines 0 while newlines 2 bytesRead HEADER BUF SIZE 1 if s ' n' newlines else newlines 0 s bytesRead if bytesRead HEADER BUF SIZE 1 continue iDocument m sBody s iDocument RemoveTags s iDocument m sBodyNoTags s delete pContent string strLine iDocument m sBodyNoTags CStrFun ReplaceStr strLine nbsp CStrFun EmptyStr strLine set t r n to segment the document CHzSeg iHzSeg strLine iHzSeg SegmentSentenceMM iDict strLine fout docId endl strLine fout endl return 0 version 1 0 url txtfile crawl cpp length 1682 include iostream include fstream include string using namespace std include sys types h include dirent h const char RAWFILENAME tianwang raw int crawl ofstream raw const char dir name DIR dir dir opendir dir name if dir NULL cerr ERROR Error in opening dir dir name endl return 1 struct dirent sub for sub readdir dir sub NULL sub readdir dir if strcmp sub d name 0 strcmp sub d name 0 strcmp sub d name RAWFILENAME 0 continue if sub d type DT DIR cerr DEBUG I'm a dir endl crawl raw string dir name sub d name c str if sub d type DT REG cerr DEBUG I'm a file sub d name endl ifstream in string dir name sub d name c str if in cerr ERROR Fail to open file dir name ' ' sub d name endl continue raw version 1 0 endl raw url dir name ' ' sub d name endl int length in seekg 0 ios base end length in tellg in seekg 0 ios base beg raw length length endl raw endl while in eof string tmp getline in tmp raw tmp endl raw endl return 0 int main int argc char argv ofstream raw string argv 1 RAWFILENAME c str if raw cerr ERROR Error when opening tianwang raw file argv 1 RAWFILENAME to write endl return 1 if crawl raw argv 1 0 raw close return 1 raw close return 0 version 1 0 url txtfile Md5 h length 1131 ifndef MD5 H define MD5 H pragma warning disable 4786 include string using namespace std Manage MD5 class CMD5 private define uint8 unsigned char define uint32 unsigned long int struct md5 context uint32 total 2 uint32 state 4 uint8 buffer 64 void md5 starts struct md5 context ctx void md5 process struct md5 context ctx uint8 data 64 void md5 update struct md5 context ctx uint8 input uint32 length void md5 finish struct md5 context ctx uint8 digest 16 public construct a CMD5 from any buffer void GenerateMD5 unsigned char buffer int bufferlen construct a CMD5 CMD5 construct a md5src from char CMD5 const char md5src construct a CMD5 from a 16 bytes md5 CMD5 unsigned long md5src add a other md5 CMD5 operator CMD5 adder just if equal bool operator CMD5 cmper give the value from equer void operator CMD5 equer to a string string ToString unsigned long m data 4 endif md5 h 
00000007 RFC 1321 compliant MD5 implementation by Christophe Devine devine cr0 net this program is licensed under the GPL include Md5 h include stdio h include stdlib h include string h define GET UINT32 n b i n uint32 uint8 b i uint32 uint8 b i 1 8 uint32 uint8 b i 2 16 uint32 uint8 b i 3 24 define PUT UINT32 n b i uint8 b i uint8 n 0xFF uint8 b i 1 uint8 n 8 0xFF uint8 b i 2 uint8 n 16 0xFF uint8 b i 3 uint8 n 24 0xFF extern pthread mutex t mutexMemory void CMD5 md5 starts struct md5 context ctx ctx total 0 0 ctx total 1 0 ctx state 0 0x67452301 ctx state 1 0xEFCDAB89 ctx state 2 0x98BADCFE ctx state 3 0x10325476 void CMD5 md5 process struct md5 context ctx uint8 data 64 uint32 A B C D X 16 GET UINT32 X 0 data 0 GET UINT32 X 1 data 4 GET UINT32 X 2 data 8 GET UINT32 X 3 data 12 GET UINT32 X 4 data 16 GET UINT32 X 5 data 20 GET UINT32 X 6 data 24 GET UINT32 X 7 data 28 GET UINT32 X 8 data 32 GET UINT32 X 9 data 36 GET UINT32 X 10 data 40 GET UINT32 X 11 data 44 GET UINT32 X 12 data 48 GET UINT32 X 13 data 52 GET UINT32 X 14 data 56 GET UINT32 X 15 data 60 define S x n x n x 0xFFFFFFFF 32 n define P a b c d k s t a F b c d X k t a S a s b A ctx state 0 B ctx state 1 C ctx state 2 D ctx state 3 define F x y z z x y z P A B C D 0 7 0xD76AA478 P D A B C 1 12 0xE8C7B756 P C D A B 2 17 0x242070DB P B C D A 3 22 0xC1BDCEEE P A B C D 4 7 0xF57C0FAF P D A B C 5 12 0x4787C62A P C D A B 6 17 0xA8304613 P B C D A 7 22 0xFD469501 P A B C D 8 7 0x698098D8 P D A B C 9 12 0x8B44F7AF P C D A B 10 17 0xFFFF5BB1 P B C D A 11 22 0x895CD7BE P A B C D 12 7 0x6B901122 P D A B C 13 12 0xFD987193 P C D A B 14 17 0xA679438E P B C D A 15 22 0x49B40821 undef F define F x y z y z x y P A B C D 1 5 0xF61E2562 P D A B C 6 9 0xC040B340 P C D A B 11 14 0x265E5A51 P B C D A 0 20 0xE9B6C7AA P A B C D 5 5 0xD62F105D P D A B C 10 9 0x02441453 P C D A B 15 14 0xD8A1E681 P B C D A 4 20 0xE7D3FBC8 P A B C D 9 5 0x21E1CDE6 P D A B C 14 9 0xC33707D6 P C D A B 3 14 0xF4D50D87 P B C D A 8 20 0x455A14ED P A B C D 13 5 0xA9E3E905 P D A B C 2 9 0xFCEFA3F8 P C D A B 7 14 0x676F02D9 P B C D A 12 20 0x8D2A4C8A undef F define F x y z x y z P A B C D 5 4 0xFFFA3942 P D A B C 8 11 0x8771F681 P C D A B 11 16 0x6D9D6122 P B C D A 14 23 0xFDE5380C P A B C D 1 4 0xA4BEEA44 P D A B C 4 11 0x4BDECFA9 P C D A B 7 16 0xF6BB4B60 P B C D A 10 23 0xBEBFBC70 P A B C D 13 4 0x289B7EC6 P D A B C 0 11 0xEAA127FA P C D A B 3 16 0xD4EF3085 P B C D A 6 23 0x04881D05 P A B C D 9 4 0xD9D4D039 P D A B C 12 11 0xE6DB99E5 P C D A B 15 16 0x1FA27CF8 P B C D A 2 23 0xC4AC5665 undef F define F x y z y x z P A B C D 0 6 0xF4292244 P D A B C 7 10 0x432AFF97 P C D A B 14 15 0xAB9423A7 P B C D A 5 21 0xFC93A039 P A B C D 12 6 0x655B59C3 P D A B C 3 10 0x8F0CCC92 P C D A B 10 15 0xFFEFF47D P B C D A 1 21 0x85845DD1 P A B C D 8 6 0x6FA87E4F P D A B C 15 10 0xFE2CE6E0 P C D A B 6 15 0xA3014314 P B C D A 13 21 0x4E0811A1 P A B C D 4 6 0xF7537E82 P D A B C 11 10 0xBD3AF235 P C D A B 2 15 0x2AD7D2BB P B C D A 9 21 0xEB86D391 undef F ctx state 0 A ctx state 1 B ctx state 2 C ctx state 3 D void CMD5 md5 update struct md5 context ctx uint8 input uint32 length uint32 left fill if length return left ctx total 0 3 0x3F fill 64 left ctx total 0 length 3 ctx total 1 length 29 ctx total 0 0xFFFFFFFF ctx total 1 ctx total 0 length 3 if left length fill memcpy void ctx buffer left void input fill md5 process ctx ctx buffer length fill input fill left 0 while length 64 md5 process ctx input length 64 input 64 if length memcpy void ctx buffer left void input length static uint8 md5 padding 64 0x80 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 void CMD5 md5 finish struct md5 context ctx uint8 digest 16 uint32 last padn uint8 msglen 8 PUT UINT32 ctx total 0 msglen 0 PUT UINT32 ctx total 1 msglen 4 last ctx total 0 3 0x3F padn last 56 56 last 120 last md5 update ctx md5 padding padn md5 update ctx msglen 8 PUT UINT32 ctx state 0 digest 0 PUT UINT32 ctx state 1 digest 4 PUT UINT32 ctx state 2 digest 8 PUT UINT32 ctx state 3 digest 12 void CMD5 GenerateMD5 unsigned char buffer int bufferlen struct md5 context context md5 starts context md5 update context buffer bufferlen md5 finish context unsigned char m data CMD5 CMD5 for int i 0 i 4 i m data i 0 CMD5 CMD5 unsigned long md5src memcpy m data md5src 16 int httoi const char value struct CHexMap char chr int value const int HexMapL 16 CHexMap HexMap HexMapL '0' 0 '1' 1 '2' 2 '3' 3 '4' 4 '5' 5 '6' 6 '7' 7 '8' 8 '9' 9 'a' 10 'b' 11 'c' 12 'd' 13 'e' 14 'f' 15 pthread mutex lock mutexMemory char mstr strdup value pthread mutex unlock mutexMemory char s mstr int result 0 if s '0' s 1 'X' s 2 bool firsttime true while s ' 0' bool found false for int i 0 i HexMapL i if s HexMap i chr if firsttime result 4 result HexMap i value found true break if found break s firsttime false pthread mutex lock mutexMemory free mstr pthread mutex unlock mutexMemory return result CMD5 CMD5 const char md5src if strcmp md5src 0 for int i 0 i 4 i m data i 0 return for int j 0 j 16 j char buf 10 strncpy buf md5src 2 md5src 2 unsigned char m data j httoi buf CMD5 CMD5 operator CMD5 adder unsigned long m newdata 4 for int i 0 i 4 i m newdata i m data i adder m data i return CMD5 m newdata bool CMD5 operator CMD5 cmper return memcmp cmper m data m data 16 0 void CMD5 operator CMD5 equer memcpy m data equer m data 16 string CMD5 ToString char output 33 for int j 0 j 16 j sprintf output j 2 02x unsigned char m data j return string output 
00000008 include algorithm include fstream include iostream include map include vector include Md5 h include Url h include Document h include ChSeg Dict h include ChSeg HzSeg h include StrFun h CDict iDict using namespace std const unsigned int HEADER BUF SIZE 1024 const unsigned int MAX DOC ID 12932 you should change according Doc idx const unsigned int MAX DOC ID 21312 int main int argc char argv string strLine strFileName argv 1 CUrl iUrl vector CUrl vecCUrl CDocument iDocument vector CDocument vecCDocument unsigned int docId 0 ifstream ifs Tianwang raw 2559638448 ifstream ifs strFileName c str if ifs cerr Cannot open tianwang img info for input n return 1 ifstream ifsUrl Url idx sort uniq if ifsUrl cerr Cannot open Url idx sort uniq for input n return 1 ifstream ifsDoc Doc idx if ifsDoc cerr Cannot open Doc idx for input n return 1 while getline ifsUrl strLine char chksum 33 int docid memset chksum 0 33 sscanf strLine c str s d chksum docid iUrl m sChecksum chksum iUrl m nDocId docid vecCUrl push back iUrl while getline ifsDoc strLine int docid pos length char chksum 33 memset chksum 0 33 sscanf strLine c str d d d s docid pos length chksum iDocument m nDocId docid iDocument m nPos pos iDocument m nLength length iDocument m sChecksum chksum vecCDocument push back iDocument find page according to a url string c key cin c if c c return 0 CMD5 iMD5 iMD5 GenerateMD5 unsigned char c c str c size key iMD5 ToString int low 0 high vecCUrl size 1 mid 0 cout url c len c size endl cout md5 key endl cout high high endl bool bFound false while low high mid low high 2 if key vecCUrl mid m sChecksum docId vecCUrl mid m nDocId cout docId endl bFound true break else if key vecCUrl mid m sChecksum high mid 1 else low mid 1 if bFound cout not found endl return 0 return 0 strFileName seg ofstream fout strFileName c str ios in ios out ios trunc ios binary for docId 0 docId MAX DOC ID docId find document according to docId int length vecCDocument docId 1 m nPos vecCDocument docId m nPos 1 char pContent new char length 1 memset pContent 0 length 1 ifs seekg vecCDocument docId m nPos ifs read pContent length char s s pContent skip Head int bytesRead 0 newlines 0 while newlines 2 bytesRead HEADER BUF SIZE 1 if s ' n' newlines else newlines 0 s bytesRead if bytesRead HEADER BUF SIZE 1 continue skip header bytesRead 0 newlines 0 while newlines 2 bytesRead HEADER BUF SIZE 1 if s ' n' newlines else newlines 0 s bytesRead if bytesRead HEADER BUF SIZE 1 continue iDocument m sBody s iDocument RemoveTags s iDocument m sBodyNoTags s delete pContent string strLine iDocument m sBodyNoTags CStrFun ReplaceStr strLine nbsp CStrFun EmptyStr strLine set t r n to segment the document CHzSeg iHzSeg strLine iHzSeg SegmentSentenceMM iDict strLine fout docId endl strLine fout endl return 0 
00000009 include iostream include fstream include string using namespace std include sys types h include dirent h const char RAWFILENAME tianwang raw int crawl ofstream raw const char dir name DIR dir dir opendir dir name if dir NULL cerr ERROR Error in opening dir dir name endl return 1 struct dirent sub for sub readdir dir sub NULL sub readdir dir if strcmp sub d name 0 strcmp sub d name 0 strcmp sub d name RAWFILENAME 0 continue if sub d type DT DIR cerr DEBUG I'm a dir endl crawl raw string dir name sub d name c str if sub d type DT REG cerr DEBUG I'm a file sub d name endl ifstream in string dir name sub d name c str if in cerr ERROR Fail to open file dir name ' ' sub d name endl continue raw version 1 0 endl raw url dir name ' ' sub d name endl int length in seekg 0 ios base end length in tellg in seekg 0 ios base beg raw length length endl raw endl while in eof string tmp getline in tmp raw tmp endl raw endl return 0 int main int argc char argv ofstream raw string argv 1 RAWFILENAME c str if raw cerr ERROR Error when opening tianwang raw file argv 1 RAWFILENAME to write endl return 1 if crawl raw argv 1 0 raw close return 1 raw close return 0 
0000000a ifndef MD5 H define MD5 H pragma warning disable 4786 include string using namespace std Manage MD5 class CMD5 private define uint8 unsigned char define uint32 unsigned long int struct md5 context uint32 total 2 uint32 state 4 uint8 buffer 64 void md5 starts struct md5 context ctx void md5 process struct md5 context ctx uint8 data 64 void md5 update struct md5 context ctx uint8 input uint32 length void md5 finish struct md5 context ctx uint8 digest 16 public construct a CMD5 from any buffer void GenerateMD5 unsigned char buffer int bufferlen construct a CMD5 CMD5 construct a md5src from char CMD5 const char md5src construct a CMD5 from a 16 bytes md5 CMD5 unsigned long md5src add a other md5 CMD5 operator CMD5 adder just if equal bool operator CMD5 cmper give the value from equer void operator CMD5 equer to a string string ToString unsigned long m data 4 endif md5 h 
0000000b 第 三 章 输入 输出 函数 及 控制 流程 语句 本 章 主要 介绍 Turbo C2 0 标准 输入 输出 函数 和文 件 的 输入 输出 函数 。 通过 本 节 的 学习 可以 使 读者 掌握 Turbo C2 0 的 屏幕 输出 、 键盘 输入 输出 以及 磁盘 文件 的 读 写 函数 并 能 开始 进行 一些 简单 的 程序 的 编写 。 控制 流程 语句 主要 包括 条件 语句 、 循环 语句 和 开关 语句 。 标准 输入 输出 函数 格式化 输入 输出 函数 标准 库 提供 了 两 个 控制台 格式化 输入 、 输出 函数 printf 和 scanf 这 两 个 函数 可以 在 标准 输入 输出 设备 上 以 各种 不同 的 格式 读 写 数据 。 printf 函数 用 来 向 标准 输出 设备 屏幕 写 数据 scanf 函数 用 来 从 标准 输入 设备 键盘 上 读数 据 。 下面 详细 介绍 这 两 个 函数 的 用法 。 一 、 printf 函数 函数 是 格式化 输出 函数 一般 用于 向 标准 输出 设备 按 规定 格式 输出 信息 。 在编 写 程序 时 经常 会 用 到 此 函数 。 printf 函数 的 调用 格式 为 格式化 字符串 参量 表 其中 格式化 字符串 包括 两 部分 内容 一部分 是 正常 字符 这些 字符 将 按 原 样 输出 另 一部分 是 格式化 规定 字符 以 开始 后跟 一个 或 几 个 规定 字符 用 来 确定 输出 内容 格式 。 参量 表 是 需要 输出 的 一系列 参数 其 个数 必须 与 格式化 字符串 所说 明 的 输出 参数 个数 一样 多 各 参数 之间 用 分开 且 顺序 一一 对应 否则 将 会 出现 意 想 不 到 的 错误 。 格式化 规定 符 提供 的 格式化 规定 符 如下 ━━━━━━━━━━━━━━━━━━━━━━━━━━ 符号 作用 ────────────────────────── 十进制 有 符号 整数 十进制 无 符号 整数 浮 点数 字符串 单个 字符 指针 的 值 指数 形式 的 浮 点数 无 符号 以 十 六 进 制表 示 的 整数 无 符号 以 八 进 制表 示 的 整数 自动 选择 合适 的 表示 法 ━━━━━━━━━━━━━━━━━━━━━━━━━━ 说明 可以 在 和 字母 之间 插 进 数字 表示 最 大 场 宽 。 例如 3d 表示 输出 3 位 整 型 数 不够 3 位 右 对 齐 。 表示 输出 场 宽 为 9 的 浮 点数 其中 小数 位 为 2 整数 位 为 6 小数点 占 一 位 不够 9 位 右 对 齐 。 表示 输出 8 个 字符 的 字符串 不够 8 个 字符 右 对 齐 。 如果 字符串 的 长度 、 或 整 型 数位 数 超过 说明 的 场 宽 将 按 其实 际 长度 输出 。 但 对 浮 点数 若 整数 部分 位数 超过 了 说明 的 整数 位 宽度 将 按 实际 整数 位 输出 若 小数 部分 位数 超过 了 说明 的 小数 位 宽度 则 按说 明 的 宽度 以 四舍五入 输出 。 另外 若想 在 输出 值 前 加 一些 0 就 应 在场 宽 项 前 加 个 0 。 例如 04d 表示 在 输出 一个 小于 4 位 的 数值 时 将 在 前面 补 0 使 其 总 宽度 为 4 位 。 如果 用 浮 点数 表示 字符 或 整 型 量 的 输出 格式 小数点 后 的 数字 代表 最 大 宽度 小数点 前 的 数字 代表 最 小 宽度 。 例如 6 9s 表示 显示 一个 长度 不 小于 6 且 不大 于 9 的 字符串 。 若 大于 9 则 第 9 个 字符 以后 的 内容 将 被 删除 。 可以 在 和 字母 之间 加 小写 字母 l 表示 输出 的 是 长 型 数 。 例如 ld 表示 输出 long 整数 表示 输出 double 浮 点数 可以 控制 输出 左 对 齐 或 右 对 齐 即 在 和 字母 之间 加入 一个 号 可 说明 输出 为 左 对 齐 否则 为 右 对 齐 。 例如 7d 表示 输出 7 位 整数 左 对 齐 表示 输出 10 个 字符 左 对 齐 一些 特殊 规定 字符 ━━━━━━━━━━━━━━━━━━━━━━━━━━ 字符 作用 ────────────────────────── 换 行 清 屏 并 换 页 回车 符 表示 一个 ASCII 码 用 16 进 表示 其中 hh 是 1 到 2 个 16 进 制 数 ━━━━━━━━━━━━━━━━━━━━━━━━━━ 由 本 节 所 学 的 printf 函数 并 结合 上 一 节 学习 的 数据 类型 编制 下面 的 程 序 以 加深 对 Turbo C2 0 数据 类型 的 了解 。 
0000000c 他们 两 人 有意 见 分歧 。 氧原子 结合 成分 子 时会 释放 出 能量 。 明年 地铁 中将 可以 使用 移动 电话 。 北京大学 毕业生 不 看重 大城 市 户口 。 10 年 是 一 段 很 长 的 时间 。 11 月 3 日 晚 ， 世界 产业工人 协会 的 战术 生效 了 。 1903 年 莱 特 兄弟 的 发明 被 忽视 了 ， 而 不 是 获得 了 赏识 。 1916 年 5 月 21 日 星期日 夜晚 ， 日本 最 大 的 火山 爆发 了 。 1940 年 ， 爱因斯坦 成为 一 名 美国 公民 。 1949 年 10 月 1 日 ， 毛 主席 宣布 了 中华 人民 共和国 的 诞生 。 1967 年 他 第一 次 遇到 她 时 ， 她 的 头发 是 灰白 的 。 1977 年 他 在 巴黎 遇见 她 。 1979 年 每 一 选举人 只 准 投 一个 候选人 的 票 。 1979 年 是 我 儿子 出生 的 一 年 。 1991 年 ， 感染 霍乱 的 病人 多 达 3026 人 ， 其中 440 人 死亡 。 1992 年 是 我们 艰苦 拼搏 的 一 年 。 1997 年 是 李 素 丽 最 难忘 的 一 年 。 1 月 26 日 被 定 为 澳大利亚 国庆节 。 “ 王 ” 字 的 笔画 有 四 个 。 《 战争 与 和平 》 是 我 读 过 的 书 中 最 长 的 一 本 。 啊 ， 这 是 多么 美妙 的 前景 ！ 阿 珍 她们 吃 完 饭 散步 去 了 。 爱国 一家 ， 爱国 不 分 先后 。 爱因斯坦 的 引力 定律 在 一 次日 蚀 期间 得到 了 检验 。 安 不 会 游泳 ， 是 吗 ？ 安 不 在 学 音乐 ， 是 吗 ？ 安 德 鲁 被 送 到 特为 聋人 办 的 学校 去 了 。 安 德 鲁 邀请 她 一起 开车 出去 玩 。 安 的 孩子 们 整天 都 上学 ， 所以 她 决定 去 找 个 工作 。 安定团结 是 实现 四 个 现代化 的 前提 。 安 给 他 一 本书 。 安 没 得到 彩电 ， 是 吗 ？ 安 劝 我 读 那 本书 。 安 在 农村 小屋 已经 住 了 六 十 年 ， 她 不 想 搬 到 楼房 去 住 。 安葬 他 的 地方 很 美 。 安装 灯 的 人 是 我 的 同学 。 安 自己 打开 了 门 。 安 昨天 不可 能 看见 汤 姆 。 安 昨天 可能 没 看见 汤 姆 。 按 公制 度量 它 是 多少 ？ 案子 的 线索 断 了 。 澳大利亚 大陆 最 早 是 在 16 世纪 由 葡萄牙 人 发现 的 。 澳大利亚 是 世界 上 最 大 的 岛 。 八 成 他 不 来 了 。 八点 时 ， 他 正在 吃 早饭 。 八 减 三 得 五 。 八月 份 物价 将 上涨 。 把 东西 清理 干净 把 工作 分成 三六九等 是 错误 的 。 把 孩子 们 送 上 床 后 ， 她 开始 改 学生 的 卷子 。 把 花盆 搬 到 外面 去 。 把 画 挂 到 墙上 ！ 把 火 拔 一 拔 把酒 注 到 瓶 里 。 把 卷子 交 上来 ！ 把 课文 再 读 一 遍 ！ 把 脸 转 到 这边 来 把 龙头 打开 把 乱七八糟 的 东西 清理 干净 把 那 本书 扔 给 我 把 那 本 杂志 扔 给 我 把 你 的 名字 告诉 我 把 你 的 衣服 挂 起来 把 瓶子 放在 桌上 。 把 其余 的 吃 的 留 到 明天 。 把 全部 情况 告诉 她 把 身子 探 出 窗外 是 很 危险 的 。 把 绳子 再 放松 点儿 。 把 失败 都 归咎 于 客观 原因 是 不 正确 的 。 把 收音机 开 小 点儿 ， 别 干扰 人家 。 
0000000d 中华 人民 共和国 万岁 交通 性 法规 请 把手 拿 开 王 蒙 《 坚硬 的 稀 粥 》 （ 选 自 《 中国 作家 》 一 九 八 九 年 第二 期 ） 我们 家 的 正式 成员 包括 爷爷 、 奶奶 、 父亲 、 母亲 、 叔叔 、 婶婶 、 我 、 妻子 、 堂妹 、 妹夫 ， 和 我 那个 最 可爱 的 瘦 高挑 儿子 。 他们 的 年龄 分别 是 八 八 岁 、 八 四 岁 、 六 三 岁 、 六 四 岁 、 六一 岁 、 五 七 岁 、 四 十 岁 、 四 十 岁 … … 十 六 岁 。 梯形 结构 合乎 理想 。 另外 ， 我们 有 一 位 比 正式 成员 还要 正式 的 不可 须臾 离 之 的 非正式 成员 ―― 徐 姐 。 她 今年 五 九 岁 ， 在 我们 家 操持 家务 已经 四 十 年 ， 她 离 不 开 我们 ， 我们 离 不 开 她 。 面前 天赋人权 ， 自然 平等 。 一律 称 她 为 “ 姐 ” 。 我们 一直 生活 得 很 平稳 ， 很 团结 。 包括 是否 认为 今夏 天气 过 热 、 喝茶 是 喝 八 块 钱 一 两 的 龙井 还是 四 毛 钱 一 两 的 青 茶 ， 用 香皂 用 白 兰 还是 紫罗兰 还是 金 盾 ， 大家 一律 听 爷爷 的 。 从来 没有 过 意见 分歧 ， 没有 过 论证 争鸣 相持不下 ， 没有 过 纵横捭阖 ， 明争暗斗 。 连 头发 我们 也 是 留 的 一个 式样 ， 当然 各 分 男女 。 几 十 年 来 ， 我们 每天 早晨 六点 十分 起床 ， 六点 三十五分 ， 徐 姐 给 我们 准备 好 了 早餐 ： 烤 馒头 片 、 大米 稀饭 、 腌 大头菜 。 七点 十分 ， 各自 出发 上班 上学 。 爷爷 退休 以后 ， 也 要 在 这个 时间 出去 到 街道 委员会 执勤 。 中午 十二时 ， 回来 ， 吃 徐 姐 准备 好 的 炸 酱 面 。 小憩 一会儿 ， 中午 一时 三十分 ， 再次 各自 出发 上班 上学 。 爷爷 则 午 睡 至 三时 半 ， 起来 再次 洗脸 漱口 ， 坐 在 躺椅 上 喝茶 读报 。 到 五点 左右 ， 爷爷 奶奶 与 徐 姐 研究 当晚 的 饭 。 研究 是 每天 都 要 研究 的 ， 而且 不论 爷爷 、 奶奶 还是 徐 姐 ， 对 这 一 课题 兴致勃勃 。 但 得出 的 结论 大致 不 差 ： 今晚 上 么 就 吃 米饭 吧 。 菜 嘛 ， 一 荤 、 一半 荤 半 素 、 两 素 吧 。 汤 呢 ， 就 不 做 了 吧 。 就 做 一 回 吧 。 研究 完了 ， 徐 姐 进 厨房 ， 劈 哩 啪 啦 响 上 三十分 钟 以后 ， 总 要 再 走 出来 ， 再 问 爷爷 奶奶 ： “ 瞧 我 糊涂 的 ， 我 忘 了 问 您老 二 位 了 ， 咱们 那个 半 荤 半 素 的 菜 ， 是 切 肉片 还是 肉丝 呢 ？ ” 这个 这个 ， 这 的确 是 一个 重大 的 问题 。 爷爷 和 奶奶 互 瞟 了 一眼 ， 做 了 个 眼色 ， 然后 说 ： “ 就 吃 肉片 吧 。 ” 或者 说 ： “ 就 吃 肉丝 吧 。 ” 然后 ， 意图 得到 了 圆满 的 贯彻 。 大家 满意 。 首先 是 爷爷 满意 。 爷爷 年轻 时候 受过 很多 苦 。 他 常常 说 ： “ 顿顿 吃 饱 饭 ， 穿 囫囵 衣裳 ， 家里 有 一切 该 有的 东西 ， 而 又 子孙 团聚 ， 身体 健康 ， 这 是 过去 财主 东家 也 不 敢 想 的 日子 。 你们 哪 ， 可 别 太 狂妄 了 啊 ， 你们 哪里 知道 挨饿 是 啥 滋味 ？ ” 然后 爸爸 妈妈 叔叔 婶婶 都 声明 说 ， 他们 没 忘记 挨饿 的 滋味 。 饿 起来 腹腔 胸腔 一 抽 一 抽 的 ， 脑袋 一 坠 一 坠 的 ， 腿肚子 一 沉 一 沉 的 ， 据 他们 说 饿 极了 正 像 吃 得 过多 了 一样 ， 哇哇 地 想 呕吐 。 我们 全家 ， 以 爷爷 奶奶 为首 ， 都 是 知足常乐 哲学 的 身体力行 者 与 现今 体制 的 忠实 支持者 。 这 几 年 情况 突然 发生 了 变化 。 新风 新潮 不断 涌 来 。 短短 几 年 ， 家里 突然 有 了 彩电 、 冰箱 、 洗衣机 。 而且 儿子 说话 里 常常 出现 英文 词儿 ， 爷爷 很 开明 开放 ， 每天 下午 午 睡 后 从 报纸 上 、 晚饭 后 从 广播 和 电视 里 吸收 新名词 新 观念 。 他 常 征询 大家 的 意见 ： “ 看 咱们 家 的 生活 有 什么 需要 改革 改善 的 没有 ？ ” 大家 都 说 没有 ， 徐 姐 更 是 说 ， 但愿 这样 的 日子 一代 一代 传 下去 ， 天天 如此 ， 年年 如此 ， 世世代代 ， 永远 如此 。 我 儿子 终于 提 了 一个 建议 ， 提议 以前 挤 了 半天 眼睛 ， 好像 眼睛 里 爬 进 了 毛毛虫 。 他 建议 ， 买 个 收录机 。 爷爷 从善如流 ， 批准 了 。 家里 又 增添 了 红灯 牌 立体声 收录机 。 刚 买 来时 很 高兴 ， 你 讲 一 段 话 ， 他 唱 一 段 戏 ， 你 学 个 猫 叫 ， 她 念 一 段 报纸 ， 录 下来 然后 放出 音 来 ， 自己 与 家人 共同 欣赏 欢呼 鼓掌 ， 认为 收录机 真是 个 好 东西 ， 认为 爷爷 的 父辈 祖辈 不知 收录机 为何 物 ， 实在 令人 叹息 。 两 天 以后 就 降 了 温 。 买 几 个 “ 盒 儿 带 ” 来 ， 唱 的 还 不如 收音机 电视机 里 放 送 的 好 。 于是 ， 收录机 放在 一边 接 土 蒙 尘 。 大家 便 认识 到 ， 新 技术 新 器物 毕竟 作用 极为 局限 ， 远远 不如 家庭 的 和谐 与 秩序 更 重要 。 远 不如 老 传统 更 耐用 ―― 还是 “ 话匣子 ” 好 哇 ！ 那 一 年 决定 取消 午 睡 ， 中午 只 休息 四十分 钟 ―― 一小 时 ， 很 使 全家 骚动 了 一阵子 。 先 说是 各 单位 免费 供应 午餐 ， 令 我们 既 喜 且 忧 。 喜 的 是 白吃 饭 ， 忧 的 是 不 习惯 ， 果然 ， 吃 了 两 天 就 纷纷 反应 上火 ， 拉 不 出 屎 来 。 没有 几 天 宣布 免费 供应 的 午餐 取消 ， 叫 人 迷惑 。 这 可 怎么办 呢 ？ 爷爷 教育 我们 处处 要 带头 按 政府 指 的 道 儿 走 ， 于是 又 买 饭盒 又 带 饭 ， 闹腾 了 一阵子 。 徐 姐 也 害 得失 眠 、 牙 疼 、 长 针眼 、 心率 不 齐 。 不久 ， 各 机关 自动 把 午休 时间 延长 了 。 有的 虽 不明 令 延长 却 也 自动 推后 了 下午 上班 时间 ， 但 没有 推后 下班 时间 。 我们 家 又 恢复 了 中午 的 炸 酱 面 。 徐 姐 的 眼睛 不再 起 包 儿 ， 牙齿 不再 上火 ， 睡觉 按时 始终 ， 心脏 每 分钟 七 十 至 八 十 次 有 规律 地 跳 。 新风 日 劲 ， 新潮 日 猛 ， 万物 静观 皆 自 得 ， 人间 正道 是 沧桑 。 在 兹 四面 反思 含 悲 厌 旧 ， 八 方 涌 起 怀 梦 维新 之际 ， 连 过去 把 我们 树 成 标兵 模范 样板 的 亲朋好友 也 启发 我们 要 变动 变动 ， 似乎 是 在 广州 要不 干脆 是 在 香港 乃至 美国 出现 了 新 样板 。 于是 爷爷 首先 提出 ， 由 元首 制 改行 内阁制 度 。 由 他 提名 ， 家庭 全体 会议 （ 包括 徐 姐 ， 也 是 有 发言权 的 列席 代表 ） 通过 ， 由 正式 成员 们 轮流 执政 。 除 徐 姐 外 都 赞成 ， 于是 首先 委托 爸爸 主持 家政 ， 并 决议 由 他 来 进行 膳食 维新 。 爸爸 一辈子 在家 内 是 吃现成饭 ， 做 现成 活 （ 及 分派 给 他 的 活 ） 。 这 回 由 他 负责 主持 做饭 大业 ， 他 很 不好意思 也 很 为难 。 遇到 买 不 买 茶叶 做 不 做 汤 吃 肉片 还是 肉丝 这样 的 大事 ， 一概 去 问 爷爷 。 他 不论 说 什么 话 做 什么 事 ， 都 习惯 于 打 出 爷爷 的 旗号 。 “ 老爷子 说 了 ， 蚊香 要 买 防虫 菊 牌 的 ” ， “ 老爷子 说 了 ， 今晚 就 不 做 汤 了 ” ， “ 老爷子 说 了 ， 洗 碗 就 不要 用 洗涤剂 了 ， 那 化学 玩意儿 兴许 有毒 。 还是 温水 加 碱 面 ， 又 节省 ， 又 干净 。 ” 这样一来 就 增加 了 麻烦 。 徐 姐 遇 事 问 爸爸 ， 爸爸 不 作主 ， 再 去 问 爷爷 ， 问 完 爷爷 再 一 口 一个 老爷子 说 地 向 徐 姐 传话 ， 还 不如 直接 去 问 爷爷 便当 。 直接 去 问 爷爷 吧 ， 又 怕 爸爸 挑 眼 而 爷爷 嫌 烦 。 爷爷 嫌 烦 也 是 真的 ， 几 次 对 爸爸 说 ： “ 这些 事 你 作主 嘛 ， 不要 再 来 问 我 了 ” ， 于是 爸爸 告诉 徐 姐 ： “ 老爷子 说 了 ， 让 我 作主 ， 老爷子 说 了 ， 不 让 我 再 问 他 。 ” 叔叔 和 婶婶 有些 窃窃私语 。 语 了 些 什么 ， 不知 道 。 但 很 可能 是 既 不满 于 爸爸 的 无能 ， 又 怀疑 爸爸 是 不 是 拉 大旗 ， 假 传 圣旨 ， 也 不满 于 爷爷 的 不 放手 ， 同样 不满 于 徐 姐 的 噜 嗦 ， 乃至 不满 于 大家 为何 同意 了 实行 内阁制 与 通过 了 爸爸 这样 的 内阁 人选 。 爷爷 有所 查 觉 ， 好好 地 开导 了 一 次 爸爸 ， 说明 下放 权力 是 大 趋势 。 爸爸 无奈 ， 答应 不再 动辄 以 爷爷 的 名义 行事 。 爸爸 也 来 了 一个 下放 权力 ， 明确 做 不 做 汤 与 肉片 肉丝 之间 的 选择权 全 由 徐 姐 决定 。 徐 姐 不 答应 。 “ 我 怎么 做 得了 主 啊 ， ” 她 垂泪 垂 涕 辞 谢 ， 惶恐 得 少 吃 了 一 顿 饭 。 大家 都 鼓励 她 ： “ 你 在 我们 家 做 了 这么 多年 ， 你 应该 有 职 有 权 嘛 ！ 你 管 起来 吧 ， 我们 支持 你 ！ 你 想 买 什么 就 买 什么 ， 你 想 做 什么 就 做 什么 ， 你 给 什么 我们 就 吃 什么 ， 我们 信任 你 ！ ” 徐 姐 终于 破涕为笑 ， 感谢 家人 对 她 的 抬举 。 一切 照旧 ， 但 人们 实际上 都 渐渐 挑剔 起来 。 都 知道 这样 是 徐 姐 一手 操办 的 ， 没有 尚方宝剑 为 来历 为 依据 ， 从 下意识 的 不 敬 开始 演变 出 上 意识 的 不满 意 。 首先 是 我 的 儿子 ， 接着 是 堂妹 堂妹 夫 ， 然后 是 我 妻子 和 我 ， 开始 散播 一些 讽刺 话 。 “ 我们 的 饭 是 四 十 年 一贯制 ， 快 成 了 文物 啦 ！ 因循守旧 ， 墨守成规 ， 凝固 僵化 ， 不思进取 ！ 我们 家 的 生活 是 落后 于 时代 的 典型 ” “ 徐 姐 的 局限性 太 大 嘛 ！ 文化 素质 太 低 嘛 ！ 人 倒是 好 ， 就是 水平 太 低 ！ 想不到 我们 家 八 十 年代 过 着 徐 姐 水平 的 生活 ！ ” 徐 姐 浑然不觉 ， 反倒 露出 些 踌躇 意 满 的 苗头 。 她 开始 按照 她 的 意思 进行 某些 变革 了 。 首先 把 早饭 里 的 两 碟 腌 大头菜 改 为 一 碟 分 两 碟 装 ， 把 咸菜 上 点 香油 变成 无 油 ， 把 中午 的 炸 酱 由 小 碗 肉 丁 干 炸 改 为 水 炸 ， 把 平均 两 天 喝 一 次 汤 改 为 七 天才 喝 一 次 汤 ， 把 蛋 花 汤 改 为 酱油 葱花 做 的 最 简陋 的 “ 高汤 ” 。 节省 下 了 伙食 钱 ， 买 了 些 人参 蜂王精 送 到 爷爷 屋里 ， 勒 我们 的 裤带 向 爷爷 效忠 ， 令 我们 敢 怒 不 敢 言 。 尤其 可恶 的 是 。 儿子 汇 汇 说 ， 做 完 高汤 ， 她 经常 自己 先 盛 出 一 碗 葱花 最 多 最 鲜 最 香 的 汤 ， 在 大家 用 饭 以前 先 饮 为 快 。 还有 一 次 ， 她 一面 切 菜 一面 在 厨房 里 磕 瓜子 吃 ， 儿子 说 ， 她 一定 是 贪污 了 伙食费 。 “ 权力 就是 腐蚀 ， 一 分权 力 就是 一 分 腐蚀 ， 百分之百 的 权力 就是 百分之百 的 腐蚀 ” ， 儿子 振振有词 地 宣讲 着 他 的 新 观念 。 父亲 以下 的 人 未 表示 态度 。 儿子 受到 了 这种 沉默 鼓舞 ， 便 在 一 次 徐 姐 先 喝 高汤 的 时刻 向 徐 姐 发起 了 猛攻 ： “ 够 了 ， 你 这 套 低 水平 的 饭 ！ 自己 还 先 挑 葱花 儿 ！ 从 明天 起 我 管 ， 我 要 让 大家 过 现代化 的 生活 ！ ” 虽然 徐 姐 哭 哭闹 闹 ， 众人 却 没 说 什么 。 大家 觉得 让 儿子 管管 也好 ， 他 年轻 ， 有 冲劲 ， 有 想法 ， 又 脱颖而出 ， 符合 成才 规律 。 当然 ， 包括 我 在内 ， 还是 多方 挽 慰 了 徐 姐 ： “ 你 在 我们 家 做饭 四 十 年 ， 成绩 是 主要 的 ， 谁 想 抹杀 也 抹杀 不 了 的 ！ ” 儿子 非常 激昂 地 讲 了 一 套 理论 ， “ 咱们 家 吃饭 是 四 十 年 一贯制 ， 不但 毫无 新意 ， 而且 有 一 条 根本性 的 缺陷 ， 碳 水化 合 物 过多 而 蛋白质 不足 。 缺少 蛋白 ， 就 会 影响 生长 发育 ， 而且 妨碍 白血球 抗体 的 再生 与 活力 。 其 结果 ， 也 就 造成 国民 体质 的 羸弱 与 素质 的 低下 。 在 各 发达国家 ， 平均 日 摄取 的 蛋白质 是 我国 平均 日 摄取量 的 七 倍 ， 其中 动物 蛋白 ， 是 我们 的 十 四 倍 。 如此 下去 ， 个儿 没 人家 高 ， 体形 没 人家 好 ， 力气 没有 人家 大 ， 精神 没有 人家 足 。 人家 一 天 睡 一 次 ， 四 、 五 个 小时 最 多 六 个 小时 就 够用 了 ， 从早到晚 ， 精神 气 十足 。 我们 呢 ， 加上 午觉 仍然 是 无精打采 。 或者 你们 会 说 ， 我们 不 应 与 发达国家 比 。 那么 ， 我 要说 的 是 ， 我们 汉族 的 食品 结构 还 比不上 北方 各 兄弟 民族 －－ 总 不 能 说 兄弟 民族 的 经济 发展 水准 高于 我们 啊 ！ 我们 的 蛋白质 摄入量 ， 与 蒙古 、 维吾尔 、 哈萨克 、 朝鲜 、 以及 西南 地区 的 藏族 比 ， 也 是 不 能 望 其 项背 ！ 这样 的 食品 结构 ， 不 变 行 吗 ？ 以 早餐 为 例 ， 早晨 吃 馒头 片 稀 粥 咸菜 … … 我 的 天 啊 ！ 这 难道 是 二 十 世纪 八 十 年代 中华 大城 市 具有 中上 收入 的 现代人 的 享受 ？ 太 可怕 了 ！ 太 愚昧 了 ！ 稀 粥 咸菜 本身 就是 东亚 病夫 的 象征 ！ 就是 慢性 自 戕 ！ 就是 无知 ！ 就是 炎黄子孙 的 耻辱 ！ 就是 华夏 文明 衰落 的 根源 ！ 就是 黄河 文明 式微 的 兆 征 ！ 如果 我们 历来 早晨 不 吃 稀 粥 咸菜 而 吃 黄油 面包 ， 1840 年 的 鸦片战争 ， 英国 能够 得胜 吗 ？ 1900 年 的 八国联军 ， 西太 后 至于 跑 到 承德 吗 ？ 1931 年 日本 关东军 敢于 发动 九 ・ 一 八 事变 吗 ？ 1937 年 小鬼 子 敢 发动 芦沟桥 事变 吗 ？ 日本 军队 打 过来 ， 一 看 ， 中国人 人 一 嘴 的 白 脱 －－ 奶油 ， 他们 能 不 整 团 整 师 的 休克 吗 ？ 如果 一 九 四九年 以后 我们 领导 及早 下决心 消灭 稀 粥 咸菜 ， 全国 都 吃 黄油 面包 外加 火腿 辣 肠 鸡蛋 酸奶 干酪 外加 果酱 蜂蜜 朱古力 ， 我国 国力 、 科技 、 艺术 、 体育 、 住房 、 教育 、 小汽车 平均 拥有量 不 是 早就 达到 世界 前列 了 吗 ？ 说到底 ， 稀 粥 咸菜 是 我们 民族 不幸 的 根源 ， 是 我们 的 封建社会 趋 稳定 欠 发展 无 进步 的 根源 ！ 彻底 消灭 稀 粥 咸菜 ！ 稀 粥 咸菜 不消 灭 ， 中国 就 没有 希望 ！ ” 言者 为 之 动火 ， 听者 为之动容 。 我 一则 以 惊 ， 一则 以 喜 ， 一则 以 惧 。 惊喜 的 是 不知不觉 之中 儿子 不但 不再 穿 开裆裤 不再 叫 我 去 给 他 擦屁股 而且 积累 了 这么 多 学问 ， 更新 了 这么 大观 念 ， 提出 了 这么 犀利 的 见解 ， 抓住 了 这么 关键 的 要害 ， 真是 天 若 有 情 天 亦 老 ， 人间 正道 是 儿 强 ！ 真是 身 在 稀 粥 咸菜 ， 胸怀 黄油 火腿 ， 吞吐 现代化 之 八 方 风云 ， 覆盖 世界性 之 四 维 空间 ， 着实 是 后生可畏 ， 世界 归根结底 是 他们 的 。 惧 的 是 小子 两 片 嘴皮子 一 沾 就 把 积弊 抨击 了 个 落花流水 ， 赵 括 谈 兵 ， 马 谡 守 亭 ， 言过其实 ， 大而无当 ， 清 谈 误 家 ， 终 无 实用 。 积 我 近 半 个 世纪 之 经验 ， 凡 把 严重 的 大 问题 说 得 小葱 拌 豆腐 一清二白 千军万马 中 取 敌 将 首级 易 如 掌 都 不用 翻 者 ， 早就 会 在 亢奋 劲儿 过去 以后 患 阳痿 症 的 ！ 只 此 一大 耳 儿 ， 为 传宗接代 计 ， 实 痿 不得 也 ！ 果然 ， 堂妹 鼻子 眼里 哼 了 一 声 ， 嘟囔 道 ： “ 说 得 倒 便利 ， 要是 有 那么 多 黄油 面包 ， 我 看 现代化 也 就 完成 了 。 ” “ 啊 ？ ” 儿子 正在 气盛 之 时 ， 大 叫 ： “ 好家伙 ！ 六 十 年代 尼 ・ 谢 ・ 赫鲁晓夫 提倡 土豆 烧 牛肉 的 共产主义 ， 八 十 年代 ， 姑姑 搞 面包 加 黄油 的 现代化 ， 何 共 相似 乃 尔 ！ 现代化 意味着 工业 的 自动化 农业 的 集约化 科学 的 超前 化 国防 的 综合化 思维 的 任意 化名 词 的 难 解 化 艺术 的 变态 化 争论 的 无边 化学 者 的 清 谈 化 观念 的 莫名 化 和 人 的 硬气 功 化 及 特意 功能 化 。 化 海 无 涯 ， 黄油 为 楫 ； 乐土 无 路 ， 面包 成 桥 ！ 当然 ， 黄油 面包 不可 能 向 炸弹 一样 地 由 假想敌 投掷 过来 ， 这 我 还 不知 道 么 ？ 我 非 弱智 ， 岂 无常 识 ？ 但 我们 总 要 提出 问题 提出 目标 ， 国 之 无 目标 犹 人 之 无头 ， 未知 其 可 也 ！ ” “ 好 嘛 好 嘛 ， 大方向 还是 一致 的 嘛 ， 不要 吵 了 ， ” 爷爷 说 ， 大家 便 不再 吵 。 吾 儿 励精图治 ， 第二 天 ， 果然 ， 黄油 面包 拥 生 鸡蛋 牛奶 咖啡 。 徐 姐 与 奶奶 不 吃 咖啡 牛奶 ， 叔叔 给 他们 出 主意 用 葱花 炝 锅 ， 加 花椒 、 桂皮 、 茴香 、 姜 皮 、 胡椒 、 紫菜 、 干 辣椒 ， 加热 冒烟 后 放 广东 老 抽 －－ 虾子 酱油 ， 然后 用 这些 潲 子 加 到 牛奶 咖啡 里 ， 压服 牛奶 咖啡 的 洋气 腥气 。 我 尝 了 一 口 ， 果然 易于 承受 接受 多 了 。 我 也 求 加 潲 子 ， 看到 儿子 的 杀人犯 似的 眼神 ， 才 为 子 牺牲 口味 ， 硬 灌 洋 腥 热饮 。 唉 ， “ 四 二 一 ” 综合症 下 的 中国 小 皇帝 呀 ！ 他们 会 把 我国 带到 哪里 去 ？ 三 天 之后 ， 全家 震荡 。 徐 姐 患 急性 中毒 性 肠胃炎 ， 住院 并 疑 有 并发 肠胃 癌症 。 奶奶 患 非 甲 非 乙 型 神经性 肝硬化 。 爷爷 自 吃 西餐 后 便秘 ， 爸爸 与 叔叔 两 位 孝子 轮流 侍候 ， 用 竹 筷 粉碎 捅 捣 ， 收效甚微 。 堂妹 患 肠梗阻 ， 腹痛 如 绞 ， 紧急 外科 手术 。 堂妹 夫 牙 痛 烂 嘴角 。 我 妻 每 饭后 必 呕吐 ， 把 西餐 吐 光 后 回 娘家 偷偷 补充 稀饭 咸菜 ， 不 敢 让 儿子 知道 。 尤为 可怕 的 是 ， 三 天 便 花 掉 了 过去 一个 月 的 伙食费 。 儿子 声称 ， 不 加 经费 再 供应 稀 粥 咸菜 亦 属 不可 能 矣 ！ 事 已 至此 ， 需要 我 出面 ， 我 找 了 爸爸 叔叔 ， 提出 应 立即 解除 儿子 的 权柄 ， 恢复 家庭 生活 的 正常化 ！ 爸爸 和 叔叔 只有 去 找 爷爷 ， 爷爷 只有 去 找 徐 姐 。 而 徐 姐 住院 ， 并且 声明 她 出院 以后 也 不再 做饭 了 ， 如果 人们 感到 她 没用 ， 可以 赶走 她 。 爷爷 只得 千 声明 万 表态 ， 绝无 此 意 ， 而且 重申 了 自己 的 人生 原则 。 人生在世 ， 情义 为重 ， 徐 姐 在 我家 ， 情义 俱全 ， 比 爷爷 的 嫡亲 还要 亲 ， 比 爷爷 的 骨肉 还要 近 。 徐 姐 在 我们 这里 一 天 ， 我们 就 与 徐 姐 同甘共苦 一 天 。 哪怕 家里 只 剩 了 一个 馒头 ， 一定 有 徐 姐 的 一 瓣 。 哪怕 家里 只 剩 了 一 碗 凉水 ， 一定 有 徐 姐 的 三 勺 。 发 了 财 有 徐 姐 的 好处 。 受 了 伤 有 徐 姐 的 安置 。 岂 有用 完了 人 又 把 人 蹬 掉 之 理 哉 ！ 爷爷 说 得 激动 ， 慷慨陈词 ， 热泪 横流 。 徐 姐 听 得 仔细 ， 肝胆 俱 暖 ， 涕 泪 交织 。 最后 被 医护 人员 认定 他们 的 接触 不利 于 病人 康复 ， 便 劝说 爷爷 含泪 退 去 。 爷爷 回家 召集 了 全体 会议 ， 声明 自己 年迈 力 衰 ， 对于 吃 什么 怎么 吃 及其 它 有关 事宜 无 成见 ， 更 无意 独揽 大权 ， 但 你们 一定 要 找 我 ， 我 只有 去 找 徐 姐 。 徐 姐 又 因 你们 的 怨言 而 寒 了 心 ， 因 吃重 孙子 的 西餐 ， 而 寒 了 肠胃 ， 我 也 就 无法 再 管 了 ， 谁 爱 吃 什么 吃 什么 吧 。 “ 我 自己 没 得 吃 ， 饿 死 也好 。 ” 爷爷 说 。 大家 面面相觑 ， 纷纷 表态 。 都 说 还是 爷爷 管 得 好 ， 半 个 世纪 ， 老少 平安 ， 四 代 和睦 。 堂妹 妹 表示 她 准备 每天 给 爷爷 做饭 吃 。 就是说 ， 她 、 妹夫 、 爷爷 、 奶奶 、 徐 姐 是 一 组 ， 吃 他们 自身 的 饭 。 爸爸 声明 ， 他 可以 与 妈妈 一 组 ， 但 不管 我 和 妻 。 因为 我 和 妻 有 一个 新潮 儿子 ， 不可 能 与 他们 吃 到 一块儿 。 我 也 声明 只 和 妻 一 搭 。 然后 叔叔 婶婶 一 搭 。 然后 儿子 单 奔 儿 。 堂妹 夫 见状 ， 似乎 相当 满意 ， 发挥 了 一 句 ： “ 各 吃 各 的 吧 ， 这样 才 更 现代 些 ！ 四世同堂 一起 吃饭 ， 太 象 红楼 梦 时 侯 的 事 了 。 再说 ， 太 多 人 围着 一 饭桌 ， 又 挤 ， 又 容易 传染 肝炎 哟 ！ ” 堂妹 反问 ： “ 在 美国 ， 有 这样 的 大家庭 吗 ？ 有 这么 好几 代 人 克服 掉 代沟 一起 吃饭 吗 ？ ” 爷爷 的 表情 似乎 有些 凄然 。 分开 吃 了 两 天 就 吃 不 下 了 。 十 一点 多 ， 堂妹 这 一 组 占 着火 做饭 ， 由于 挟 爷爷 之 资深 威 重 ， 别人 只能 望 火 兴叹 。 然后 爸爸 ， 然后 叔叔 。 然后 我 能 做饭 时 已 是 下午 二时 ， 只好 不 做 先 去 上班 ， 然后 晚饭 同样 是 望 灶 兴叹 。 然后 讨论 计议 论证 各 置 一 灶 的 问题 。 煤气罐 不可 能 ， 上次 为 解决 全家 共用 的 一个 煤气罐 ， 跑 人情 十 四 人次 ， 请客 七 次 ， 送 画 两 张 ， 送 烟 五 条 ， 送 酒 八 瓶 ， 历时 十三 个 月 零 十三 天 ， 用尽 吃 奶 拉屎 之 力 。 买 得 蜂窝 火炉 亦 需 手续 ， 无 证 买 不 到 煤 。 有 证 买 到 了 煤 也 没有 地方 搁 。 如果 按照 现代 意识 设 四 个 灶 ， 首先 要 扩张 厨房 面积 三 十 平方米 ， 当然 最好 是 设立 四 个 厨房 ， 比 最好 更 好 是 增加 五 套房 子 ， 人 的 消费 要求 真 如 脱 僵 野马 ， 怪 道 谈 消费 过 热 ， 愈 谈 愈 热 。 于是 恍然 不 盖房 子 而 谈 现代 意识 观念 更新 隐私 权 云云 全 他妈的 是 站 着 说话 不 腰 疼 的 扯 淡 ！ 分 灶 软科学 没有 研究 出 子丑寅卯 ， 一 罐子 煤气 九天 用 完了 。 自从 今年 液化 石油气 限量 供应 以来 ， 一 年 只有 十 几 个 票 ， 只有 一 罐子 气 用 二 十 五 天 以上 才能 保证 全家 用 熟食 、 饮 开水 。 九天 用 完 ， 一 年 的 票 四 个 月 用 完 ， 另外 八 个 月 找 谁 去 ？ 不但 破坏 了 自己 的 生活 秩序 。 更 是 破坏 了 国家 的 安排 ！ 众人 惊慌 ， 唉声叹气 ， 牢骚 满腹 ， 闲 言 四起 。 有的 说 煤气 用 完 以后 改 吃 生 面糊 糊 。 有的 说 可以 限制 每 组 做饭 时间 十 七 分钟 。 有的 说 现在 就 分 灶 吃饭 是 生产关系 超越 了 生产力 的 发展 水平 。 有的 说 越 改 越 糟 还 不如 爷爷 掌管 徐 姐 当政 。 有的 抨击 美国 ， 说 美国 人 如 禽兽 ， 不 讲 孝 悌 忠 信 ， 当然 没有 大家庭 。 我们 有 优秀 的 家庭 道德 传统 ， 为什么 要 学 美国 呢 ？ 大家 不好意思 也 不忍 再 去 打搅 爷爷 ， 便 不约而同 地 去 找 堂妹 夫 。 堂妹 夫 是 全家 唯一 喝 过 洋 水 之 人 ， 近年来 做 西服 两 套 ， 领带 三 条 ， 赴 美 进修 六 个 月 ， 赴 日 参观 十 天 ， 赴 联邦德国 转 游 过 七 个 城市 。 见多识广 ， 雍容 有度 ， 会 用 九 种 语言 道 “ 谢谢 ” 与 “ 请 原谅 ” ， 是 我家 有 真才实学 之 人 。 只 因 属于 外姓 ， 深知 自己 的 身份 ， 一贯 不 争 不论 不骄不躁 ， 知 白 守 黑 ， 随遇而安 。 故而 深受 敬重 。 这次 见 我们 虔诚 急切 ， 而且 确实 一家 陷入 困难 的 怪圈 ， 他 便 掏 出 心窝子 ， 亮 出 了 真货 色 。 他 说 ： “ 依 我 之 见 ， 咱 家 的 根本 问题 还是 体制 。 吃 不 吃 烤 馒头 片 ， 其实 是 小 问题 。 问题 是 ， 由 谁 来 决定 ， 以 怎样 的 程序 决定 吃 的 内容 ？ 封建 家长制 吗 ？ 论资排辈 吗 ？ 无政府 主义 吗 ？ 随机性 即 谁 想 做 什么 就 吃 什么 吗 ？ 按照 基本上 的 食谱 吃 吗 ？ 必然性 即 先验 性 吗 ？ 要害 问题 在于 民主 ， 缺少 了 民主 吃 了 好 的 也 不觉 得 好 。 缺乏 民主 吃 得 一塌糊涂 却 没有 人 挺身而出 负责 任 从 自身 改革 起 。 没有 民主 就 只能 稀里糊涂 地 吃 ， 吃 白糖 而 不知 其 甜 ， 吃苦 瓜 而 不知 其 苦 ， 甜 与 苦 都 与 你 自己 的 选择 不 相干 嘛 。 没有 民主 就 会 忽而 麻木不仁 ， 丧失 吃饭 的 主体 意识 ， 使 吃饭 主体 异化 为 造 粪 机器 。 忽而 一 团 混乱 ， 各行其是 ， 轻举妄动 ， 急功近利 ， 短期 行为 ， 以邻为壑 ， 使 吃饭 主体 膨胀 为 有 胃 无头 的 妖魔 ！ 没有 民主 就 没有 选择 ， 没有 选择 就 失落 了 自己 ！ ” 大家 听 了 ， 都 觉 如 醍醐灌顶 ， 点头 称 是 不止 。 堂妹 夫 受到 了 鼓舞 ， 继续 说 到 ： “ 论资排辈 ， 在 一个 停滞 的 农业社 会 里 ， 不失为 一 种 秩序 ， 这种 秩序 特别 适合 文盲 与 白痴 。 即使 先天 弱智 者 也 可以 理解 、 可以 接受 这样 一 种 呆板 与 平静 的 ， 我 要说 是 僵死 的 秩序 。 然而 ， 它 扼杀 了 竞争 ， 扼杀 了 人 的 主动性 创造性 变 导 性 ， 而 没有 变 导 就 没有 人类 ， 没有 变 导 我们 就 都 还是 猴子 。 而且 ， 论资排辈 压制 了 新生力量 。 一个 人 精力 最 旺盛 、 思想 最 活跃 、 追求 最 热烈 的 时期 ， 亦 该 是 四 十 岁 以前 。 然而 ， 这个 时候 他们 只能 被 压 在 最 下层 … … ” 我 的 儿子 叹 道 ： “ 太 对 了 。 ” 他 激动 地 流出 了 眼泪 。 我向 儿子 悄悄 摆 了 摆手 。 他 的 西式 早餐 化 纲领 失败 之后 ， 在家 中 的 形象 不 佳 ， 多少 有点 冒险家 、 清 谈 家 、 成事 不足 败 事 有余 甚至 造反派 的 色彩 。 包括 堂妹 与 堂妹 夫 ， 对 吾 儿 也 颇 看 着 不 顺眼 。 他 跳高 了 ， 只能 给 堂妹 夫 帮倒忙 。 我 问 ： “ 你 说 的 对 。 但 我们 到底 怎么办 呢 ！ ” 堂妹 夫 说 ； “ 发扬 民主 ， 选举 ！ 民主 选举 ， 这 就是 关键 ， 这 就是 穴位 ， 这 就是 牵牛 鼻子 ， 这 就是 中心 一 环 ！ 大家 来 竞选 嘛 ！ 每个 人 都 谈谈 ， 好比 都 来 投标 ， 你 收 多少 钱 ， 需要 大家 尽 多少 义务 ， 准备 给 大家 提供 什么样 的 食品 ， 你 个人 需要 什么样 的 待遇 报酬 ， 一律 公开化 、 透明化 、 规范化 、 条文 化 、 法律化 、 程序化 、 科学化 、 制度化 ， 最后 ， 一切 靠 选票 ， 靠 选民 公决 ， 少数 服从 多数 。 少数 服从 多数 ， 这 本身 就是 新 观念 新 精神 新 秩序 ， 既 抵制 僵化 ， 也 抵制 无政府 主义 随心所欲 … … ” 爸爸 认真 思考 了 一大 会儿 ， 脸上 的 皱纹 因 思考 而 变 得 更加 深刻 。 最后 ， 他 表态 说 ： “ 行 ， 我 赞成 。 不过 这里 有 两 道 关口 。 一个 是 老爷子 是 不 是 赞成 ， 一个 是 徐 姐 … … ” 堂妹 说 ： “ 爷爷 那儿 没事 。 爷爷 思想 最新 了 ， 管 伙食 ， 他 也 早 嫌 烦 了 。 麻烦 的 是 徐 姐 … … ” 我 儿子 急 了 ， 他 喊道 ： “ 徐 姐 算是 哪 一家 的 人 五 人 六 ？ 她 根本 不 是 咱们 家 的 成员 ， 她 没有 选举权 与 被选举权 。 ” 妈妈 不 高兴 地 说 ： “ 妈妈 的 孙儿 呀 ！ 你 少 插话 好不 好 ！ 别 看 徐 姐 不 姓 咱们 的 姓 ， 别 看 徐 姐 不 算 咱们 族人 ， 你 说 什么 来着 ？ 说 她 没有 选举权 与 被选举权 是 不 ？ 可 咱们 做 什么 事情 不 跟 她 说 通 了 你 就 甭 想 办 去 ！ 我 来 这个 家 一辈子 了 ， 我 不知 道 吗 ？ 你们 知道 个 啥 ？ ” 堂妹 和 妹夫 也 分化 了 ， 争论 开 了 。 妹夫 认为 ， 承认 徐 姐 的 特殊 地位 ， 就是 不 承认 民主 ， 承认 民主 就 不 能 承认 徐 姐 的 特殊 地位 。 这 是 一个 根本性 的 原则 问题 ， 没有 调和 余地 。 堂姐 认为 ， 敢情 站 着 说话 不 腰 疼 ， 脱离 了 实际 的 空话 高调 有 什么 用 ？ 轻视 徐 姐 就是 不 尊重 传统 ， 不 尊重 传统 也 就 站 不住 脚 ， 站 不住 则 一切 变革 的 方案 便 都 成 了 云端 的 幻想 。 而 云端 的 改革 也 就是 拒 不 改革 。 堂妹 对 自己 的 丈夫 说话 不 客气 ， 她 干脆 指出 ： “ 别 以为 你 出 过 几 趟 国会 说 几 句 外国 话 就 有 什么 了不起 ， 其实 你 在 我们 家 ， 还 没有 徐 姐 要紧 呢 ！ ” 堂妹 夫 听罢 变色 ， 冷笑 一 分 半 钟 ， 拂袖而去 。 过 了 些 日子 ， 还是 叔叔 出来 说话 ， 指出 两 个 关口 其实 是 一个 关口 。 徐 姐 虽然 顽固 ， 但 她 事事 都 听 爷爷 的 ， 爷爷 通 了 她 也 就 通 了 ， 根本 不 需要 人为 地 制造 民主 进程 与 徐 姐 之间 的 激烈 斗争 ， 更 不要 激化 这种 人为 制造 出来 的 斗争 。 大家 一 听 ， 言之有理 。 恍然大悟 。 种种 烦恼 ， 原 是 庸人自扰 。 矛盾 云云 ， 你 说 它 大 它 就 大 ， 你 说 它 小 它 就 小 ， 说 它 有 就 有 ， 说 它 无 就 无 。 寻找 各种 不同 意见 的 契合点 ， 形成 宽松 融洽 ， 亲密无间 ， 这 才 是 真功 夫 ！ 一时 充满 信心 ， 连 堂妹 夫 与 我 儿子 也 都 乐得 合不拢嘴 。 公推 爸爸 叔叔 二 人 去 谈 ， 果然 一 谈 便 通 。 徐 姐 对 选举 十分 反感 ， 说 ： “ 做 这些 花式 子 干吗 ？ ” 但 她 又 表示 ， 她 此次 生病 住院 后 ， 对 一切 事 概 不 介入 ， 概 不 反对 。 “ 你们 大家 吃 苍蝇 我 也 跟着 吃 苍蝇 ， 你们 愿意 吃 蚊子 我 就 跟着 吃 蚊子 ， 什么 事 不用 问 我 。 ” 她 对 自己 有 无 选举权 也 既 不 关心 ， 又 无意 见 ， 她 明确 表示 ， 不 参加 我们 的 任何 家事 讨论 。 看来 徐 姐 已经 自动 退出 了 历史 舞台 ， 大家 公推 由 堂妹 夫 主持 选举 。 选举日 的 临近 给 全家 带来 了 节日 气氛 ， 又是 扫除 ， 有 是 抹 玻璃 ， 又 挂 字画 ， 又 摆 花瓶 和 插入 新 产品 塑料 绢花 。 民主 带来 新 气象 ， 信 然 。 终于 到 了 这 一 天 ， 堂妹 夫 穿 上 了 访问 欧美 时 穿过 的 灰色 西服 ， 戴 上 黑 领结 ， 象 个 交响乐队 的 指挥 ， 主持 这 一 盛事 。 他 首先 要求 参加 竞选 的 人 以 “ 我 怎样 主持 家政 ” 为 题 做 一 演说 。 无人 答应 。 一派 沉寂 。 听 得 见 厨房 里 的 苍蝇 声 。 堂妹 夫 惊奇 道 ： “ 怎么 ？ 没有 人愿 意 竞选 吗 ？ 不 是 都 有 见解 有意 见 有 看法 吗 ？ ” 我 说 ： “ 妹夫 ， 你 先 演说 好不 好 ， 你 做 个 样子 嘛 ！ 现在 大家 还 没有 民主 习惯 ， 怪 不好意思 的 。 ” 堂妹 马上 打断 我 的话 ： “ 别 让 他 说话 ， 又 不 是 他 的 事 ！ ” 堂妹 夫 态度 平和 ， 富有 绅士 派头 地 解释 说 ： “ 我 不 参加 竞选 。 我 提出 来 搞 民主 的 意思 可不 是 为了 个人 争权 。 如果 你们 选 了 我 ， 就 只能 是 为 民主 抹黑 了 ！ 再说 ， 我 现在 正 办 自费 留学 ， 已经 与 北美洲 大洋洲 几 个 大学 联系 好 了 ， 只 等 在 黑市 上 换 够 了 美元 ， 我 就 与 各位 告辞 了 。 各位 如果 有 愿意 帮 我 垫 借 一些 钱 的 ， 我 十分 欢迎 ， 现在 借 的 时候 是 人民币 ， 将来 保证 还 外币 ！ 这个 … … ” 面面相觑 ， 全都 泄 了 气 。 而且 不约而同 地心 中 暗想 ： 竞选 主持 家政 ， 不 是 吃 饱 了 撑 的 吗 ？ 自己 吹 一 通 ， 卖 狗皮膏药 ， 目无 长上 而 又 伤害 左邻右舍 ， 这样 的 圈套 ， 我们 才 不 钻 呢 ？ 真 让 你 主持 ？ 你 能 让 人人 满意 吗 ？ 有 现成饭 不 吃 去 竞选 ， 不 是 吃 错 了 药 又是 什么 ？ 便 又 想 ， 搞 啥子 民主 选举 哟 ： 几 十 年 没有 民主 选举 我们 也 照旧 吃 稀饭 ， 咸菜 ， 炸 酱 面 ！ 几 十 年 没有 民主 选举 我们 也 没有 饿 死 ， 没有 撑 死 ， 没有 吃 砖头 喝 狗 尿 ， 也 没有 把 面条 吃 到 鼻子 眼 屁股 眼里 ！ 吃 饱 了 撑 的 闹 他 爷爷 的 民主 ， 最后 闹 他 个 拉稀 的 拉稀 ， 饿 肚 的 饿 肚 完事 ！ 中国人 就是 这样 ， 不 折腾 浮肿 了 绝不 踏实 。 但 既然 说 了 民主 就 总 要 民主 一下 。 既然 说 了 选 了 就 总 要 选举 一下 。 既然 凑 到 一起 了 而且 爷爷 也 来 了 就 总 要 行礼 如 仪 。 而且 ， 谁 又 能 说 民主 选举 一定 不好 呢 ？ 万一 选 好 了 ， 从此 吃 得 又 有 营养 又 合 味 ， 又 滋 阴 又 壮 阳 ， 又 益 血 又 补 气 ， 既 增强 体质 又 无损 线条 与 萧 洒 ， 既 有色 又 有 香 又 有味 ， 记 省 菜 钱 又 节约 能源 ， 既 合乎 卫生 标准 又 不 多 费 手续 ， 既 无 油烟 又 无 噪音 ， 既 人人 有 权 过问 又 个个 不 伤脑筋 ， 既 有 专人 负责 又 不独 断 专 行 ， 既 不 吃剩 饭 又 绝不 浪费 粮食 ， 既 吃 蚶 子 又 不得 肝炎 ， 既 吃 鱼虾 又 不 腥气 … … 如此 等等 ， 民主 选举 的 结果 如果 能 这 等 好 ， 看 哪个 天 杀 的 不 赞成 民主 选举 。 于是 开始 选举 。 填写 选票 ， 投票 ， 监票 计票 。 发出 票 十 一 张 ， 收回 票 十 一 张 ， 本次 投票 有效 。 白 票 四 张 ， 即 未 写 任何 候选人 。 一 张 票 写 着 ： 谁 都行 ， 相当 于 白 票 。 计 白 票 五 张 。 选 徐 姐 的 ， 两 票 。 爷爷 三 票 。 我 儿子 ， 一 票 。 怎么办 ？ 爷爷 得 票 最 多 ， 但 不 是 半数 ， 也 不 是 三 分之 一 。 算 不 算 当选 ？ 事先 没 说 。 便 请教 堂妹 夫 。 堂妹 夫 说 世上 有种 “ 法 ” ， 一 种 是 成文法 一 种 是 不成文法 。 例如 美国 总统 的 连任 期 ， 宪法 并 无 规定 ， 实际上 又是 法 ， 因为 大家 都 如此 做 。 民主 的 基本 概念 是 少数 服从 多数 。 何谓 多数 ？ 相对 多数 ？ 简单 多数 （ 即 二分 之一 以上 ） ？ 绝对 多数 （ 即 三 分之 二 以上 ） ？ 这 要 看 传统 ， 也 要 看 观念 。 至于 我们 这次 的 选举 ， 由于 是 初次 试行 ， 又 都 是 至亲 骨肉 父子 兄弟 自己人 ， 那 就 大家 怎么 说 怎么 好 。 堂妹 说 既然 爷爷 得 票 最 多 自然 是 爷爷 当选 ， 这 已经 不 是 也 绝对 不可 能 是 封建 家长 意识 而是 现代 民主 意识 。 堂妹 进一步 发挥 说 ， 在 我们 家 ， 封建 家长 意识 的 问题 其实 并不 存在 ， 更 不 是 主要 危险 ， 主要矛盾 。 需要 警惕 的 倒是 在 反 封建 的 幌子 下 的 无政府 主义 、 自由主义 、 自我 中心 、 唯我主义 、 超前 消费 主义 、 享乐主义 ， 美国 的 月亮 比 中国 圆 主义 ， 洋教 条 主义 。 我 的 儿子 突然 激动 起来 ， 他 严正 地 宣布 ， 他 所 获得 的 一 票 ， 并非 自己 投 了 自己 的 。 他 说 到 这里 ， 我 只 觉 的 四周 目光 向 我 集中 ， 似乎 是 我 选 了 儿子 ！ 我 搞 了 选人 唯 亲 的 不正之风 。 我 的 脸 刷 地 红 起来 ， 并 想 谁 会 这样 想 ？ 他 为什么 这样 想 ？ 他 知不知道 我 并 没有 选 儿子 而且 即使 选 了 儿子 也 不 是 什么 不正之风 ， 因为 不 选 儿子 我 也 只能 选 父亲 选 叔叔 选 母亲 选 妻子 选 堂妹 ， 而 按照 时髦 的 弗 洛 伊 德 学说 ， 堂妹 又 何曾 会 比 儿子 生分 ？ 儿子 说不定 还有 杀 父 娶 母 的 俄 狄 浦 斯 情结 呢 他们 知道 吗 ？ 为什么 儿子 一 说话 他们 都 琢磨 我 呢 ？ 我 的 儿子 喊 起来 了 ， 他 说 他 得了 一 票 说明 人心 未 死 火种 未 绝 ， 烈火 总 将 熊熊 燃烧 。 他 说 他 之所以 要 关心 我家 的 膳食 改革 ， 完全 出自 一 种 无私 的 奉献 精神 ， 出自 对 传统 的 人民 主义 的 珍视 和 对 每 一个 人 的 泛 爱 。 说 到 爱 他 眼角 里 渗出 了 黄豆 大 的 泪珠 。 他 说 我们 家 虽然 有 秩序 但是 缺乏 爱 。 而 无 爱 的 秩序 正如 无 爱 的 婚姻 ， 其实 是 不道德 的 。 他 说 其实 他 早就 可以 脱离 摆脱 我家 膳食 系统 的 羁绊 ， 他 可以 走 自己 的 路 改 吃 蜗牛 吃 干酪 吃 芦笋 金枪鱼 吃 龙虾 吃 小 牛肉 吃 肯 德 基 烤 鸡 三明治 麦 当 劳 与 苹果 派 桂皮 冰淇淋 布丁 。 他 说 他 非常 爱 自己 的 姑姑 但是 他 不 能 接受 姑姑 的 观点 ， 虽然 姑姑 的 观点 听 起来 很 让 人 舒服 顺耳 。 这时 叔叔 插话 说 （ 注意 ， 是 插话 而 不 是 插嘴 ， 插嘴 是 不 礼貌 的 ， 插话 却 是 一 种 亲切 、 智慧 、 民主 ， 干脆 说是 一 种 抬举 。 ） 堂妹 关于 当前 应 警惕 的 主要矛盾 与 主要 危险 的 提法 不符 ， 与 正式 的 提法 不符 。 恐怕 最好 不要 过分 强调 某 一面 的 问题 是 主要 危险 。 因为 半 个 世纪 行医 的 经验 已经 证明 ， 如果 你 指出 便秘 是 主要 危险 ， 就 会 引起 普遍 拉稀 ， 并 导致 泻药 的 脱销 与 对 医生 的 逆反心理 。 反之 ， 如果 你 指出 泻 肚 是 主要 危险 就 会 引起 普遍 的 直肠 干燥 ， 并 导致 痔疮 的 诱发 乃至 因为 上火 而 导致 打架 。 火气 火气 ， 气 由 火 生 ， 火 需 水 克 。 五行 协调 ， 方 能 无 病 。 所以 ， 既 要 防 便秘 也 要 防 拉稀 。 便秘 不好 拉稀 也 不比 便秘 好 。 便秘 了 就 治 便秘 拉稀 了 就 治 拉稀 。 最好 是 既 不便 秘 也 不 拉稀 。 他 讲 得 这样 好 恍惚 获得 了 几 许 掌声 。 鼓 完了 掌 才 发现 问题 没有 解决 。 而 由于 热烈 的 讨论 五行 生 克 及 新陈代谢 的 进程 似乎 受到 了 促进 ， 人人 都 饿 了 。 便 说 既然 爸爸 得 票 多 还是 爸爸 管 吧 。 爸爸 却 不 赞成 。 他 说 做饭 的 问题 其实 是 个 技术 问题 而 不 是 思想 问题 、 观念 问题 、 辈分 （ 级别 ） 问题 、 职务 问题 、 权力 问题 、 地位 问题 与 待遇 问题 。 因此 ， 我们 不 应该 选举 什么 领导人 ， 而是 评选 最佳 的 炊事员 ， 一切 看做 饭 烧火 炒菜 的 技术 。 我 儿子 表示 欢呼 ， 大家 也 感觉 确实 有 了 新 的 思路 ， 新 的 突破口 ， 别人 则 表示 今天 已经 没有 时间 ， 肚子 已经 饿 了 。 尽管 由 谁 来 管理 吃饭 的 问题 还 处在 研讨 、 论证 的 过程 中 ， 到 了 钟点 ， 饭 却 仍然 是 照 吃 不 误 。 讨论 得 有 结果 要 吃饭 ， 讨论 得 没有 结果 也 还是 要 吃饭 。 拥护 讨论 的 结果 要 吃饭 ， 反对 讨论 的 结果 也 还是 要 吃饭 。 让 吃饭 ， 要 吃饭 ， 不 让 吃饭 ， 也 还是 要 吃饭 。 于是 … … 纷纷 自行 吃饭 去 了 。 为了 评比 炊事 技艺 ， 设计 了 许多 程序 ， 包括 ： 每人 要 蒸 馒头 一 屉 ， 做 米饭 一 锅 ， 炒 鸡蛋 两 个 ， 切 咸菜 丝 一 盘 ， 煮 稀饭 一 碗 ， 做 红烧 肘子 一 盘 等等 。 为了 设计 这 一 程序 ， 我们 全家 进行 了 三 十 个 白天 三 十 个 夜晚 的 研讨 。 有 争论 、 冲动 、 吵架 、 落泪 也 有 和好 。 最后 累 的 气 也 喘 不 出 ， 尿 也 尿 不 出 ， 走路 也 走 不 动 。 既 伤 了 和气 ， 又 增长 了 团结 交流 了 思想 感情 。 既 累 了 精神 ， 又 引起 了 较 大 的 兴趣 。 说 起 要 炒 两 个 鸡蛋 的 时候 ， 人们 笑 得 前仰后合 ， 好 象 受到 了 某种 神秘 的 暗示 性 的 鼓舞 。 说 到 切 咸菜 的 时候 ， 人们 忧心 的 阴 阴沉沉 ， 好 象 一下 子 衰老 了 许多 。 终于 最后 归根结底 ， 炊事 技艺 评 出来 了 。 评 的 结果 十分 顺 通 ， 谁 也 没有 说话 。 评 的 结果 名次 是 ： 一等 一级 ， 爷爷 、 奶奶 。 一等 二级 ， 父亲 、 母亲 、 叔叔 、 婶婶 。 二等 一级 ， 我 ， 妻 ， 堂妹 ， 堂妹 夫 。 三等 一级 ， 是 我 那 瘦 高挑 的 儿子 。 大家 又 怕 儿子 受到 打击 ， 便 一致 同意 儿子 虽 是 三等 ， 却 要 颁 给 他 “ 希望 之 星 特别 荣誉奖 ” 。 虽然 他 又 有 特别 荣誉 又 成 了 “ 希望 之 星 ” ， 但 他 仍然 是 三等 。 总之 ， 理论 名称 方法 常 新 ， 而 秩序 ， 是 永恒 的 。 许多 时日 过去 了 。 人们 模模糊糊 地 意识 到 ， 既然 秩序 永恒 ， 理论 名称 方法 的 研讨 实验 便 会 自然 降温 。 做饭 与 吃饭 问题 已 不再 引起 分歧 的 意见 与 激动 的 情绪 。 做饭 与 吃饭 究竟 是 技术 问题 体制 问题 还是 文化观 念 问题 还是 其它 别样 的 过去 想 也 没 想 过 的 问题 ， 也 不再 困扰 我们 的 心 。 看来 这些 问题 不 讨论 也 可以 照样 吃饭 。 徐 姐 平安 地 去世 了 ， 无 疾 而 终 。 她 睡 了 一个 午觉 ， 一直 睡 到 下午 四点 还 不 醒 ， 去 看 她 ， 已 停止 了 呼吸 。 全家人 都 怀念 她 尊敬 她 追悼 她 。 儿子 到 中外合资 企业 工作 去 了 ， 他 可能 已经 实现 了 天天 吃 黄油 面包 和 一大 堆 动物性 蛋白质 的 理想 。 节假日 回家 ， 当 我们 征询 他 对于 吃 什么 的 意见 的 时候 ， 他 说 各种 好 的 都 吃 过 了 ， 现在 想 吃 的 只有 稀饭 与 腌 大头菜 ， 还有 高汤 和 炸 酱 面 。 说 完了 ， 他 自我 解嘲 说 ： 观念 易 改 ， 口 胃 难 移 呀 ！ 叔叔 与 婶婶 分 到 了 新 落成 的 单元楼 房 ， 搬走 了 。 他们 没有 管道 煤气 与 抽风 换气扇 孔 的 厨房 ， 在 全新 的 厨房 里 做饭 ， 做 过 红烧 肘子 ， 也 做 过 炒 鸡蛋 ， 但 他们 说 更 经常 地 仍然 是 吃 稀饭 ， 烤 馒头 片 ， 腌 大头菜 ， 高汤 ， 炸 酱 面 。 堂妹 夫 终于 出国 “ 深造 ” ， 一面 留学 一面 就业 了 ， 他 后来 接 走 了 堂妹 ， 并 来信 说 ： “ 在 国外 ， 我们 最 常 吃 的 就是 稀饭 咸菜 ， 一 吃 稀饭 咸菜 就 充满 了 亲切 怀念 之 情 ， 就 不再 因为 身 在 异乡 异国 而 苦闷 就 如同 回到 了 我们 的 亲切 朴质 的 家 。 有 什么 办法 呢 ？ 也许 我们 的 细胞 里 已经 有 了 稀饭 咸菜 的 遗传 基因 了 吧 ？ ” 我 ， 爸爸 和 爷爷 幸福 地 生活 在 一起 。 我们 吃 的 鸡 鸭 鱼肉 蛋 奶糖 油 都 在 增加 ， 我们 都 胖 了 。 我们 饭桌 上 摆 的 菜肴 愈来愈 丰富多彩 和 高档化 了 。 有 过 炒 肉片 也 有 过 葱 炒 海参 。 有 过 油炸 花生米 也 有 过 奶油 炸糕 。 有 过 凉拌 粉皮 也 有 过 蟹肉 沙 拉 甚至 还 吃 过 一 次 鲍鱼 鲜 贝 。 鲍鱼 来 了 又 去 了 ， 海参 上 了 又 下 了 ， 沙 拉 吃 了 又 忘 了 。 只有 稀饭 咸菜 永 存 。 即使 在 一 顿 盛宴 上 吃 过 山珍海味 ， 这 以后 还要 加 吃 稀饭 咸菜 。 然后 口腔 食道 肠胃 肝 脾 胰腺 才能 稳定 正常 地 运转 。 如果 忘 了 加 稀饭 咸菜 ， 马上 就 会 肚子 胀 肚子 痛 。 也许 还 会长 癌 。 我们 至今 未 患 肠胃 癌 ， 这 都 是 稀饭 咸菜 的 功劳 啊 ！ 稀饭 和 咸菜 是 我们 的 食品 的 不可 改变 的 纲 。 其它 只是 配搭 －－ 陪衬 ， 或者 叫做 “ 目 ” 。 徐 姐 去世 以后 ， 做饭 的 重任 落 到 妈妈 头 上 。 每 顿 饭 以前 ， 妈妈 照例 要 去 问 爷爷 奶奶 。 “ 汤 呢 ， 就 做 了 吧 ， 就 不 做 了 吧 。 肉 呢 ？ 切 成 肉片 还是 肉丝 ？ ” 古老 的 问题 既 忠诚 又 伤感 。 是 一 种 程序 更 是 一 种 道德 情绪 。 在 这种 表面 平淡 乃至 空洞 的 问答 中 寄托 了 对 徐 姐 的 怀念 ， 大家 感到 徐 姐 虽 死 犹 生 ， 风范 常 存 。 爷爷 屡次 表示 只要 有 稀饭 ， 咸菜 ， 烤 馒头 片 与 炸 酱 面 ， 做 不 做 汤 的 问题 ， 肉片 与 肉丝 的 问题 以及 加 什么 高级 山珍海味 的 问题 ， 他 不准 备 过问 ， 也 希望 妈妈 不要 用 这种 愈来愈 难 拍板 的 问题 去 打搅 他 。 妈妈 唯唯 。 但 不问 总 觉得 心里 不 踏实 。 饭 做 熟 了 ， 唤 了 大家 来 吃 ， 却 要 东张西望 如坐针毡 ， 揣摩 大家 特别 是 爷爷 的 脸色 。 爷爷 咳嗽 ， 妈妈 就要 小声 嘟囔 ， 是 不 是 稀饭 里 有 了 沙子 呢 ？ 是 不 是 咸菜 不够 咸 或者 过于 咸 了 呢 ？ 小声 嘟囔 却 又 不 敢 直截了当 地 征求 意见 。 虽然 ， 即使 问 过 爷爷 也 不 能 保证 稀饭 里 不 掺沙子 。 于是 ， 再 一 天 ， 妈妈 还是 要 在 黄昏 将 临 的 时候 忠 顾 地 －－ 由于 自觉 罗 嗦 而 分外 诚惶诚恐 地 去 问 爷爷 －－ 肉片 还是 肉丝 ？ 问话 的 声调 委婉 动人 。 而 爷爷 答话 的 声调 呢 ？ 叫作 慈祥 苍劲 。 即使 是 回答 ： 不要 问 我 。 ” 也 总算 有 回答 。 妈妈 就 会心 安 理 得 地 去 完成 她 的 炊事 。 一 位 英国 朋友 －－ 爸爸 四 十 年代 的 老友 来华 旅行 ， 在 我们 家 住 了 一个 星期 。 最初 ， 我们 专门 请 了 一 位 上海 来 的 西餐 厨师 给 他 做 面包 蛋糕 忌 司 牛排 。 英国 朋友 直率 地 说 ： “ 我 不 是 为 吃 西餐 或者 名 为 西餐 实际上 四不象 的 东西 而 来 的 ， 把 你们 的 具有 古老 传统 和 独特 魅力 的 饭 给 我 弄 一点 吃 吧 ， 求求 你们 了 ， 行 不行 ？ ” 怎么办 呢 ？ 只好 很 不好意思 地 招待 他 吃 稀饭 和 咸菜 。 “ 多么 朴素 ！ 多么 温柔 ！ 多么 舒服 ！ 多么 文雅 … … 只有 古老 的 东方 才 有 这样 神秘 的 膳食 ！ ” 英国 博士 赞叹 着 。 我 把 他 的 称赞 稀饭 咸菜 的 标准 牛津 味儿 的 英语 录 到 了 “ 盒 儿 带 ” 上 ， 放 给 瘦 高挑 儿子 听 。 
0000000e SUBDIR index ChSeg CXX g LD g INCDIR TOPDIR include OBJS HzSeg o Dict o EXECS ExSeg ExSegUrl CXXFLAGS c ifeq DEBUG y CXXFLAGS g Wall else CXXFLAGS O2 endif CXXFLAGS I INCDIR 
0000000f Dict handling include Dict h CDict CDict OpenDict CDict CDict mapDict clear void CDict OpenDict FILE fpDict if fpDict fopen DICTFILENAME c str r NULL cout Can not open the Dictionary file exit 1 int id freq char word 16 while fscanf fpDict d s d id word freq EOF fscanf fpDict d s d id word freq mapDict insert map string int value type word 0 fclose fpDict bool CDict IsWord string str const if mapDict find str mapDict end return true return false 
00000010 TOPDIR shell pwd include TOPDIR Rules make PHONY all clean all EXECS ExSeg ExSeg o OBJS LD o ExSeg ExSegUrl ExSegUrl o OBJS LD o ExSegUrl clean rm f o EXECS core seg 
00000011 HzSeg handling include HzSeg h include Dict h const unsigned int MAX WORD LENGTH 8 const string SEPARATOR delimiter between words CHzSeg CHzSeg CHzSeg CHzSeg Using Max Matching method to segment a character string string CHzSeg SegmentHzStrMM CDict dict string s1 const string s2 store segment result while s1 empty unsigned int len s1 size if len MAX WORD LENGTH len MAX WORD LENGTH string w s1 substr 0 len the candidate word bool isw dict IsWord w while len 2 isw false if not a word len 2 cut a word w w substr 0 len isw dict IsWord w s2 w SEPARATOR s1 s1 substr w size return s2 process a sentence before segmentation string CHzSeg SegmentSentenceMM CDict dict string s1 const string s2 unsigned int i len while s1 empty unsigned char ch unsigned char s1 0 if ch 128 deal with ASCII i 1 len s1 size while i len unsigned char s1 i 128 s1 i 10 s1 i 13 LF CR i if ch 32 ch 10 ch 13 SP LF CR s2 s1 substr 0 i SEPARATOR else if ch 10 ch 13 s2 s1 substr 0 i if i s1 size added by yhf s1 s1 substr i else break yhf continue else if ch 176 中文 标点 等 非 汉字 字符 i 0 len s1 length while i len unsigned char s1 i 176 unsigned char s1 i 161 unsigned char s1 i 161 unsigned char s1 i 1 162 unsigned char s1 i 1 168 unsigned char s1 i 161 unsigned char s1 i 1 171 unsigned char s1 i 1 191 unsigned char s1 i 163 unsigned char s1 i 1 172 unsigned char s1 i 1 161 unsigned char s1 i 1 168 unsigned char s1 i 1 169 unsigned char s1 i 1 186 unsigned char s1 i 1 187 unsigned char s1 i 1 191 i i 2 假定 没有 半 个 汉字 if i 0 i i 2 不 处理 中文 空格 if ch 161 unsigned char s1 1 161 if i s1 size yhf 其他 的 非 汉字 双 字节 字符 可能 连续 输出 s2 s1 substr 0 i SEPARATOR else break yhf if i s1 size yhf s1 s1 substr i else break yhf continue 以下 处理 汉字 串 i 2 len s1 length while i len unsigned char s1 i 176 while i len unsigned char s1 i 128 unsigned char s1 i 161 i 2 s2 SegmentHzStrMM dict s1 substr 0 i if i len yhf s1 s1 substr i else break yhf return s2 translate the encoded URL xx to actual chars void CHzSeg Translate char SourceStr const int i 0 int j 0 char tempstr tempchar1 tempchar2 tempstr char malloc strlen SourceStr 1 if tempstr NULL return while SourceStr j if tempstr i SourceStr j ' ' if SourceStr j 1 'A' tempchar1 SourceStr j 1 0xdf 'A' 10 else tempchar1 SourceStr j 1 '0' if SourceStr j 2 'A' tempchar2 SourceStr j 2 0xdf 'A' 10 else tempchar2 SourceStr j 2 '0' tempstr i tempchar1 16 tempchar2 j j 2 i j tempstr i ' 0' strcpy SourceStr tempstr if tempstr free tempstr segment the image URL by ' ' omit the domain name string CHzSeg SegmentURL CDict dict string url const string size type idx nidx char curl char url c str this Translate curl url curl if idx url find http 0 string npos if nidx url find 7 string npos url url substr nidx 1 cut the part of sitename idx 0 while idx url find idx string npos url replace idx 1 SEPARATOR replace with SEPARATOR idx 3 if idx url rfind string npos url url erase idx erase the file extension url segment the string whose length is greater than 8 4 HZ chars idx 0 nidx 0 bool isover false string stmp while isover if nidx url find SEPARATOR idx string npos isover true if nidx idx 0 stmp url substr idx nidx idx stmp SegmentSentenceMM dict stmp if stmp size 3 stmp erase stmp length 3 erase the tail url url replace idx nidx idx stmp idx stmp length 3 else if nidx string npos idx url length stmp url substr idx stmp SegmentSentenceMM dict stmp stmp erase stmp length 3 url url substr 0 idx stmp else idx nidx 3 return url 
00000012 demonstart using HzSeg include iostream include string include fstream include Dict h include HzSeg h using namespace std CDict iDict int main int argc char argv if argc 2 cout Usage HzstrSeg filename endl exit 0 string FileName argv 1 ifstream fin FileName c str ofstream fout FileName seg c str string line CHzSeg iHzSeg segment instance while getline fin line line iHzSeg SegmentSentenceMM iDict line fout line endl fin close fout flush fout close return 0 
00000013 ifndef HZSEG H 040415 define HZSEG H 040415 include iostream include string include fstream include Dict h using namespace std class CHzSeg public CHzSeg CHzSeg string SegmentSentenceMM CDict string const string SegmentHzStrMM CDict string const string SegmentURL CDict string const process a sentence before segmentation void Translate char SourceStr const endif HZSEG H 040415 
00000014 他们 两 人 有意 见 分歧 。 氧原子 结合 成分 子 时会 释放 出 能量 。 明年 地铁 中将 可以 使用 移动 电话 。 北京大学 毕业生 不 看重 大城 市 户口 。 10 年 是 一 段 很 长 的 时间 。 11 月 3 日 晚 ， 世界 产业工人 协会 的 战术 生效 了 。 1903 年 莱 特 兄弟 的 发明 被 忽视 了 ， 而 不 是 获得 了 赏识 。 1916 年 5 月 21 日 星期日 夜晚 ， 日本 最 大 的 火山 爆发 了 。 1940 年 ， 爱因斯坦 成为 一 名 美国 公民 。 1949 年 10 月 1 日 ， 毛 主席 宣布 了 中华 人民 共和国 的 诞生 。 1967 年 他 第一 次 遇到 她 时 ， 她 的 头发 是 灰白 的 。 1977 年 他 在 巴黎 遇见 她 。 1979 年 每 一 选举人 只 准 投 一个 候选人 的 票 。 1979 年 是 我 儿子 出生 的 一 年 。 1991 年 ， 感染 霍乱 的 病人 多 达 3026 人 ， 其中 440 人 死亡 。 1992 年 是 我们 艰苦 拼搏 的 一 年 。 1997 年 是 李 素 丽 最 难忘 的 一 年 。 1 月 26 日 被 定 为 澳大利亚 国庆节 。 “ 王 ” 字 的 笔画 有 四 个 。 《 战争 与 和平 》 是 我 读 过 的 书 中 最 长 的 一 本 。 啊 ， 这 是 多么 美妙 的 前景 ！ 阿 珍 她们 吃 完 饭 散步 去 了 。 爱国 一家 ， 爱国 不 分 先后 。 爱因斯坦 的 引力 定律 在 一 次日 蚀 期间 得到 了 检验 。 安 不 会 游泳 ， 是 吗 ？ 安 不 在 学 音乐 ， 是 吗 ？ 安 德 鲁 被 送 到 特为 聋人 办 的 学校 去 了 。 安 德 鲁 邀请 她 一起 开车 出去 玩 。 安 的 孩子 们 整天 都 上学 ， 所以 她 决定 去 找 个 工作 。 安定团结 是 实现 四 个 现代化 的 前提 。 安 给 他 一 本书 。 安 没 得到 彩电 ， 是 吗 ？ 安 劝 我 读 那 本书 。 安 在 农村 小屋 已经 住 了 六 十 年 ， 她 不 想 搬 到 楼房 去 住 。 安葬 他 的 地方 很 美 。 安装 灯 的 人 是 我 的 同学 。 安 自己 打开 了 门 。 安 昨天 不可 能 看见 汤 姆 。 安 昨天 可能 没 看见 汤 姆 。 按 公制 度量 它 是 多少 ？ 案子 的 线索 断 了 。 澳大利亚 大陆 最 早 是 在 16 世纪 由 葡萄牙 人 发现 的 。 澳大利亚 是 世界 上 最 大 的 岛 。 八 成 他 不 来 了 。 八点 时 ， 他 正在 吃 早饭 。 八 减 三 得 五 。 八月 份 物价 将 上涨 。 把 东西 清理 干净 把 工作 分成 三六九等 是 错误 的 。 把 孩子 们 送 上 床 后 ， 她 开始 改 学生 的 卷子 。 把 花盆 搬 到 外面 去 。 把 画 挂 到 墙上 ！ 把 火 拔 一 拔 把酒 注 到 瓶 里 。 把 卷子 交 上来 ！ 把 课文 再 读 一 遍 ！ 把 脸 转 到 这边 来 把 龙头 打开 把 乱七八糟 的 东西 清理 干净 把 那 本书 扔 给 我 把 那 本 杂志 扔 给 我 把 你 的 名字 告诉 我 把 你 的 衣服 挂 起来 把 瓶子 放在 桌上 。 把 其余 的 吃 的 留 到 明天 。 把 全部 情况 告诉 她 把 身子 探 出 窗外 是 很 危险 的 。 把 绳子 再 放松 点儿 。 把 失败 都 归咎 于 客观 原因 是 不 正确 的 。 把 收音机 开 小 点儿 ， 别 干扰 人家 。 
00000015 在 海湾 大学生 活像 白纸 
00000016 ELF   4 Xv 4 4 4   4               XG XG P         W 雷 雷         P t dDF D   D   lib ld linux so 2 GNU C N G 7 M J 3 6 C ' K 2 I D L B 5 A F H 8 4 1 0 9 E        O       A 2 纲            j      H   n  I    2 G h   j   D       h       G     H L   E     p l   I   X       l           0                u     E 汹              嘹     N     T   Q L   H       l   m        4 Z    o  I       '          o           8   X       L   S           l   9       j    n                  m    q  x d        9    7       0 libstdc so 5 ZNSt24 default alloc templateILb1ELi0EE8allocateEj ZTTSt14basic ifstreamIcSt11char traitsIcEE ZNSt9basic iosIcSt11char traitsIcEE4initEPSt15basic streambufIcS1 E ZStlsISt11char traitsIcEERSt13basic ostreamIcT ES5 PKc cxa rethrow pthread create ZNSt13basic filebufIcSt11char traitsIcEEC1Ev ZTVSt13basic filebufIcSt11char traitsIcEE ZNSs4 Rep11 S terminalE ZNSs10 M replaceIPKcEERSsN9 gnu cxx17 normal iteratorIPcSsEES6 T S7 St18input iterator tag ZNSt13basic filebufIcSt11char traitsIcEE5closeEv ZNSs4 Rep10 M disposeERKSaIcE ZNSsC1ERKSs ZNSo5flushEv ZNSs15 M replace safeIN9 gnu cxx17 normal iteratorIPcSsEEEERSsS3 S3 T S5 ZNSsC1IPKcEET S2 RKSaIcE ZTVSt14basic ifstreamIcSt11char traitsIcEE ZNKSs4findEPKcjj ZNSt13basic filebufIcSt11char traitsIcEE4openEPKcSt13 Ios Openmode ZTTSt14basic ofstreamIcSt11char traitsIcEE ZNSs6assignERKSs ZNSolsEPFRSoS E ZNSt9basic iosIcSt11char traitsIcEED2Ev ZSt20 throw length errorPKc cxa end catch ZNSt12 basic fileIcED1Ev ZNSs7replaceEjjPKcj ZSt7getlineIcSt11char traitsIcESaIcEERSt13basic istreamIT T0 ES7 RSbIS4 S5 T1 ES4 gxx personality v0 ZNSs4 Rep9 S createEjRKSaIcE ZNSs4 Rep11 S max sizeE ZNKSs5rfindEPKcjj ZNSt8ios baseC2Ev ZNSs9 M mutateEjjj ZNSs20 S empty rep storageE ZNKSt9basic iosIcSt11char traitsIcEE5widenEc ZNSt6localeD1Ev ZNSt8ios base4InitC1Ev ZNSt15basic streambufIcSt11char traitsIcEED2Ev ZSt19 throw logic errorPKc ZNSoD2Ev ZNSs6appendERKSs ZNSsC1EPKcRKSaIcE ZNSt13basic filebufIcSt11char traitsIcEED1Ev ZNSt24 default alloc templateILb1ELi0EE10deallocateEPvj ZNSs12 M leak hardEv ZNSsC1ERKSsjj ZNSt8ios base4InitD1Ev ZTVSt15basic streambufIcSt11char traitsIcEE ZNSt8ios baseD2Ev cxa begin catch ZTVSt9basic iosIcSt11char traitsIcEE ZNSiD2Ev ZSt4endlIcSt11char traitsIcEERSt13basic ostreamIT T0 ES6 ZSt4cout ZNSs15 M replace safeIPKcEERSsN9 gnu cxx17 normal iteratorIPcSsEES6 T S7 ZTVSt14basic ofstreamIcSt11char traitsIcEE ZNSt9basic iosIcSt11char traitsIcEE5clearESt12 Ios Iostate ZSt20 throw out of rangePKc Jv RegisterClasses ZStlsIcSt11char traitsIcESaIcEERSt13basic ostreamIT T0 ES7 RKSbIS4 S5 T1 E ZNSs4 Rep10 M destroyERKSaIcE gmon start ZNSs6appendEPKcj libm so 6 libgcc s so 1 Unwind Resume libc so 6 strcpy memmove fscanf memcpy malloc cxa atexit fclose fopen IO stdin used libc start main free GCC 3 0 GLIBC 2 1 GLIBC 2 0 GLIBC 2 1 3 CXXABI 1 2 GLIBCPP 3 2   P y D   ii L ii V s i 爷 k l r w 促 L 纲 H   X     汹 嘹     C   H   J 特 胸 载 刎 茇 嘭 湄 柝 熵 鹭 糌                           0   4   8   '     D   H   L   P   T   X     0   1 d   2 h   3 l   4 p   5 t   6 x   7   8  9       A  D  E べ F ㄙ I  K 百 M U   栳    擅 5 呢   蓉   特 h 猷   胸 h 樾   载 h 槔   刎 h 榘   茇 h    嘭 h    湄 h0    柝 h8 p   熵 h     鹭 hH P   糌 hP      hX 0    h       hh       hp       hx 轲     h   猷     h   樾     h   槔     h   榘     h        h        h        h   p     h       0   h   P   4   h       8   h   0     h         h       D   h       H   h   轲   L   h 猷   P   h 樾   T   h 槔   X   h 榘     h      h    d   h0    h   h8 p   l   h     p   hH P   t   hP     x   hX 0     h      hh      hp      hx 轲    h   猷    h   樾    h   槔    h   榘    h       h      べ h      ㄙ h   p    h       百 h   P  1     P TRh 炷 hT   QVh       U  SP    v     t      U     h   u        t               u 肫 h   擅  U   〖    t    t  h 钾   f   擅  U  WVS      6 V E P E p u V     E               d   在     8  P   P Y ∝      j       P R               d    8  x        X Z    S   P D     j WS h      E  V M Q    1 揽      虍 餮  IQh   E P 璎   E              u  w         P   P Y       j       P R            熠         5  X Z    S   P a     j0VS       8 U  J  x       B               M Q  x      枭 Y j       H Q      纠 PV    P     B    1 吟  J    V  X   h  S 瑭     Sht   E P W 桄   V 柰   h     J 舾     B    R  X   J 舾     B     hL    V    R       P K        H  P Q V     肱   H  P Q A        剥  R             Q       U      X  U R   x      P  兖 H          R    熠          0   桉             l      璁  X Zh     P         栎        d    8  x    剥  0            1      椟           h 在    P 桦   8   m   U    J  仞 B    e   1   擅   H  R Q 杩     脶   H  P R 瑾     樵          P  B   PR 璩               P  B   PR      2     VQ J     殒          P  B   PR S     椤   v       P  B   PR            h   h 纲 柘    ZhL   P 璨   桷    齐 7        P  8  P         U  J 舾     B     V        H  R Q p     脞  S   剥  0   瑕      p             C C C C C 4  8    剥   F     ≡      P 簟 刳           齐   U  J  x       B    v   剥  R    d    8  x    剥  0   栎        1    X        X Zh 在    P G   8   枭      SQ       x      W   P   栎     A     S  z           P 簟     牖  豚  h    J 舾     B      X   J 舾     B      M Q C   x   J 舾     B    v     R    熠          0   璎          '      i  Y h     P 桄          冼    H  P Q       r      H  R Q 桦     4      H  R Q 栌         崎        崎    崎 簖   崎   U  VS  u     t e   擅 v  tc  t1   u K u    ht   B  h   j hl        牖 Q E P hF   hp   5     h   j h4   a     擘  hl   o     h   j h         t     P    U  E l   砷 弱  U  S    p   J  韪     B           SQ 瑕     腙 U  E t   砷   U   h  j 柃     擅 U  擅  U  擅  U  擅  U  擅  U  WVS  u V   hQ   W       U        u   v   Sj u V 2  Y XV u     vS  uO  Sj V E P    X Z U R V 栾   U    J 舾     B      V u 枘   v  t Q h  V E P p U  W    U    J 舾     B     E  U X  X w qj S u E P v  X Z U R u X   U    J 舾     B    U  J 舾     B         U R Q     漱   U R Q 楮     肽    hR   梓     z     E P Q 枰     U     U R Q 杞     轳   e    陕  秒 U   J 舾     B    V  U  J 舾     B      J 舾     B     S 椟     E P Q O     脲  E P Q       肜  E P Q        U   J  u 雀     B       V 胫 U   J 舾     B    a     E 入   Q        U  WVS  P E P hQ     u 璺        J         凌     E       矾 8   r 9 s B         v  脬 Sj W E P k     E P u u E P 栎   E  u 7   U    J 舾     B     U  J 舾     B    s9 w b   X w Ij S W E P      E P W 桎   U    J 舾     B          E P Q 璎   瘙  v  hR   瑙     毳 E e   陕  E P Q x     x     E P Q c     O   v  W o       殁  1  r 9    B           B           B     Z      B          s B     R      C E  B      E  t d B      E  t M B     t E  t 6 B     J E  t B       E  t     u     贰  Z     S j W u V 6     h  V E P 柝 E  u     U    J 舾     B    q U  J 舾     B    K   Z      j S W E P 栌  X Z E P W 璺   U    J  雀     B         S 槲     E P Q s     耄  E P Q a     z   B     t z       w     W W       脶  W G       橥     W 4       椋     W         y     W         O     W 棼           C E  B     t9 E    u   B     t E        摭   W 璇       朕  W        敕  W           C E  B     t9 E    p   B     t E    Y   睚   W C       朕  W 3       敕  W             C E  B     t9 E       B     t E          W 枳       朕  W 枨       敕  W 璺            W 瑜       h     W            r 9 s B     O   x B         t B         t C 虢                Sj W u V       h  V E P 璩 E  u 栳   U    J  u 父     B    L U  J 舾     B      Z      j S W E P 璜  Y E P W    狱   VQ p     肴  VQ a     毳     t     u S j W E P c    X E P u E   U    J  u 乳 s     W         殪     W         榕     W            v  W        A    B U   J 舾     B    Y U  J 舾     B    3  E   J 舾     B     S       E P Q x     脲  E P Q f     虢  E P Q T        U   J  u 雀     B       V 肜 脒 U   J 舾     B    U  J 舾     B    X     E 仉    E P Q 桤     胛  胧 U   J 舾     B          E 乳 L        U  WVS  E E 鹎 E    1 拦   虍 餮 Q    1      tL U   t  M     tB E F M   u    E 炱 S u 痂 E      t   e   砷   e   擅 v U  D 1   7 M  T    7 拎  U     0 腙 v  0 胄  U  WVS  d U            S u     1 傈      q    5   4 E   B 1     9 r  B 9 s       9      r  E         1 埸  g       I Qj hg   u 枵      Fts   m       I Qj hm   u 璜       t G U C   X     j S u   S 梵  X ZS u 柝   U    J  雀     B     1 1 傈 m       I QVhm   u 7                 U   X 9     蚋 9 星 E   r U  凇   U   E 9 w u E   E   B     9 r   9 s E       t   U         RWQP u            U  f j     RWQP u c 胙    ho        v   v  ho   璜     6  1 傈     虍 餮 IQj h  u 枘       t     B   n     z    j     P R Q S 椟     PS B     1 揽      S IQh  u   1    E           E        p V P u           9    U      p    WV u   W 枭  X ZW E P 璀   U    J 舾     B    W  E P W E     W u u U R     E  P c   U    J 舾     B     U  J 舾     B     M  A    v2 x 9       U  y  j R Q P E P 瑭     M    q Q S V u      P u 柙   E   p    v          u u p   U  J 舾     B    E e   陕  U R Q r     脶  h  p     M 乳 K     U R Q H             W Q 3     轶     U R Q             hR         H   s     E         h  桉             SQ 柰           hR   枞     槲  W VSQ W      A  P VSQ Q               Q P SRQ u 琛        h ⑴ 8     榉   U   J  u 雀     B    v  S 杷     VQ       腓 U   J  u 父     B    U  J 舾     B         W 肟  VQ 柢     朐 U   J 舾     B    U  J 舾     B       E P 肼  U R Q      胙   胨   U  VS  u     t e   擅 v  tj  t8   u K u R E P h  h        h   j h  k     氪 Q E P hF   h        h   j hX           h  L     h   j hH         m     P g    U  E  砷 も  U  S     J  韪     B           SQ      腙 U  S     J  韪     B           SQ J     腙 U   h  j 瑾     擅 U  VS    u S 梃  X Z u S     e    陕     J  韪     B     V     v  SQ 枰     脲 U  WVS      u 9   v9 E 8SVWP        u E e   擅  E 8QS u W       脒 v  h 放 G     氲  U  VS  u V u u E P   E    P  P u u u  U   J 舾     B    e    擅  VQ       腓  秒 U   J 舾     B     S y     VQ 柘     腓  U   fj u u u y U    擅  U  WVS      u 9   v9 E 8SVWP W      u E e   擅  E 8VS u W       脒 v  h 放       氲  U  WVS     E  tP9 t7  u W 璇     W X u S  杞           e   擅              脞  h 嗯 3       U  VS      j t   C                    e   擅  C  C  t    p S i              C  j 3 杓   V 枥  U  VS      j 柝   C                 r  e   擅  C S   t    p S 柰              C  j 3     V    U  SP   C  uM K  u  j 3 栩        p S                C 虢 v    p S                C   U  SP   C  uM C  u  j 3 f        p S 枰              C 虢 v    p S 琚              C   U  WVS            he   5  栊         E P E P E P h   V 韫      Q E P E P    S 楮  X ZSW 枇     W E  u P E   J U    J       B    U  J 舾     B    u     SQ      c     SQ      肭  V n     e   擅  h   h 纲 Q      U   J  u      B    U  J 舾     B     S 杈     VQ       腓  VQ       肱  u    胪 U  S    u E S P 璀    9E    独     U  S       t       t0Ku R E P hF   h       h   j h 薪 枥     肫  h  栉     h   j h 澜      氇  P 桁  U  E  砷  U  S     J  韪     B           SQ       腙 U   h  j       擅 U  WVS     t6      s u 柽  Y C s  WP Y  X Zj S      u  e   擅   P 3    U  WVS  E   X  E ぐ tm U   U    M  A  E  C      E  E P U R 梵 U     E       9 审       纠  u E   E 戳        u  M   U  M t L M     9E  E u 0  u u S E Q P 璋  E  U   B E e   陕  R 梓  u  F    M E       E  E P E P 5   E 8  v 9 审       纠  u E   E  x E  M   A   u u S E  u     v      U  WVS  E   X  E t m U   U  C    U  E  B    E  E P U R  U     E     s 9 审       纠  u E   E         u  U   9E u  E   E e   陕 U      U  E  B      E  E P E P     U  E 0 z  9 审       纠  u E   E   U y  U    v   t  U  WVS  U E t E    j 栊        t  u S 韪   U B  C   w U   9  t S   x tC E C C C U     PS 9   E G    E e   陕  p 敫 v w   X 氆        E  B      E  E P E P 桷 U   B 7   9 审       纠  u E   E          u u 柘  E X U      x     w      P      Xj V e            S    U  S        u A 9H t7 A  t     t    u    擅 Q J u  R B 9 t 綦  A   朕  U  WVS  u       9 t E F     u  H Q 9 t z  t   u5          9 t F     t 惹 e   擅  s t C      W F p 椠  敕  WS 6     肷 Q  t   t   s t C      W F p 椠 攵  WS 瑭     胩  U  E  u 擅   拎 E 砷 赵  U  M U   9 s  擅  入 U  WVS  j   棂        t  WS 桡   G  C e    擅  P W    j V m     璧          S t  U  M S Q B    A t H A B t A H t P J Q   擅  P 腩 v   腌 U  M S Q B    A t H A B t A H t P J Q   擅  P 腩 v   腌 U  SR ‖      t      u X 擅 U  SR       a      seg Usage HzstrSeg filename words dict basic string substr http basic string replace basic string M check basic string assign basic string M replace attempt to create string with null pointer d s d Can not open the Dictionary file          嘬  D  d 8   p   暨    梃        P   p     d h               D   恤     增  X      镊    荀  8           d  P X  x     肛 zPL    4    P   A   B I         T   I X h     嵴 A   B E     u     A   B H   l   A   B H     A   B J   矗   笳 A   B F       M 8     A   B F       O D 0   X  A   B F       Y   w J I e W U x 喽 曛 A   B E     G     j A   B F             A   B E     N Z i   D   A   B O h   j A   B F       愿 z A   B F       d      A   B E       H   A   B H   榷 A   B J   P       A   B E     K   旃   1   A   B E     K    A   B A   Y     A   B A   Y d  x B   A   B I       g     A   B D   K     Y   A   B F       S     A   B F       o e 芸 A   B F       t 8 淅 l l   A   B F       Z 3 Q h D    A   B D   h      A   B F            A   B S   忻 h  A   B F       E D Q 澜 A   B H   A   B J      G                                            L             t         I     I                    j      7   A   L   t                          x                                                                            A        W                                        H  d 0 h    D   q      L P    L P    m   v         H  P 8                s U'   J X c       T   炷 H   t      镭       o   o  o      榷     雷               2   B   R   b   r                 2   B   R   b   r                 2   B   R   b   r               GCC GNU 3 2 20020903 Red Hat Linux 8 0 3 2 7 GCC GNU 3 2 20020903 Red Hat Linux 8 0 3 2 7 GCC GNU 3 2 20020903 Red Hat Linux 8 0 3 2 7 GCC GNU 3 2 20020903 Red Hat Linux 8 0 3 2 7 GCC GNU 3 2 20020903 Red Hat Linux 8 0 3 2 7 GCC GNU 3 2 20020903 Red Hat Linux 8 0 3 2 7 GCC GNU 3 2 20020903 Red Hat Linux 8 0 3 2 7 GCC GNU 3 2 20020903 Red Hat Linux 8 0 3 2 7   炷 T       j       IO stdin used       o   N   M L S L int u   E   FS   w     R S   0     S   S Z   S   S 00 N 1S 27   30   u M d T   C   BS   S   NS   OS Pd   QS Ru   Z t YS V b d eu   fS   gd P hd id jS   kS t rS   sS     l u l S S   d       S   N 8 L   M   M L   5 O   IS   N   Z Z H     X       J   z y     8   a   B g   h   i   j7 Z k3 m S m D 7           s D   8 r sE   uS   wP J xP   z       T     S S   S S W S 0   7 4 J             S   S   S f      3             0 S 7           7     9 K   S m D         S S V   S m     m        0   m    J L 4   2     3J G 5       4 R       o   R     j         v 1       2     3     4o 5S b 6R 8   9   2       v v     Av   Bv H C   D     ES P FS G   H   v Iv N QS RP S     TR d U     V     X   S M S eS u ho Z l     q     r     u     v   v y     z   r   X   i  2  Y S R       4   9 5 Cj   FR i S   Z     S c l   tV   yO S m   7       M A R   O b 5   a   H   V 2 K     B L       U   Z       S E   4 E   aE K S E 7   bq      C 5 7   8S 9o   R     S S 3 usr src build 148620 i386 BUILD glibc 2 2 93 csu GNU AS 2 13 90 0 2 S   usr src build 148620 i386 BUILD glibc 2 2 93 csu GNU AS 2 13 90 0 2   I 8 I I I I ' I I I ' I I 5 I I 4 I   init c sysdeps unix sysv linux bits types h sysdeps unix sysv linux bits sched h linuxthreads sysdeps pthread bits pthreadtypes h wcsmbs wchar h sysdeps gnu G config h iconv gconv h usr lib gcc lib i386 redhat linux 3 2 include stddef h m   tmp ccnhFcil s 炷   W T   3   W dd J   tmp ccqfJNVk s   j       G int32 t time t rw kind daddr t int32 t gconv init fct G iconv t stackaddr set rlim64 t pthread mutex t GCONV ILLEGAL DESCRIPTOR gconv info rw readers unsigned char stacksize useconds t counter pthread descr fct val value schedparam nsteps G int16 t max needed from pthread condattr t off t ssize t blksize t statep init c fsfilcnt t steps fsfilcnt64 t status blkcnt t gconv loaded object short unsigned int G fpos64 t gconv t trans end fct rw writer m lock pthread cond t u int GCONV ILLEGAL INPUT lockkind to name end fct uint64 t t scalar t id t rw lock pthread attr s cd pshared ino t dummy GCONV NOCONV invocation counter pid t u short count quad t inheritsched fsid t rw write waiting GCONV FULL OUTPUT max needed to timer t stateful uint32 t pthread barrier t key t u char gconv step m count min needed to u long short int dev t long long int gconv trans data pthread t outbuf long long unsigned int uid t wchb uint16 t pthread barrierattr t wint t pthread descr struct u quad t ipc pid t sched priority pthread once t m reserved gconv trans end fct flags outbufend combined gconv trans init fct init fct modname trans context fct trans fct rlim t wch shlib handle c waiting intptr t suseconds t ino64 t wchar t GCONV EMPTY INPUT usr src build 148620 i386 BUILD glibc 2 2 93 csu pthread spinlock t GCONV IS LAST blkcnt64 t fsblkcnt64 t mode t pthread mutexattr t guardsize qaddr t pos gconv end fct spinlock IO stdin used ba required GCONV INCOMPLETE INPUT c lock internal use GCONV NODB clock t pthread key t gconv step data gconv trans query fct detachstate socklen t int64 t ba present pthread rwlockattr t m owner GCONV NOMEM off64 t G fpos t ba lock int8 t GCONV OK fsblkcnt t G uint32 t nlink t swblk t sched param GCONV INTERNAL ERROR ba waiting scope mbstate t rw pshared gid t stackaddr clockid t state t uscalar t gconv trans context fct next GCONV IGNORE ERRORS pthread fastlock schedpolicy trans uint8 t gconv fct from name min needed from gconv trans fct m kind data pthread attr t caddr t G uint16 t loff t GNU C 3 2 20020903 Red Hat Linux 8 0 3 2 7 rw read waiting pthread rwlock t mutexkind int16 t symtab strtab shstrtab interp note ABI tag hash dynsym dynstr gnu version gnu version r rel dyn rel plt init text fini rodata eh frame hdr data eh frame gcc except table dynamic ctors dtors jcr got bss comment debug aranges debug pubnames debug info debug abbrev debug line debug frame debug str     1 H   H L 7      t   t   G  o      T  o      c   l      u T   T p l   l         炷 D     E   D   DF     P     P D   P   PU p   雷 W      X   簇 X   钾 X   镭 X     纲 Y     Y     P X         Rh ' ' yi   3 lk 0 k   u K   Q X         H    t        T   l     炷   D       P   雷  簇 钾 镭 纲       簇 J   钾 j   n h   z d         柏   肛   L     钾   饶       l   p   h     l   F 4   7 N   V   g      q      7 F X   7 N H   榷            D   F 薪 7 N 澜              O j y       X        雷    A 纲   8            j        j H      I    2       h   j 忻 h   D       h               G U   H   L   E        p A l   I f X       l   T          P              K     p          8    汹 e              Y a 嘹              H         Q P L   H n     芸   l   m     C  4 y      纲         I   ぃ       t     旃   0 炷 6  E 该  ' m               x       8   H 喽 p         X   矗           L   S 0   V 纲  镭 s           l          1   j  n                   '  m F  h 愿 z    x       A    b      7        淅 l b P   U       0 init c initfini c call gmon start crtstuff c CTOR LIST DTOR LIST EH FRAME BEGIN JCR LIST p 0 completed 1 do global dtors aux frame dummy CTOR END DTOR END FRAME END JCR END do global ctors aux ExSegUrl cpp ZSt8 ioinit DICTFILENAME Z41 static initialization and destruction 0ii tcf 2 tcf 1 tcf 0 GLOBAL I iDict HzSeg cpp SEPARATOR GLOBAL I ZN6CHzSegC2Ev Dict cpp ZZ18 gthread active pvE20 gthread active ptr GLOBAL I ZN5CDictC2Ev dso handle ZNSt13basic filebufIcSt11char traitsIcEED1Ev GLIBCPP 3 2 ZNKSt9basic iosIcSt11char traitsIcEE5widenEc GLIBCPP 3 2 pthread create ZNK5CDict6IsWordERSs ZNK6CHzSeg10SegmentURLER5CDictSs ZNSt13basic filebufIcSt11char traitsIcEEC1Ev GLIBCPP 3 2 DYNAMIC ZNSs4 Rep10 M disposeERKSaIcE GLIBCPP 3 2 ZSt4cout GLIBCPP 3 2 ZNSs10 M replaceIPKcEERSsN9 gnu cxx17 normal iteratorIPcSsEES6 T S7 St18input iterator tag ZStlsIcSt11char traitsIcESaIcEERSt13basic ostreamIT T0 ES7 RKSbIS4 S5 T1 E GLIBCPP 3 2 ZNSt8ios baseD2Ev GLIBCPP 3 2 ZNK6CHzSeg9TranslateEPc ZNSt24 default alloc templateILb1ELi0EE8allocateEj GLIBCPP 3 2 ZTVSt9basic iosIcSt11char traitsIcEE GLIBCPP 3 2 ZNSolsEPFRSoS E GLIBCPP 3 2 ZNSiD2Ev GLIBCPP 3 2 fp hw ZNSs15 M replace safeIN9 gnu cxx17 normal iteratorIPcSsEEEERSsS3 S3 T S5 ZNSt8 Rb treeISsSt4pairIKSsiESt10 Select1stIS2 ESt4lessISsESaIS2 EE14 M create nodeERKS2 ZNSsC1IPKcEET S2 RKSaIcE ZNSsC1EPKcRKSaIcE GLIBCPP 3 2 ZSt20 throw out of rangePKc GLIBCPP 3 2 ZN5CDictD1Ev ZSt7getlineIcSt11char traitsIcESaIcEERSt13basic istreamIT T0 ES7 RSbIS4 S5 T1 ES4 GLIBCPP 3 2 ZNSt9basic iosIcSt11char traitsIcEE5clearESt12 Ios Iostate GLIBCPP 3 2 cxa atexit GLIBC 2 1 3 ZNSt8 Rb treeISsSt4pairIKSsiESt10 Select1stIS2 ESt4lessISsESaIS2 EE13insert uniqueERKS2 ZN6CHzSegC1Ev ZNKSs5rfindEPKcjj GLIBCPP 3 2 ZNSt8ios base4InitC1Ev GLIBCPP 3 2 ZTVSt14basic ifstreamIcSt11char traitsIcEE GLIBCPP 3 2 ZNSt8ios baseC2Ev GLIBCPP 3 2 init ZNSs6appendEPKcj GLIBCPP 3 2 ZN5CDictC2Ev ZN5CDictD2Ev malloc GLIBC 2 0 ZTTSt14basic ofstreamIcSt11char traitsIcEE GLIBCPP 3 2 fscanf GLIBC 2 0 memmove GLIBC 2 0 ZNSoD2Ev GLIBCPP 3 2 cxa rethrow CXXABI 1 2 ZTVSt15basic streambufIcSt11char traitsIcEE GLIBCPP 3 2 ZNK6CHzSeg17SegmentSentenceMMER5CDictSs ZNSt12 basic fileIcED1Ev GLIBCPP 3 2 ZTTSt14basic ifstreamIcSt11char traitsIcEE GLIBCPP 3 2 ZStlsISt11char traitsIcEERSt13basic ostreamIcT ES5 PKc GLIBCPP 3 2 ZNSt13basic filebufIcSt11char traitsIcEE4openEPKcSt13 Ios Openmode GLIBCPP 3 2 ZNSt8 Rb treeISsSt4pairIKSsiESt10 Select1stIS2 ESt4lessISsESaIS2 EE8 M eraseEPSt13 Rb tree nodeIS2 E ZTVSt14basic ofstreamIcSt11char traitsIcEE GLIBCPP 3 2 ZNSs6assignERKSs GLIBCPP 3 2 start ZSt21 Rb tree rotate rightPSt18 Rb tree node baseRS0 ZNSsC1ERKSsjj GLIBCPP 3 2 ZNSt15basic streambufIcSt11char traitsIcEED2Ev GLIBCPP 3 2 ZNSt6localeD1Ev GLIBCPP 3 2 ZNSt13basic filebufIcSt11char traitsIcEE5closeEv GLIBCPP 3 2 ZNKSt8 Rb treeISsSt4pairIKSsiESt10 Select1stIS2 ESt4lessISsESaIS2 EE4findERS1 cxa end catch CXXABI 1 2 ZSt19 throw logic errorPKc GLIBCPP 3 2 ZNSt9basic iosIcSt11char traitsIcEED2Ev GLIBCPP 3 2 gxx personality v0 CXXABI 1 2 bss start main ZNSs4 Rep9 S createEjRKSaIcE GLIBCPP 3 2 ZN6CHzSegD2Ev libc start main GLIBC 2 0 ZN6CHzSegC2Ev iDict data start ZN5CDictC1Ev fini ZN6CHzSegD1Ev ZSt3minIjERKT S2 S2 memcpy GLIBC 2 0 ZNSsC1ERKSs GLIBCPP 3 2 ZSt20 throw length errorPKc GLIBCPP 3 2 fclose GLIBC 2 1 ZN5CDict8OpenDictEv ZNSs4 Rep10 M destroyERKSaIcE GLIBCPP 3 2 ZSt20 Rb tree rotate leftPSt18 Rb tree node baseRS0 ZStplIcSt11char traitsIcESaIcEESbIT T0 T1 ERKS6 S8 ZNSs6appendERKSs GLIBCPP 3 2 ZNSs12 M leak hardEv GLIBCPP 3 2 ZNK6CHzSeg14SegmentHzStrMMER5CDictSs exit GLIBC 2 0 ZSt4endlIcSt11char traitsIcEERSt13basic ostreamIT T0 ES6 GLIBCPP 3 2 ZNSs4 Rep11 S max sizeE GLIBCPP 3 2 edata GLOBAL OFFSET TABLE free GLIBC 2 0 end cxa begin catch CXXABI 1 2 ZNSt14 simple allocISt13 Rb tree nodeISt4pairIKSsiEESt24 default alloc templateILb1ELi0EEE10deallocateEPS4 j ZNSo5flushEv GLIBCPP 3 2 ZNSs15 M replace safeIPKcEERSsN9 gnu cxx17 normal iteratorIPcSsEES6 T S7 ZNSt24 default alloc templateILb1ELi0EE10deallocateEPvj GLIBCPP 3 2 fopen GLIBC 2 1 Unwind Resume GCC 3 0 IO stdin used ZNSs20 S empty rep storageE GLIBCPP 3 2 ZNKSs4findEPKcjj GLIBCPP 3 2 ZNSs7replaceEjjPKcj GLIBCPP 3 2 ZNSs12 S constructIPKcEEPcT S3 RKSaIcESt20forward iterator tag ZNSt9basic iosIcSt11char traitsIcEE4initEPSt15basic streambufIcS1 E GLIBCPP 3 2 data start Jv RegisterClasses ZNSs4 Rep11 S terminalE GLIBCPP 3 2 ZNSs9 M mutateEjjj GLIBCPP 3 2 ZTVSt13basic filebufIcSt11char traitsIcEE GLIBCPP 3 2 ZNSt8ios base4InitD1Ev GLIBCPP 3 2 ZSt18 Rb tree rebalancePSt18 Rb tree node baseRS0 ZNSt8 Rb treeISsSt4pairIKSsiESt10 Select1stIS2 ESt4lessISsESaIS2 EE9 M insertEPSt18 Rb tree node baseSA RKS2 ZNSt22 Rb tree base iterator12 M decrementEv gmon start strcpy GLIBC 2 0 
00000017 ifndef DICT H 040401 define DICT H 040401 include iostream include fstream include string include map using namespace std const string DICTFILENAME words dict typedef struct int id string word int freq DictEntry class CDict public CDict CDict bool GetFreq string const return false bool IsWord string const void AddFreq string private map string int mapDict void OpenDict endif DICT H 040401 
00000018 demonstart using HzSeg include iostream include string include fstream include Dict h include HzSeg h using namespace std CDict iDict int main int argc char argv if argc 2 cout Usage HzstrSeg filename endl exit 0 string FileName argv 1 ifstream fin FileName c str ofstream fout FileName seg c str string line CHzSeg iHzSeg segment instance while getline fin line line iHzSeg SegmentSentenceMM iDict line line iHzSeg SegmentURL iDict line fout line endl fin close fout flush fout close return 0 
